<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#3a36e0">
    <title>Silly Money Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f0f2f5;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            touch-action: none;
        }

        #app {
            max-width: 480px;
            margin: 0 auto;
            height: 100%;
            background: #f5f7ff;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #3a36e0 0%, #5a56f0 100%);
            color: white;
            padding: 12px 16px;
            padding-top: max(12px, env(safe-area-inset-top));
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .balance-pill {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 12px;
            padding-bottom: 100px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warning-box {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .stat-card {
            background: white;
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border-left: 4px solid #3a36e0;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #6c757d;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            color: #121826;
        }

        .clicker-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            color: white;
            margin-bottom: 12px;
            position: relative;
            touch-action: manipulation;
        }

        .level-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .xp-bar-bg {
            background: rgba(0,0,0,0.2);
            height: 10px;
            border-radius: 5px;
            margin: 12px 0;
            overflow: hidden;
        }

        .xp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .tap-btn {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 1.2rem;
            font-weight: 800;
            margin: 15px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            box-shadow: 0 10px 30px rgba(238, 90, 111, 0.4), inset 0 -5px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            position: relative;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(255,255,255,0.3);
        }

        .tap-btn:active {
            transform: scale(0.9);
            box-shadow: 0 5px 15px rgba(238, 90, 111, 0.4);
        }

        .tap-btn i {
            font-size: 1.8rem;
        }

        .floating-text {
            position: fixed;
            color: #ffd700;
            font-weight: 800;
            font-size: 1.3rem;
            pointer-events: none;
            z-index: 9999;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: floatUp 0.8s ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        }

        .offer-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border: 2px solid transparent;
            position: relative;
            cursor: pointer;
            touch-action: manipulation;
        }

        .offer-card.active {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .offer-card.active:active {
            transform: scale(0.98);
            background: #e6f7ed;
        }

        .offer-card.locked {
            opacity: 0.6;
            background: #f8f9fa;
            pointer-events: none;
        }

        .offer-card.completed {
            border-color: #10b981;
            background: #f0fff4;
        }

        .offer-card.claiming {
            pointer-events: none;
            opacity: 0.8;
        }

        .offer-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .offer-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: white;
            background: #3a36e0;
            flex-shrink: 0;
        }

        .offer-card.active .offer-icon {
            background: #10b981;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.5); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
        }

        .offer-info {
            flex: 1;
        }

        .offer-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 2px;
        }

        .offer-desc {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .offer-reward {
            text-align: right;
        }

        .reward-big {
            font-size: 1.6rem;
            font-weight: 800;
            color: #10b981;
        }

        .hot-tag {
            position: absolute;
            top: 0;
            right: 0;
            background: #ff6b6b;
            color: white;
            padding: 4px 12px;
            font-size: 0.65rem;
            font-weight: 800;
            border-bottom-left-radius: 12px;
        }

        .loader-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            z-index: 10;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e9ecef;
            border-top-color: #3a36e0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .balance-display {
            background: linear-gradient(135deg, #121826 0%, #2d3748 100%);
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            text-align: center;
        }

        .balance-label {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .balance-amount-big {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .btn-primary {
            width: 100%;
            padding: 14px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            touch-action: manipulation;
        }

        .btn-primary:disabled {
            background: #6c757d;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary:active:not(:disabled) {
            transform: scale(0.98);
        }

        .spin-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            color: white;
            margin-bottom: 12px;
        }

        .spin-btn {
            background: white;
            color: #f5576c;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.95rem;
            margin-top: 10px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .spin-btn:disabled {
            opacity: 0.6;
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .reward-box {
            background: white;
            border-radius: 12px;
            padding: 16px 10px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            cursor: pointer;
            border: 2px solid transparent;
            touch-action: manipulation;
        }

        .reward-box:active {
            transform: scale(0.95);
            border-color: #3a36e0;
        }

        .reward-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
        }

        .nav-bar {
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0 max(8px, env(safe-area-inset-bottom));
            box-shadow: 0 -4px 20px rgba(0,0,0,0.08);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            flex-shrink: 0;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 20px;
            border-radius: 12px;
            color: #6c757d;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            touch-action: manipulation;
        }

        .nav-btn.active {
            color: #3a36e0;
            background: rgba(58, 54, 224, 0.1);
        }

        .nav-btn i {
            font-size: 1.4rem;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            align-items: flex-end;
            justify-content: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-sheet {
            background: white;
            width: 100%;
            max-width: 480px;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            padding-bottom: max(20px, env(safe-area-inset-bottom));
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .close-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: #f0f2f5;
            color: #6c757d;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }

        .captcha-container {
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
        }

        .verify-btn {
            width: 100%;
            padding: 16px;
            background: #3a36e0;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            margin-top: 15px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .verify-btn:disabled {
            background: #6c757d;
            opacity: 0.5;
            cursor: not-allowed;
        }

        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 2000;
            pointer-events: none;
            text-align: center;
            max-width: 85%;
        }

        .toast.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .toast.success { background: #10b981; }
        .toast.error { background: #ef4444; }

        .progress-bar {
            background: #e9ecef;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: #3a36e0;
            width: 0%;
            transition: width 0.3s;
        }

        .timer-display {
            font-size: 0.75rem;
            color: #6c757d;
            margin-top: 8px;
            font-weight: 600;
        }

        .warning-text {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #856404;
        }
    </style>
</head>
<body>

<div id="app">
    <div class="header">
        <div class="logo">
            <i class="fas fa-coins"></i>
            <span>Silly Money</span>
        </div>
        <div class="balance-pill">
            $<span id="headerBalance">0.00</span>
        </div>
    </div>

    <div class="main" id="mainContent">
        <!-- HOME PAGE -->
        <div class="page active" id="pageHome">
            <div class="warning-box">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Task skipping = Permanent ban!</span>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="levelDisplay">1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Best Click</div>
                    <div class="stat-value" id="bestDisplay">$0.00</div>
                </div>
            </div>

            <div class="clicker-box" id="clickerBox">
                <div class="level-tag">LEVEL <span id="levelBadge">1</span></div>
                <h2 style="font-size: 1.4rem; margin-bottom: 5px;">Tap to Earn</h2>
                <p style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 10px;">Click fast! Win up to $0.50</p>
                
                <div class="xp-bar-bg">
                    <div class="xp-bar-fill" id="xpBar"></div>
                </div>
                <div style="font-size: 0.8rem; margin-bottom: 10px;">
                    $<span id="currentXP">0.00</span> / $<span id="targetXP">5.00</span>
                </div>

                <button class="tap-btn" id="tapButton">
                    <i class="fas fa-hand-pointer"></i>
                    <span>TAP!</span>
                </button>
                
                <div style="font-size: 0.7rem; opacity: 0.8; margin-top: 5px;">
                    <i class="fas fa-lock"></i> Verification required per level
                </div>
            </div>

            <div class="card">
                <h3 style="font-size: 1rem; margin-bottom: 12px;"><i class="fas fa-chart-line" style="color: #3a36e0;"></i> Stats</h3>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Total Clicks</span>
                    <strong id="totalClicks">0</strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Total Earned</span>
                    <strong style="color: #10b981;">$<span id="totalEarned">0.00</span></strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Coins</span>
                    <strong style="color: #f59e0b;"><span id="coinsDisplay">0</span> <i class="fas fa-coins"></i></strong>
                </div>
            </div>
        </div>

        <!-- EARN PAGE -->
        <div class="page" id="pageEarn">
            <div class="card" style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span style="font-size: 0.9rem; color: #6c757d;">Progress</span>
                    <strong style="color: #3a36e0;"><span id="tasksDone">0</span>/3 Offers</strong>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>

            <div class="offer-card active" id="offer1" data-offer="1" data-reward="5">
                <div class="hot-tag">HOT</div>
                <div class="offer-header">
                    <div class="offer-icon"><i class="fas fa-bolt"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Starter Offer</div>
                        <div class="offer-desc">Complete tasks to earn</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big">$5</div>
                    </div>
                </div>
            </div>

            <div class="offer-card locked" id="offer2" data-offer="2" data-reward="10">
                <div class="offer-header">
                    <div class="offer-icon" style="background: #f59e0b;"><i class="fas fa-layer-group"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Premium Offer</div>
                        <div class="offer-desc">Unlock after Offer 1</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big" style="color: #f59e0b;">$10</div>
                    </div>
                </div>
            </div>

            <div class="offer-card locked" id="offer3" data-offer="3" data-reward="15">
                <div class="offer-header">
                    <div class="offer-icon" style="background: #ef4444;"><i class="fas fa-crown"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Elite Offer</div>
                        <div class="offer-desc">Unlock after Offer 2</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big" style="color: #ef4444;">$15</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- REWARDS PAGE -->
        <div class="page" id="pageRewards">
            <div class="balance-display">
                <div class="balance-label">Available Balance</div>
                <div class="balance-amount-big">$<span id="mainBalance">0.00</span></div>
                <button class="btn-primary" id="withdrawBtn" disabled>
                    <i class="fas fa-lock"></i> <span id="withdrawText">Locked</span>
                </button>
                <div style="margin-top: 12px; font-size: 0.75rem; opacity: 0.8;">
                    Need: $50 min • 3 offers • 7 days
                </div>
            </div>

            <div class="spin-box">
                <i class="fas fa-gift" style="font-size: 2rem; margin-bottom: 8px;"></i>
                <h3 style="font-size: 1.1rem; margin-bottom: 5px;">Daily Free Spin</h3>
                <p style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 10px;">Win 10-100 coins!</p>
                <button class="spin-btn" id="spinBtn">Spin Now</button>
                <div class="timer-display" id="spinTimer" style="display: none;"></div>
            </div>

            <div class="card">
                <h3 style="font-size: 1rem; margin-bottom: 12px;"><i class="fas fa-gift" style="color: #ef4444;"></i> Redeem Coins</h3>
                <div class="rewards-grid">
                    <div class="reward-box" id="rew1" data-cost="5000" data-name="$5 PayPal">
                        <div class="reward-icon" style="background: #003087;"><i class="fab fa-paypal"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$5 PayPal</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">5,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew2" data-cost="8000" data-name="$10 Steam">
                        <div class="reward-icon" style="background: #1b2838;"><i class="fab fa-steam"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$10 Steam</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">8,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew3" data-cost="15000" data-name="$20 Amazon">
                        <div class="reward-icon" style="background: #FF9900;"><i class="fab fa-amazon"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$20 Amazon</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">15,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew4" data-cost="45000" data-name="$50 Visa">
                        <div class="reward-icon" style="background: #1A1F71;"><i class="fab fa-cc-visa"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$50 Visa</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">45,000 coins</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-btn active" data-page="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-btn" data-page="earn">
            <i class="fas fa-tasks"></i>
            <span>Earn</span>
        </div>
        <div class="nav-btn" data-page="rewards">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
        </div>
    </div>
</div>

<!-- CAPTCHA Modal -->
<div class="modal-overlay" id="captchaModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-shield-alt" style="color: #3a36e0;"></i> Human Verification</div>
        </div>
        
        <div class="warning-text">
            <i class="fas fa-exclamation-triangle"></i> <strong>Important:</strong> You must complete tasks on the website to verify you're human.
        </div>

        <div data-captcha-enable="true"></div>
        
        <button class="verify-btn" id="captchaBtn" disabled>
            <i class="fas fa-lock"></i> Complete Verification
        </button>
    </div>
</div>

<!-- Offer Timer Modal -->
<div class="modal-overlay" id="timerModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-clock" style="color: #3a36e0;"></i> Verifying Tasks</div>
        </div>
        
        <div style="text-align: center; padding: 20px;">
            <div class="spinner" style="width: 50px; height: 50px; margin: 0 auto 15px;"></div>
            <p style="font-size: 0.9rem; color: #495057; margin-bottom: 10px;">
                <i class="fas fa-tasks"></i> Complete tasks on the website
            </p>
            <p style="font-size: 0.8rem; color: #6c757d;">
                Stay on this screen. Do not close.
            </p>
            <div class="warning-text" style="margin-top: 15px;">
                <i class="fas fa-exclamation-circle"></i> Leaving early = NO reward
            </div>
        </div>
    </div>
</div>

<!-- Claim Modal -->
<div class="modal-overlay" id="claimModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-check-circle" style="color: #10b981;"></i> Ready to Claim!</div>
        </div>
        
        <div style="text-align: center; padding: 20px;">
            <i class="fas fa-gift" style="font-size: 3rem; color: #10b981; margin-bottom: 15px;"></i>
            <h3 style="font-size: 1.3rem; margin-bottom: 10px;">$<span id="claimAmount">0</span> Reward</h3>
            <p style="font-size: 0.85rem; color: #6c757d; margin-bottom: 20px;">
                Your tasks have been verified!
            </p>
            <button class="btn-primary" id="claimBtn" style="background: #10b981;">
                <i class="fas fa-download"></i> Claim Reward
            </button>
        </div>
    </div>
</div>

<!-- Withdraw Modal -->
<div class="modal-overlay" id="withdrawModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-university" style="color: #10b981;"></i> Withdraw</div>
            <button class="close-btn" onclick="closeModal('withdrawModal')"><i class="fas fa-times"></i></button>
        </div>
        
        <input type="number" class="input-field" id="wAmount" placeholder="Amount (Min $50)" style="font-size: 16px; padding: 14px; border: 2px solid #e9ecef; border-radius: 10px; width: 100%; margin-bottom: 12px;">
        
        <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.85rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>Balance:</span>
                <strong>$<span id="wBalance">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span>Fee (5%):</span>
                <strong style="color: #ef4444;">-$<span id="wFee">0.00</span></strong>
            </div>
        </div>

        <button class="btn-primary" onclick="processWithdraw()">
            <i class="fas fa-paper-plane"></i> Confirm Withdrawal
        </button>
    </div>
</div>

<div class="toast" id="toast"></div>

<script>
// State Management
const state = {
    balance: parseFloat(localStorage.getItem('smb_balance')) || 0,
    coins: parseInt(localStorage.getItem('smb_coins')) || 0,
    level: parseInt(localStorage.getItem('smb_level')) || 1,
    xp: parseFloat(localStorage.getItem('smb_xp')) || 0,
    targetXP: 5,
    clicks: parseInt(localStorage.getItem('smb_clicks')) || 0,
    best: parseFloat(localStorage.getItem('smb_best')) || 0,
    earned: parseFloat(localStorage.getItem('smb_earned')) || 0,
    offers: JSON.parse(localStorage.getItem('smb_offers')) || {1: false, 2: false, 3: false},
    offerClaimed: JSON.parse(localStorage.getItem('smb_claimed')) || {1: false, 2: false, 3: false},
    lastSpin: localStorage.getItem('smb_spin') || null,
    created: localStorage.getItem('smb_created') || new Date().toISOString(),
    currentOffer: null
};

function save() {
    localStorage.setItem('smb_balance', state.balance);
    localStorage.setItem('smb_coins', state.coins);
    localStorage.setItem('smb_level', state.level);
    localStorage.setItem('smb_xp', state.xp);
    localStorage.setItem('smb_clicks', state.clicks);
    localStorage.setItem('smb_best', state.best);
    localStorage.setItem('smb_earned', state.earned);
    localStorage.setItem('smb_offers', JSON.stringify(state.offers));
    localStorage.setItem('smb_claimed', JSON.stringify(state.offerClaimed));
    localStorage.setItem('smb_created', state.created);
}

// Navigation
document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const page = this.dataset.page;
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('page' + page.charAt(0).toUpperCase() + page.slice(1)).classList.add('active');
        if (page === 'earn') updateOffers();
    });
});

// CLICKER - Fixed for mobile
const tapBtn = document.getElementById('tapButton');
const clickerBox = document.getElementById('clickerBox');

function doClick(e) {
    e.preventDefault();
    e.stopPropagation();
    
    // Calculate reward
    let reward;
    const r = Math.random();
    
    if (r > 0.995) reward = 2.00;
    else if (r > 0.95) reward = 0.50;
    else if (r > 0.80) reward = 0.20 + (Math.random() * 0.15);
    else reward = 0.01 + (Math.random() * 0.09);
    
    reward = Math.round(reward * 100) / 100;
    
    // Update state
    state.balance += reward;
    state.xp += reward;
    state.clicks++;
    state.earned += reward;
    
    if (reward > state.best) {
        state.best = reward;
    }
    
    // Visual feedback
    const float = document.createElement('div');
    float.className = 'floating-text';
    float.textContent = '+$' + reward.toFixed(2);
    
    const rect = tapBtn.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    float.style.left = (centerX - 30 + (Math.random() * 40 - 20)) + 'px';
    float.style.top = (centerY - 40) + 'px';
    document.body.appendChild(float);
    
    setTimeout(() => float.remove(), 800);
    
    // Haptic feedback
    if (navigator.vibrate) navigator.vibrate(50);
    
    save();
    updateUI();
    
    // Check level up
    if (state.xp >= state.targetXP) {
        setTimeout(showCaptcha, 500);
    }
    
    return false;
}

// Multiple event listeners for maximum compatibility
tapBtn.addEventListener('touchstart', doClick, {passive: false});
tapBtn.addEventListener('mousedown', doClick);
tapBtn.addEventListener('click', doClick);

// Also make the whole clicker box tappable for easier mobile use
clickerBox.addEventListener('touchstart', function(e) {
    if (e.target === clickerBox || e.target.closest('.clicker-box') === clickerBox) {
        doClick(e);
    }
}, {passive: false});

// CAPTCHA
function showCaptcha() {
    document.getElementById('captchaBtn').disabled = true;
    document.getElementById('captchaBtn').innerHTML = '<i class="fas fa-lock"></i> Complete Verification';
    document.getElementById('captchaModal').classList.add('show');
    
    // Check for CAPTCHA completion periodically
    const checkInt = setInterval(() => {
        const captchaContainer = document.querySelector('[data-captcha-enable="true"]');
        // The external script should modify the DOM when complete
        // We'll enable the button after 3 seconds as fallback
    }, 500);
    
    // Enable button after 3 seconds (simulating CAPTCHA completion detection)
    setTimeout(() => {
        document.getElementById('captchaBtn').disabled = false;
        document.getElementById('captchaBtn').innerHTML = '<i class="fas fa-check-circle"></i> Verify & Continue';
        clearInterval(checkInt);
    }, 3000);
}

document.getElementById('captchaBtn').addEventListener('click', function() {
    if (this.disabled) return;
    
    state.level++;
    state.xp = 0;
    state.targetXP = state.level * 5;
    
    closeModal('captchaModal');
    showToast('Level ' + state.level + ' Unlocked!', 'success');
    save();
    updateUI();
});

// OFFERS
function updateOffers() {
    const completed = Object.values(state.offers).filter(v => v).length;
    document.getElementById('tasksDone').textContent = completed;
    document.getElementById('progressBar').style.width = (completed / 3 * 100) + '%';
    
    [1, 2, 3].forEach(n => {
        const el = document.getElementById('offer' + n);
        if (!el) return;
        
        if (state.offerClaimed[n]) {
            el.className = 'offer-card completed';
            el.innerHTML = '<div style="text-align:center;color:#10b981;padding:20px;"><i class="fas fa-check-circle" style="font-size:2.5rem;"></i><div style="margin-top:10px;font-weight:700;font-size:1.1rem;">Completed!</div></div>';
        } else if (state.offers[n]) {
            // Ready to claim but not claimed yet
            el.className = 'offer-card active';
            el.innerHTML = `
                <div style="text-align:center;padding:10px;">
                    <i class="fas fa-gift" style="font-size:2rem;color:#10b981;margin-bottom:10px;"></i>
                    <div style="font-weight:700;font-size:1.2rem;margin-bottom:5px;">$${n === 1 ? '5' : n === 2 ? '10' : '15'} Ready!</div>
                    <button class="btn-primary" style="max-width:200px;margin-top:10px;" onclick="claimOffer(${n})">
                        <i class="fas fa-download"></i> Claim Now
                    </button>
                </div>
            `;
        } else if (n === 1 || state.offers[n-1]) {
            el.className = 'offer-card active';
        } else {
            el.className = 'offer-card locked';
        }
    });
}

// Offer click handlers
document.getElementById('offer1').addEventListener('click', () => startOffer(1));
document.getElementById('offer2').addEventListener('click', () => { if (state.offers[1] || state.offerClaimed[1]) startOffer(2); });
document.getElementById('offer3').addEventListener('click', () => { if (state.offers[2] || state.offerClaimed[2]) startOffer(3); });

function startOffer(num) {
    if (state.offers[num] || state.offerClaimed[num]) return;
    
    state.currentOffer = num;
    
    // Open offer link
    window.open('https://lockedpage1.website/cl/i/mgk4r5', '_blank');
    
    // Show timer modal
    document.getElementById('timerModal').classList.add('show');
    
    // 2 minute timer (120 seconds)
    let timeLeft = 120;
    const modal = document.getElementById('timerModal');
    
    const timer = setInterval(() => {
        // Check if modal is still open
        if (!modal.classList.contains('show')) {
            clearInterval(timer);
            return;
        }
        
        timeLeft--;
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            completeOffer(num);
        }
    }, 1000);
    
    // Also complete when user returns to page (visibility change)
    document.addEventListener('visibilitychange', function handler() {
        if (!document.hidden && timeLeft > 0) {
            // User came back, continue timer
        }
    });
}

function completeOffer(num) {
    closeModal('timerModal');
    state.offers[num] = true;
    save();
    
    // Show claim modal
    const reward = num === 1 ? 5 : num === 2 ? 10 : 15;
    document.getElementById('claimAmount').textContent = reward;
    document.getElementById('claimModal').classList.add('show');
}

function claimOffer(num) {
    const reward = num === 1 ? 5 : num === 2 ? 10 : 15;
    state.balance += reward;
    state.earned += reward;
    state.offerClaimed[num] = true;
    save();
    closeModal('claimModal');
    showToast('+$' + reward + ' Claimed!', 'success');
    updateOffers();
    updateUI();
}

document.getElementById('claimBtn').addEventListener('click', function() {
    claimOffer(state.currentOffer);
});

// SPIN
document.getElementById('spinBtn').addEventListener('click', function() {
    if (state.lastSpin) {
        const last = new Date(state.lastSpin);
        const now = new Date();
        if (last.toDateString() === now.toDateString()) {
            showToast('Already spun today!', 'error');
            return;
        }
    }
    
    this.disabled = true;
    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
    
    setTimeout(() => {
        const won = Math.floor(Math.random() * 90) + 10;
        state.coins += won;
        state.lastSpin = new Date().toISOString();
        localStorage.setItem('smb_spin', state.lastSpin);
        
        this.innerHTML = '<i class="fas fa-check"></i> Done';
        showToast('You won ' + won + ' coins!', 'success');
        save();
        updateUI();
        startCountdown();
    }, 1500);
});

function startCountdown() {
    const el = document.getElementById('spinTimer');
    el.style.display = 'block';
    
    const update = () => {
        const now = new Date();
        const tmr = new Date(now);
        tmr.setDate(tmr.getDate() + 1);
        tmr.setHours(0, 0, 0, 0);
        
        const diff = tmr - now;
        const h = Math.floor(diff / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        
        el.textContent = `Next spin: ${h}h ${m}m ${s}s`;
    };
    
    update();
    setInterval(update, 1000);
}

// REWARDS
document.getElementById('rew1').addEventListener('click', () => redeem(5000, '$5 PayPal'));
document.getElementById('rew2').addEventListener('click', () => redeem(8000, '$10 Steam'));
document.getElementById('rew3').addEventListener('click', () => redeem(15000, '$20 Amazon'));
document.getElementById('rew4').addEventListener('click', () => redeem(45000, '$50 Visa'));

function redeem(cost, name) {
    if (state.coins < cost) {
        showToast('Need ' + (cost - state.coins) + ' more coins!', 'error');
        return;
    }
    if (!confirm('Redeem ' + name + ' for ' + cost + ' coins?')) return;
    
    state.coins -= cost;
    showToast('Redeemed ' + name + '!', 'success');
    save();
    updateUI();
}

// WITHDRAW
document.getElementById('withdrawBtn').addEventListener('click', function() {
    const age = (Date.now() - new Date(state.created)) / (1000 * 60 * 60 * 24);
    const completedOffers = Object.values(state.offerClaimed).filter(v => v).length;
    
    if (state.balance < 50) {
        showToast('Need $' + (50 - state.balance).toFixed(2) + ' more!', 'error');
        return;
    }
    if (completedOffers < 3) {
        showToast('Complete all 3 offers first!', 'error');
        return;
    }
    if (age < 7) {
        showToast(Math.ceil(7 - age) + ' days remaining!', 'error');
        return;
    }
    
    document.getElementById('wBalance').textContent = state.balance.toFixed(2);
    document.getElementById('withdrawModal').classList.add('show');
});

document.getElementById('wAmount').addEventListener('input', function() {
    const amt = parseFloat(this.value) || 0;
    document.getElementById('wFee').textContent = (amt * 0.05).toFixed(2);
});

function processWithdraw() {
    const amt = parseFloat(document.getElementById('wAmount').value);
    
    if (!amt || amt < 50) {
        showToast('Minimum $50!', 'error');
        return;
    }
    if (amt > state.balance) {
        showToast('Insufficient balance!', 'error');
        return;
    }
    
    state.balance -= amt;
    closeModal('withdrawModal');
    showToast('Withdrawal processed!', 'success');
    save();
    updateUI();
}

// UI UPDATE
function updateUI() {
    document.getElementById('headerBalance').textContent = state.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = state.balance.toFixed(2);
    document.getElementById('levelDisplay').textContent = state.level;
    document.getElementById('levelBadge').textContent = state.level;
    document.getElementById('currentXP').textContent = state.xp.toFixed(2);
    document.getElementById('targetXP').textContent = state.targetXP.toFixed(2);
    document.getElementById('xpBar').style.width = Math.min((state.xp / state.targetXP) * 100, 100) + '%';
    document.getElementById('totalClicks').textContent = state.clicks;
    document.getElementById('bestDisplay').textContent = '$' + state.best.toFixed(2);
    document.getElementById('totalEarned').textContent = state.earned.toFixed(2);
    document.getElementById('coinsDisplay').textContent = state.coins;
    
    // Withdraw button
    const age = (Date.now() - new Date(state.created)) / (1000 * 60 * 60 * 24);
    const completedOffers = Object.values(state.offerClaimed).filter(v => v).length;
    const btn = document.getElementById('withdrawBtn');
    const txt = document.getElementById('withdrawText');
    
    if (state.balance >= 50 && completedOffers >= 3 && age >= 7) {
        btn.disabled = false;
        txt.textContent = 'Withdraw';
    } else {
        let msg = '';
        if (state.balance < 50) msg = '$' + (50 - state.balance).toFixed(0) + ' more';
        else if (completedOffers < 3) msg = (3 - completedOffers) + ' offers';
        else msg = Math.ceil(7 - age) + ' days';
        txt.textContent = msg;
    }
    
    // Spin button
    if (state.lastSpin) {
        const last = new Date(state.lastSpin);
        const now = new Date();
        if (last.toDateString() === now.toDateString()) {
            document.getElementById('spinBtn').disabled = true;
            document.getElementById('spinBtn').innerHTML = '<i class="fas fa-check"></i> Done';
            startCountdown();
        }
    }
}

function closeModal(id) {
    document.getElementById(id).classList.remove('show');
}

function showToast(msg, type) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = 'toast show ' + (type || '');
    setTimeout(() => t.classList.remove('show'), 2500);
}

// Init
updateUI();
updateOffers();

// Prevent zoom
document.addEventListener('gesturestart', e => e.preventDefault());
let lastTouchEnd = 0;
document.addEventListener('touchend', e => {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) e.preventDefault();
    lastTouchEnd = now;
}, false);
</script>

<script type="text/javascript" src="https://lockedpage1.website/cp/js/joy6y"></script>

</body>
</html>            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.1);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #3a36e0 0%, #5a56f0 100%);
            color: white;
            padding: 12px 16px;
            padding-top: max(12px, env(safe-area-inset-top));
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .balance-pill {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        /* Main Content */
        .main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 12px;
            padding-bottom: 100px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        }

        .warning-box {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Stats */
        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .stat-card {
            background: white;
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border-left: 4px solid #3a36e0;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #6c757d;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            color: #121826;
        }

        /* Clicker */
        .clicker-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            color: white;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .level-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .xp-bar-bg {
            background: rgba(0,0,0,0.2);
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .xp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .tap-btn {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 1.1rem;
            font-weight: 800;
            margin: 15px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            box-shadow: 0 8px 25px rgba(238, 90, 111, 0.4);
            cursor: pointer;
            position: relative;
            touch-action: manipulation;
        }

        .tap-btn:active {
            transform: scale(0.92);
        }

        .tap-btn i {
            font-size: 1.5rem;
        }

        /* Offers */
        .offer-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border: 2px solid transparent;
            position: relative;
            cursor: pointer;
        }

        .offer-card.active {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .offer-card.locked {
            opacity: 0.6;
            background: #f8f9fa;
        }

        .offer-card.completed {
            border-color: #10b981;
            background: #f0fff4;
        }

        .offer-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .offer-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
            background: #3a36e0;
            flex-shrink: 0;
        }

        .offer-card.active .offer-icon {
            background: #10b981;
        }

        .offer-info {
            flex: 1;
        }

        .offer-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 2px;
        }

        .offer-desc {
            font-size: 0.75rem;
            color: #6c757d;
        }

        .offer-reward {
            text-align: right;
        }

        .reward-big {
            font-size: 1.4rem;
            font-weight: 800;
            color: #10b981;
        }

        .hot-tag {
            position: absolute;
            top: 0;
            right: 0;
            background: #ff6b6b;
            color: white;
            padding: 4px 12px;
            font-size: 0.65rem;
            font-weight: 700;
            border-bottom-left-radius: 12px;
        }

        /* Rewards */
        .balance-display {
            background: linear-gradient(135deg, #121826 0%, #2d3748 100%);
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            text-align: center;
        }

        .balance-label {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .balance-amount-big {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .btn-primary {
            width: 100%;
            padding: 14px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            touch-action: manipulation;
        }

        .btn-primary:disabled {
            background: #6c757d;
            opacity: 0.6;
        }

        .btn-primary:active:not(:disabled) {
            transform: scale(0.98);
        }

        .spin-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            color: white;
            margin-bottom: 12px;
        }

        .spin-btn {
            background: white;
            color: #f5576c;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.95rem;
            margin-top: 10px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .spin-btn:disabled {
            opacity: 0.6;
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .reward-box {
            background: white;
            border-radius: 12px;
            padding: 16px 10px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            cursor: pointer;
            border: 2px solid transparent;
            touch-action: manipulation;
        }

        .reward-box:active {
            transform: scale(0.95);
            border-color: #3a36e0;
        }

        .reward-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
        }

        /* Bottom Nav */
        .nav-bar {
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0 max(8px, env(safe-area-inset-bottom));
            box-shadow: 0 -4px 20px rgba(0,0,0,0.08);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            flex-shrink: 0;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 20px;
            border-radius: 12px;
            color: #6c757d;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            touch-action: manipulation;
        }

        .nav-btn.active {
            color: #3a36e0;
            background: rgba(58, 54, 224, 0.1);
        }

        .nav-btn i {
            font-size: 1.4rem;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            align-items: flex-end;
            justify-content: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-sheet {
            background: white;
            width: 100%;
            max-width: 480px;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            padding-bottom: max(20px, env(safe-area-inset-bottom));
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .close-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: #f0f2f5;
            color: #6c757d;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }

        .close-btn:active {
            background: #e9ecef;
        }

        .task-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .task-option:active {
            border-color: #3a36e0;
            background: #f8f9ff;
        }

        .task-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .task-info {
            flex: 1;
        }

        .task-name {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .task-payout {
            font-size: 0.75rem;
            color: #6c757d;
        }

        /* CAPTCHA */
        .captcha-box {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 15px 0;
        }

        .captcha-check {
            width: 50px;
            height: 50px;
            border: 3px solid #dee2e6;
            border-radius: 8px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            background: white;
            transition: all 0.2s;
        }

        .captcha-check.checked {
            background: #10b981;
            border-color: #10b981;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 2000;
            pointer-events: none;
            text-align: center;
            max-width: 80%;
        }

        .toast.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .input-field {
            width: 100%;
            padding: 14px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 12px;
            outline: none;
        }

        .input-field:focus {
            border-color: #3a36e0;
        }

        .info-text {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #856404;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: #e9ecef;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: #3a36e0;
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>

<div id="app">
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <i class="fas fa-coins"></i>
            <span>Silly Money</span>
        </div>
        <div class="balance-pill">
            $<span id="headerBalance">0.00</span>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main" id="mainContent">
        <!-- HOME PAGE -->
        <div class="page active" id="pageHome">
            <div class="warning-box">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Task skipping = Permanent ban!</span>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="levelDisplay">1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Earned</div>
                    <div class="stat-value" id="earnedDisplay">$0</div>
                </div>
            </div>

            <div class="clicker-box">
                <div class="level-tag">LEVEL <span id="levelBadge">1</span></div>
                <h2 style="font-size: 1.4rem; margin-bottom: 5px;">Tap to Earn</h2>
                <p style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 10px;">Click fast! Win up to $0.50</p>
                
                <div class="xp-bar-bg">
                    <div class="xp-bar-fill" id="xpBar"></div>
                </div>
                <div style="font-size: 0.75rem; margin-bottom: 10px;">
                    $<span id="currentXP">0.00</span> / $<span id="targetXP">5.00</span>
                </div>

                <button class="tap-btn" id="tapButton">
                    <i class="fas fa-hand-pointer"></i>
                    <span>TAP!</span>
                </button>
            </div>

            <div class="card">
                <h3 style="font-size: 1rem; margin-bottom: 12px;"><i class="fas fa-chart-line" style="color: #3a36e0;"></i> Stats</h3>
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Total Clicks</span>
                    <strong id="totalClicks">0</strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Best Click</span>
                    <strong style="color: #10b981;">$<span id="bestClick">0.00</span></strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span style="color: #6c757d; font-size: 0.85rem;">Coins</span>
                    <strong style="color: #f59e0b;"><span id="coinsDisplay">0</span> <i class="fas fa-coins"></i></strong>
                </div>
            </div>
        </div>

        <!-- EARN PAGE -->
        <div class="page" id="pageEarn">
            <div class="info-text">
                <strong>How it works:</strong> Complete offers in order. Each offer requires finishing tasks on our partner site.
            </div>

            <div class="card" style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span style="font-size: 0.9rem; color: #6c757d;">Progress</span>
                    <strong style="color: #3a36e0;"><span id="tasksDone">0</span>/6 Tasks</strong>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>

            <!-- Offer 1 -->
            <div class="offer-card active" id="offer1" data-offer="1">
                <div class="hot-tag">HOT</div>
                <div class="offer-header">
                    <div class="offer-icon"><i class="fas fa-bolt"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Starter Offer</div>
                        <div class="offer-desc">Complete 1 task • 3-5 mins</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big">$2</div>
                    </div>
                </div>
            </div>

            <!-- Offer 2 -->
            <div class="offer-card locked" id="offer2" data-offer="2">
                <div class="offer-header">
                    <div class="offer-icon" style="background: #f59e0b;"><i class="fas fa-layer-group"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Double Offer</div>
                        <div class="offer-desc">Complete 2 tasks</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big" style="color: #f59e0b;">$2</div>
                    </div>
                </div>
            </div>

            <!-- Offer 3 -->
            <div class="offer-card locked" id="offer3" data-offer="3">
                <div class="offer-header">
                    <div class="offer-icon" style="background: #ef4444;"><i class="fas fa-crown"></i></div>
                    <div class="offer-info">
                        <div class="offer-title">Pro Offer</div>
                        <div class="offer-desc">Complete 3 tasks</div>
                    </div>
                    <div class="offer-reward">
                        <div class="reward-big" style="color: #ef4444;">$2</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- REWARDS PAGE -->
        <div class="page" id="pageRewards">
            <div class="balance-display">
                <div class="balance-label">Available Balance</div>
                <div class="balance-amount-big">$<span id="mainBalance">0.00</span></div>
                <button class="btn-primary" id="withdrawBtn" disabled>
                    <i class="fas fa-lock"></i> <span id="withdrawText">Locked</span>
                </button>
                <div style="margin-top: 12px; font-size: 0.75rem; opacity: 0.8;">
                    Need: $50 min • 20 tasks • 7 days
                </div>
            </div>

            <div class="spin-box">
                <i class="fas fa-gift" style="font-size: 2rem; margin-bottom: 8px;"></i>
                <h3 style="font-size: 1.1rem; margin-bottom: 5px;">Daily Free Spin</h3>
                <p style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 10px;">Win 10-100 coins!</p>
                <button class="spin-btn" id="spinBtn">Spin Now</button>
                <div id="spinCountdown" style="font-size: 0.75rem; margin-top: 8px; display: none;"></div>
            </div>

            <div class="card">
                <h3 style="font-size: 1rem; margin-bottom: 12px;"><i class="fas fa-gift" style="color: #ef4444;"></i> Redeem Coins</h3>
                <div class="rewards-grid">
                    <div class="reward-box" id="rew1" data-cost="5000" data-name="$5 PayPal">
                        <div class="reward-icon" style="background: #003087;"><i class="fab fa-paypal"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$5 PayPal</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">5,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew2" data-cost="8000" data-name="$10 Steam">
                        <div class="reward-icon" style="background: #1b2838;"><i class="fab fa-steam"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$10 Steam</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">8,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew3" data-cost="15000" data-name="$20 Amazon">
                        <div class="reward-icon" style="background: #FF9900;"><i class="fab fa-amazon"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$20 Amazon</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">15,000 coins</div>
                    </div>
                    <div class="reward-box" id="rew4" data-cost="45000" data-name="$50 Visa">
                        <div class="reward-icon" style="background: #1A1F71;"><i class="fab fa-cc-visa"></i></div>
                        <div style="font-weight: 700; font-size: 0.85rem;">$50 Visa</div>
                        <div style="color: #f59e0b; font-size: 0.75rem; font-weight: 700;">45,000 coins</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="nav-bar">
        <div class="nav-btn active" data-page="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-btn" data-page="earn">
            <i class="fas fa-tasks"></i>
            <span>Earn</span>
        </div>
        <div class="nav-btn" data-page="rewards">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
        </div>
    </div>
</div>

<!-- Task Modal -->
<div class="modal-overlay" id="taskModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-tasks" style="color: #10b981;"></i> Select Task</div>
            <button class="close-btn" onclick="closeModal('taskModal')"><i class="fas fa-times"></i></button>
        </div>
        <p style="color: #6c757d; font-size: 0.85rem; margin-bottom: 15px;">Choose a task to complete:</p>
        <div id="taskList"></div>
        <div class="info-text" style="margin-top: 10px;">
            <i class="fas fa-exclamation-triangle"></i> Must complete fully. Partial = NO reward.
        </div>
    </div>
</div>

<!-- CAPTCHA Modal -->
<div class="modal-overlay" id="captchaModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-shield-alt" style="color: #3a36e0;"></i> Verification</div>
        </div>
        <p style="text-align: center; margin-bottom: 15px; color: #6c757d; font-size: 0.9rem;">
            Complete to reach <strong>Level <span id="nextLevel">2</span></strong>
        </p>
        
        <div class="captcha-box">
            <div class="captcha-check" id="captchaBox" onclick="checkCaptcha()">
                <i class="fas fa-check" id="captchaIcon" style="display: none;"></i>
            </div>
            <div style="font-size: 0.9rem; color: #495057;">I'm not a robot</div>
            <div style="font-size: 0.75rem; color: #6c757d; margin-top: 5px;">Tap the box to verify</div>
        </div>

        <button class="btn-primary" id="captchaBtn" onclick="submitCaptcha()" disabled style="margin-top: 5px;">
            Verify & Continue
        </button>
        
        <p style="text-align: center; margin-top: 12px; font-size: 0.75rem; color: #ef4444;">
            <i class="fas fa-exclamation-circle"></i> Skipping = Ban
        </p>
    </div>
</div>

<!-- Withdraw Modal -->
<div class="modal-overlay" id="withdrawModal">
    <div class="modal-sheet">
        <div class="modal-header">
            <div class="modal-title"><i class="fas fa-university" style="color: #10b981;"></i> Withdraw</div>
            <button class="close-btn" onclick="closeModal('withdrawModal')"><i class="fas fa-times"></i></button>
        </div>
        
        <div style="background: #d4edda; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 0.8rem; color: #155724;">
            <i class="fas fa-check-circle"></i> Account verified
        </div>

        <input type="number" class="input-field" id="wAmount" placeholder="Amount (Min $50)">
        
        <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.85rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>Balance:</span>
                <strong>$<span id="wBalance">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span>Fee (5%):</span>
                <strong style="color: #ef4444;">-$<span id="wFee">0.00</span></strong>
            </div>
        </div>

        <button class="btn-primary" onclick="processWithdraw()">
            <i class="fas fa-paper-plane"></i> Confirm Withdrawal
        </button>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// Game State
const state = {
    balance: parseFloat(localStorage.getItem('smb_balance')) || 0,
    coins: parseInt(localStorage.getItem('smb_coins')) || 0,
    level: parseInt(localStorage.getItem('smb_level')) || 1,
    xp: parseFloat(localStorage.getItem('smb_xp')) || 0,
    targetXP: 5,
    clicks: parseInt(localStorage.getItem('smb_clicks')) || 0,
    best: parseFloat(localStorage.getItem('smb_best')) || 0,
    earned: parseFloat(localStorage.getItem('smb_earned')) || 0,
    tasks: parseInt(localStorage.getItem('smb_tasks')) || 0,
    offers: JSON.parse(localStorage.getItem('smb_offers')) || {1: false, 2: false, 3: false},
    offerProgress: JSON.parse(localStorage.getItem('smb_oprog')) || {1: 0, 2: 0, 3: 0},
    lastSpin: localStorage.getItem('smb_spin') || null,
    created: localStorage.getItem('smb_created') || new Date().toISOString()
};

// Save state
function save() {
    localStorage.setItem('smb_balance', state.balance);
    localStorage.setItem('smb_coins', state.coins);
    localStorage.setItem('smb_level', state.level);
    localStorage.setItem('smb_xp', state.xp);
    localStorage.setItem('smb_clicks', state.clicks);
    localStorage.setItem('smb_best', state.best);
    localStorage.setItem('smb_earned', state.earned);
    localStorage.setItem('smb_tasks', state.tasks);
    localStorage.setItem('smb_offers', JSON.stringify(state.offers));
    localStorage.setItem('smb_oprog', JSON.stringify(state.offerProgress));
    localStorage.setItem('smb_created', state.created);
}

// Navigation
document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const page = this.dataset.page;
        
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        this.classList.add('active');
        document.getElementById('page' + page.charAt(0).toUpperCase() + page.slice(1)).classList.add('active');
        
        if (page === 'earn') updateOffers();
    });
});

// Tap Button
const tapBtn = document.getElementById('tapButton');
tapBtn.addEventListener('touchstart', handleTap, {passive: false});
tapBtn.addEventListener('click', handleTap);

function handleTap(e) {
    e.preventDefault();
    
    let reward;
    const r = Math.random();
    
    if (r > 0.995) reward = 2.00;
    else if (r > 0.95) reward = 0.50;
    else if (r > 0.80) reward = 0.20 + (Math.random() * 0.15);
    else reward = 0.01 + (Math.random() * 0.09);
    
    reward = Math.round(reward * 100) / 100;
    
    state.balance += reward;
    state.xp += reward;
    state.clicks++;
    state.earned += reward;
    if (reward > state.best) state.best = reward;
    
    // Floating text
    const float = document.createElement('div');
    float.textContent = '+$' + reward.toFixed(2);
    float.style.cssText = 'position:fixed;color:#ffd700;font-weight:800;font-size:1.2rem;pointer-events:none;z-index:9999;';
    
    const touch = e.touches ? e.touches[0] : e;
    float.style.left = (touch.clientX - 30) + 'px';
    float.style.top = (touch.clientY - 50) + 'px';
    document.body.appendChild(float);
    
    float.animate([
        {transform: 'translateY(0) scale(1)', opacity: 1},
        {transform: 'translateY(-80px) scale(1.3)', opacity: 0}
    ], {duration: 800, easing: 'ease-out'}).onfinish = () => float.remove();
    
    save();
    updateUI();
    
    if (state.xp >= state.targetXP) {
        setTimeout(showCaptcha, 300);
    }
}

// CAPTCHA
let captchaDone = false;

function showCaptcha() {
    captchaDone = false;
    document.getElementById('nextLevel').textContent = state.level + 1;
    document.getElementById('captchaBox').classList.remove('checked');
    document.getElementById('captchaIcon').style.display = 'none';
    document.getElementById('captchaBtn').disabled = true;
    document.getElementById('captchaModal').classList.add('show');
}

function checkCaptcha() {
    if (captchaDone) return;
    captchaDone = true;
    document.getElementById('captchaBox').classList.add('checked');
    document.getElementById('captchaIcon').style.display = 'block';
    document.getElementById('captchaBtn').disabled = false;
    showToast('Verified!', 'success');
}

function submitCaptcha() {
    if (!captchaDone) return;
    
    state.level++;
    state.xp = 0;
    state.targetXP = state.level * 5;
    
    closeModal('captchaModal');
    showToast('Level ' + state.level + ' Unlocked!', 'success');
    save();
    updateUI();
}

// Offers
const tasks = [
    {name: 'Quick Survey', desc: '3 minutes', reward: 0.50, icon: 'fa-poll', color: '#3b82f6'},
    {name: 'Install App', desc: 'Install + Open', reward: 0.40, icon: 'fa-mobile-alt', color: '#10b981'},
    {name: 'Email Sign Up', desc: 'Create account', reward: 0.60, icon: 'fa-envelope', color: '#f59e0b'},
    {name: 'Game Task', desc: 'Reach level 2', reward: 0.70, icon: 'fa-gamepad', color: '#8b5cf6'}
];

function updateOffers() {
    const p = (state.tasks / 6) * 100;
    document.getElementById('progressBar').style.width = p + '%';
    document.getElementById('tasksDone').textContent = state.tasks;
    
    // Update offer cards
    [1,2,3].forEach(n => {
        const el = document.getElementById('offer' + n);
        if (state.offers[n]) {
            el.className = 'offer-card completed';
            el.innerHTML = '<div style="text-align:center;color:#10b981;padding:10px;"><i class="fas fa-check-circle" style="font-size:2rem;"></i><div style="margin-top:5px;font-weight:700;">Completed!</div></div>';
        } else if (n === 1 || state.offers[n-1]) {
            el.className = 'offer-card active';
        }
    });
}

document.getElementById('offer1').addEventListener('click', () => openTasks(1));
document.getElementById('offer2').addEventListener('click', () => { if(state.offers[1]) openTasks(2); });
document.getElementById('offer3').addEventListener('click', () => { if(state.offers[2]) openTasks(3); });

function openTasks(offerNum) {
    if (state.offers[offerNum]) return;
    
    const needed = offerNum === 1 ? 1 : offerNum === 2 ? 2 : 3;
    const list = document.getElementById('taskList');
    list.innerHTML = '';
    
    tasks.forEach((t, i) => {
        const div = document.createElement('div');
        div.className = 'task-option';
        div.innerHTML = `
            <div class="task-icon" style="background: ${t.color};"><i class="fas ${t.icon}"></i></div>
            <div class="task-info">
                <div class="task-name">${t.name}</div>
                <div class="task-payout">${t.desc} • +$${t.reward.toFixed(2)}</div>
            </div>
            <i class="fas fa-chevron-right" style="color: #adb5bd;"></i>
        `;
        div.addEventListener('click', () => doTask(offerNum, needed));
        list.appendChild(div);
    });
    
    document.getElementById('taskModal').classList.add('show');
}

function doTask(offerNum, needed) {
    closeModal('taskModal');
    showToast('Opening task...', 'info');
    
    window.open('https://confirmapp.space/cl/i/1xxpdx', '_blank');
    
    setTimeout(() => {
        state.offerProgress[offerNum]++;
        state.tasks++;
        
        if (state.offerProgress[offerNum] >= needed) {
            state.offers[offerNum] = true;
            state.balance += 2;
            state.earned += 2;
            showToast('Offer Complete! +$2.00', 'success');
        } else {
            showToast('Task done! ' + (needed - state.offerProgress[offerNum]) + ' more', 'info');
        }
        
        save();
        updateUI();
        updateOffers();
    }, 2000);
}

// Rewards
document.getElementById('spinBtn').addEventListener('click', spin);
document.getElementById('withdrawBtn').addEventListener('click', openWithdraw);

function spin() {
    if (state.lastSpin) {
        const last = new Date(state.lastSpin);
        const now = new Date();
        if (last.toDateString() === now.toDateString()) {
            showToast('Already spun today!', 'error');
            return;
        }
    }
    
    const btn = document.getElementById('spinBtn');
    btn.disabled = true;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
    
    setTimeout(() => {
        const won = Math.floor(Math.random() * 90) + 10;
        state.coins += won;
        state.lastSpin = new Date().toISOString();
        localStorage.setItem('smb_spin', state.lastSpin);
        
        btn.innerHTML = '<i class="fas fa-check"></i> Claimed';
        showToast('You won ' + won + ' coins!', 'success');
        save();
        updateUI();
        startCountdown();
    }, 1500);
}

function startCountdown() {
    const el = document.getElementById('spinCountdown');
    el.style.display = 'block';
    
    const update = () => {
        const now = new Date();
        const tmr = new Date(now);
        tmr.setDate(tmr.getDate() + 1);
        tmr.setHours(0,0,0,0);
        
        const diff = tmr - now;
        const h = Math.floor(diff/3600000);
        const m = Math.floor((diff%3600000)/60000);
        const s = Math.floor((diff%60000)/1000);
        
        el.textContent = `Next spin in ${h}h ${m}m ${s}s`;
    };
    
    update();
    setInterval(update, 1000);
}

// Redeem rewards
document.getElementById('rew1').addEventListener('click', () => redeem(5000, '$5 PayPal'));
document.getElementById('rew2').addEventListener('click', () => redeem(8000, '$10 Steam'));
document.getElementById('rew3').addEventListener('click', () => redeem(15000, '$20 Amazon'));
document.getElementById('rew4').addEventListener('click', () => redeem(45000, '$50 Visa'));

function redeem(cost, name) {
    if (state.coins < cost) {
        showToast('Need ' + (cost - state.coins) + ' more coins!', 'error');
        return;
    }
    if (!confirm('Redeem ' + name + ' for ' + cost + ' coins?')) return;
    
    state.coins -= cost;
    showToast('Redeemed ' + name + '!', 'success');
    save();
    updateUI();
}

// Withdraw
function openWithdraw() {
    const age = (Date.now() - new Date(state.created)) / (1000*60*60*24);
    
    if (state.balance < 50) {
        showToast('Need $' + (50 - state.balance).toFixed(2) + ' more!', 'error');
        return;
    }
    if (state.tasks < 20) {
        showToast('Complete ' + (20 - state.tasks) + ' more tasks!', 'error');
        return;
    }
    if (age < 7) {
        showToast(Math.ceil(7-age) + ' days remaining!', 'error');
        return;
    }
    
    document.getElementById('wBalance').textContent = state.balance.toFixed(2);
    document.getElementById('withdrawModal').classList.add('show');
}

document.getElementById('wAmount').addEventListener('input', function() {
    const amt = parseFloat(this.value) || 0;
    document.getElementById('wFee').textContent = (amt * 0.05).toFixed(2);
});

function processWithdraw() {
    const amt = parseFloat(document.getElementById('wAmount').value);
    
    if (!amt || amt < 50) {
        showToast('Minimum $50!', 'error');
        return;
    }
    if (amt > state.balance) {
        showToast('Insufficient balance!', 'error');
        return;
    }
    
    state.balance -= amt;
    closeModal('withdrawModal');
    showToast('Withdrawal processed!', 'success');
    save();
    updateUI();
}

// UI Update
function updateUI() {
    document.getElementById('headerBalance').textContent = state.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = state.balance.toFixed(2);
    document.getElementById('levelDisplay').textContent = state.level;
    document.getElementById('levelBadge').textContent = state.level;
    document.getElementById('currentXP').textContent = state.xp.toFixed(2);
    document.getElementById('targetXP').textContent = state.targetXP.toFixed(2);
    document.getElementById('xpBar').style.width = Math.min((state.xp/state.targetXP)*100, 100) + '%';
    document.getElementById('totalClicks').textContent = state.clicks;
    document.getElementById('bestClick').textContent = state.best.toFixed(2);
    document.getElementById('coinsDisplay').textContent = state.coins;
    document.getElementById('earnedDisplay').textContent = '$' + state.earned.toFixed(0);
    
    // Withdraw button
    const age = (Date.now() - new Date(state.created)) / (1000*60*60*24);
    const btn = document.getElementById('withdrawBtn');
    const txt = document.getElementById('withdrawText');
    
    if (state.balance >= 50 && state.tasks >= 20 && age >= 7) {
        btn.disabled = false;
        txt.textContent = 'Withdraw';
    } else {
        let msg = '';
        if (state.balance < 50) msg = '$' + (50-state.balance).toFixed(0) + ' more';
        else if (state.tasks < 20) msg = (20-state.tasks) + ' tasks';
        else msg = Math.ceil(7-age) + ' days';
        txt.textContent = msg;
    }
    
    // Spin button
    if (state.lastSpin) {
        const last = new Date(state.lastSpin);
        const now = new Date();
        if (last.toDateString() === now.toDateString()) {
            document.getElementById('spinBtn').disabled = true;
            document.getElementById('spinBtn').innerHTML = '<i class="fas fa-check"></i> Done';
            startCountdown();
        }
    }
}

function closeModal(id) {
    document.getElementById(id).classList.remove('show');
}

function showToast(msg, type) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = 'toast show ' + (type || '');
    setTimeout(() => t.classList.remove('show'), 2500);
}

// Init
updateUI();
updateOffers();

// Prevent zoom
document.addEventListener('gesturestart', e => e.preventDefault());
document.addEventListener('dblclick', e => e.preventDefault());
</script>

</body>
</html>            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: fixed;
            touch-action: none;
        }

        body {
            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.5;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: #f5f7ff;
            height: 100%;
            width: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 60px rgba(0,0,0,0.1);
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, #5a56f0 100%);
            color: white;
            padding: 12px 16px;
            padding-top: calc(12px + var(--safe-top));
            flex-shrink: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(58, 54, 224, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-balance-mini {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            position: relative;
            padding-bottom: 20px;
        }

        .bottom-nav {
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0 calc(12px + var(--safe-bottom));
            box-shadow: 0 -5px 30px rgba(0,0,0,0.1);
            z-index: 1000;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            flex-shrink: 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--gray);
            text-decoration: none;
            font-size: 0.7rem;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            padding: 8px 20px;
            border-radius: 12px;
            min-width: 70px;
            touch-action: manipulation;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(58, 54, 224, 0.1);
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 2px;
        }

        .content-section {
            display: none;
            padding: 12px;
            animation: fadeIn 0.3s ease;
            min-height: 100%;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warning-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 10px 12px;
            border-radius: 10px;
            margin-bottom: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(238, 90, 111, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card-title {
            font-size: 0.95rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .stat-box {
            background: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stat-label {
            font-size: 0.65rem;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--dark);
        }

        .clicker-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius);
            padding: 18px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 12px;
            box-shadow: var(--shadow-lg);
            touch-action: manipulation;
        }

        .clicker-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
        }

        .level-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 8px;
            backdrop-filter: blur(10px);
        }

        .xp-bar-container {
            background: rgba(0,0,0,0.2);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .xp-text {
            font-size: 0.7rem;
            opacity: 0.9;
            margin-top: 4px;
            font-weight: 500;
        }

        .click-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 0.9rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(238, 90, 111, 0.4), inset 0 -5px 10px rgba(0,0,0,0.1);
            transition: transform 0.1s;
            position: relative;
            margin: 10px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 4px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(255,255,255,0.3);
        }

        .click-button:active {
            transform: scale(0.9);
            box-shadow: 0 4px 15px rgba(238, 90, 111, 0.4);
        }

        .click-button i {
            font-size: 1.4rem;
        }

        .floating-text {
            position: fixed;
            color: #ffd700;
            font-weight: 800;
            font-size: 1.1rem;
            pointer-events: none;
            animation: floatUp 0.8s ease-out forwards;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            z-index: 9999;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-80px) scale(1.2); opacity: 0; }
        }

        .offer-container {
            margin-bottom: 12px;
        }

        .offer-box {
            background: white;
            border-radius: var(--border-radius);
            padding: 16px;
            margin-bottom: 10px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
        }

        .offer-box.active-offer {
            border-color: var(--success);
            cursor: pointer;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .offer-box.active-offer:active {
            transform: scale(0.98);
            background: #e6f7ed;
        }

        .offer-box.locked-offer {
            opacity: 0.7;
            background: #f8f9fa;
            border-color: var(--gray-light);
        }

        .offer-box.completed-offer {
            border-color: var(--success);
            background: #f0fff4;
            opacity: 0.9;
        }

        .hot-banner {
            position: absolute;
            top: 10px;
            right: -28px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 4px 30px;
            font-size: 0.6rem;
            font-weight: 800;
            text-transform: uppercase;
            transform: rotate(45deg);
            box-shadow: 0 2px 10px rgba(238, 90, 111, 0.4);
            letter-spacing: 1px;
        }

        .offer-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .offer-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            flex-shrink: 0;
            background: linear-gradient(135deg, var(--primary) 0%, #5a56f0 100%);
        }

        .offer-box.active-offer .offer-icon {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.5); }
            50% { box-shadow: 0 0 15px rgba(16, 185, 129, 0.8); }
        }

        .offer-title-section {
            flex: 1;
            min-width: 0;
        }

        .offer-title {
            font-size: 0.95rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .offer-subtitle {
            font-size: 0.7rem;
            color: var(--gray);
            font-weight: 500;
        }

        .offer-reward {
            text-align: right;
            flex-shrink: 0;
        }

        .reward-amount {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--success);
            line-height: 1;
        }

        .reward-label {
            font-size: 0.6rem;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
        }

        .offer-description {
            font-size: 0.75rem;
            color: var(--gray);
            line-height: 1.4;
            margin-bottom: 8px;
            padding-left: 54px;
        }

        .offer-requirement {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 700;
            margin-left: 54px;
        }

        .offer-box.locked-offer .offer-requirement {
            background: var(--gray);
        }

        .offer-box.completed-offer .offer-requirement {
            background: var(--success);
        }

        .lock-icon, .check-icon {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--gray-light);
        }

        .check-icon {
            color: var(--success);
        }

        .info-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--info);
        }

        .info-section-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .info-section-title i {
            color: var(--info);
        }

        .task-types-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .task-type-tag {
            background: white;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            color: var(--dark);
            border: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .task-type-tag i {
            color: var(--primary);
            font-size: 0.65rem;
        }

        .balance-card {
            background: linear-gradient(135deg, var(--dark) 0%, #2d3748 100%);
            color: white;
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .balance-label {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .balance-amount {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .withdraw-btn {
            width: 100%;
            padding: 12px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            touch-action: manipulation;
            position: relative;
            z-index: 10;
        }

        .withdraw-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .withdraw-btn:not(:disabled):active {
            transform: scale(0.98);
        }

        .withdrawal-notice {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.7rem;
            line-height: 1.4;
        }

        .withdrawal-notice i {
            color: var(--warning);
            margin-right: 4px;
        }

        .daily-gift {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: var(--border-radius);
            padding: 16px;
            color: white;
            text-align: center;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .gift-icon {
            font-size: 2rem;
            margin-bottom: 6px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .spin-button {
            background: white;
            color: #f5576c;
            border: none;
            padding: 10px 24px;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 8px;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 0.85rem;
            touch-action: manipulation;
            position: relative;
            z-index: 10;
        }

        .spin-button:disabled {
            background: rgba(255,255,255,0.5);
            cursor: not-allowed;
        }

        .spin-button:not(:disabled):active {
            transform: scale(0.95);
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .reward-item {
            background: white;
            border-radius: 12px;
            padding: 14px 8px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
            touch-action: manipulation;
            position: relative;
        }

        .reward-item:active {
            transform: scale(0.95);
            border-color: var(--primary);
            background: #f0f7ff;
        }

        .reward-img {
            width: 40px;
            height: 40px;
            margin: 0 auto 6px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .reward-name {
            font-weight: 700;
            font-size: 0.8rem;
            margin-bottom: 2px;
        }

        .reward-cost {
            color: var(--warning);
            font-weight: 800;
            font-size: 0.7rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            align-items: flex-end;
            justify-content: center;
            padding: 0;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 20px 16px calc(20px + var(--safe-bottom));
            width: 100%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 12px;
            padding-right: 40px;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0,0,0,0.1);
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--gray);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
            z-index: 10;
            touch-action: manipulation;
        }

        .modal-close:active {
            background: var(--gray-light);
            color: var(--dark);
            transform: scale(0.9);
        }

        .captcha-wrapper {
            margin: 15px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 12px;
            border: 2px dashed var(--gray-light);
            padding: 20px;
        }

        .verify-captcha-btn, .action-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
            touch-action: manipulation;
            position: relative;
            z-index: 10;
        }

        .verify-captcha-btn:disabled, .action-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .verify-captcha-btn:not(:disabled):active, .action-btn:not(:disabled):active {
            transform: scale(0.98);
            background: var(--primary-dark);
        }

        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10000;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            font-size: 0.9rem;
            max-width: 80%;
            text-align: center;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: var(--warning); color: var(--dark); }

        .task-item {
            margin-bottom: 10px;
            cursor: pointer;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
            background: white;
            touch-action: manipulation;
        }

        .task-item:active {
            border-color: var(--primary);
            background: #f0f7ff;
            transform: scale(0.98);
        }

        input[type="number"], input[type="text"] {
            font-size: 16px;
            -webkit-appearance: none;
            border: 2px solid var(--gray-light);
            border-radius: 10px;
            padding: 12px;
            width: 100%;
            outline: none;
        }

        input[type="number"]:focus, input[type="text"]:focus {
            border-color: var(--primary);
        }

        .progress-tracker {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .progress-text {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .progress-text strong {
            color: var(--primary);
        }

        .progress-bar-track {
            height: 6px;
            background: var(--gray-light);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #5a56f0);
            width: 0%;
            transition: width 0.5s ease;
        }

        .anti-fraud-notice {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-left: 4px solid var(--danger);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 12px;
            font-size: 0.75rem;
            color: var(--dark);
        }

        .anti-fraud-notice strong {
            color: var(--danger);
            display: block;
            margin-bottom: 4px;
            font-size: 0.8rem;
        }

        @media (max-height: 700px) {
            .click-button {
                width: 100px;
                height: 100px;
                font-size: 0.8rem;
            }
            .click-button i {
                font-size: 1.2rem;
            }
        }

        /* CAPTCHA specific styles */
        .captcha-box {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin: 10px 0;
        }

        .captcha-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #ccc;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            cursor: pointer;
            background: white;
        }

        .captcha-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }
    </style>
</head>
<body>

<div class="app-container">
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-coins"></i>
                <span>Silly Money</span>
            </div>
            <div class="user-balance-mini">
                $<span id="headerBalance">0.00</span>
            </div>
        </div>
    </header>

    <div class="content-area" id="contentArea">
        <!-- HOME SECTION -->
        <section id="homeSection" class="content-section active">
            <div class="warning-banner">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Task skipping = Permanent ban!</span>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Total Earned</div>
                    <div class="stat-value" id="totalEarned">$0.00</div>
                </div>
            </div>

            <div class="clicker-container">
                <div class="level-badge">LEVEL <span id="levelBadge">1</span></div>
                <h2 style="margin-bottom: 4px; font-size: 1.3rem;">Tap to Earn</h2>
                <p style="opacity: 0.9; margin-bottom: 10px; font-size: 0.75rem;">Click fast! Max $0.50 per click</p>
                
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xpBar"></div>
                </div>
                <div class="xp-text">
                    $<span id="currentXP">0.00</span> / $<span id="targetXP">5.00</span> to Level Up
                </div>

                <button class="click-button" id="clickBtn">
                    <i class="fas fa-hand-pointer"></i>
                    <span>TAP!</span>
                </button>

                <p style="font-size: 0.7rem; opacity: 0.8;">
                    <i class="fas fa-lock"></i> CAPTCHA every level
                </p>
            </div>

            <div class="card">
                <div class="card-title">
                    <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                    Your Stats
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee;">
                    <span style="color: var(--gray); font-size: 0.8rem;">Total Clicks</span>
                    <strong id="totalClicks">0</strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee;">
                    <span style="color: var(--gray); font-size: 0.8rem;">Best Click</span>
                    <strong style="color: var(--success);">$<span id="highestClick">0.00</span></strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span style="color: var(--gray); font-size: 0.8rem;">Coins</span>
                    <strong style="color: var(--warning);"><span id="coinsBalance">0</span> <i class="fas fa-coins"></i></strong>
                </div>
            </div>

            <div class="anti-fraud-notice">
                <strong><i class="fas fa-shield-alt"></i> STRICT POLICY</strong>
                Task skipping detected by our AI will result in immediate account suspension.
            </div>
        </section>

        <!-- TASKS SECTION -->
        <section id="tasksSection" class="content-section">
            <div class="anti-fraud-notice">
                <strong><i class="fas fa-exclamation-circle"></i> TASK SYSTEM</strong>
                Complete offers in order. Partial completion = NO REWARD.
            </div>

            <div class="progress-tracker">
                <div class="progress-text">
                    Progress: <strong id="completedTasksCount">0</strong> / 6 Tasks
                </div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBarFill"></div>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box active-offer" id="offer1" data-offer="1">
                    <div class="hot-banner">HOT</div>
                    <div class="offer-header">
                        <div class="offer-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Starter Offer</div>
                            <div class="offer-subtitle">Best for beginners</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount">$2.00</div>
                            <div class="reward-label">Instant</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>1 simple task</strong> from our partner network. Average time: 3-5 minutes.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-check-circle"></i> Complete 1 Task
                    </div>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box locked-offer" id="offer2" data-offer="2">
                    <div class="offer-header">
                        <div class="offer-icon" style="background: var(--warning);">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Double Up Offer</div>
                            <div class="offer-subtitle">2x the work, 2x the reward</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount" style="color: var(--warning);">$2.00</div>
                            <div class="reward-label">Locked</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>2 tasks</strong> to unlock this reward. Must complete Offer 1 first.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-lock"></i> Complete 2 Tasks
                    </div>
                    <i class="fas fa-lock lock-icon"></i>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box locked-offer" id="offer3" data-offer="3">
                    <div class="offer-header">
                        <div class="offer-icon" style="background: var(--danger);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Pro Offer</div>
                            <div class="offer-subtitle">Maximum reward tier</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount" style="color: var(--danger);">$2.00</div>
                            <div class="reward-label">Locked</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>3 tasks</strong> for the ultimate reward. Unlocks after Offer 2.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-lock"></i> Complete 3 Tasks
                    </div>
                    <i class="fas fa-lock lock-icon"></i>
                </div>
            </div>

            <div class="info-section">
                <div class="info-section-title">
                    <i class="fas fa-info-circle"></i>
                    Available Task Types
                </div>
                <div class="task-types-list">
                    <div class="task-type-tag"><i class="fas fa-poll"></i> Survey</div>
                    <div class="task-type-tag"><i class="fas fa-mobile-alt"></i> App</div>
                    <div class="task-type-tag"><i class="fas fa-envelope"></i> Sign Up</div>
                    <div class="task-type-tag"><i class="fas fa-gamepad"></i> Game</div>
                    <div class="task-type-tag"><i class="fas fa-video"></i> Video</div>
                </div>
            </div>
        </section>

        <!-- REWARDS SECTION -->
        <section id="rewardsSection" class="content-section">
            <div class="balance-card">
                <div class="balance-label">Available Balance</div>
                <div class="balance-amount">$<span id="mainBalance">0.00</span></div>
                <button class="withdraw-btn" id="withdrawBtn" disabled>
                    <i class="fas fa-lock"></i> Locked
                </button>
                <div class="withdrawal-notice">
                    <i class="fas fa-info-circle"></i>
                    <strong>Requirements:</strong> Min $50 | 20+ tasks | 7 days old
                </div>
            </div>

            <div class="daily-gift">
                <div class="gift-icon"><i class="fas fa-gift"></i></div>
                <h3 style="margin-bottom: 4px; font-size: 1rem;">Daily Free Spin</h3>
                <p style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 8px;">Win 10-100 coins</p>
                <button class="spin-button" id="spinBtn">
                    <i class="fas fa-sync-alt"></i> Spin Now
                </button>
                <p id="spinTimer" style="font-size: 0.7rem; margin-top: 6px; display: none;">
                    Next: <span id="countdown">00:00:00</span>
                </p>
            </div>

            <div class="card">
                <div class="card-title">
                    <i class="fas fa-gift" style="color: var(--danger);"></i>
                    Redeem Rewards (Coins)
                </div>
                <div class="rewards-grid">
                    <div class="reward-item" id="reward1" data-type="paypal" data-cost="5000" data-name="$5 PayPal">
                        <div class="reward-img" style="background: #003087;"><i class="fab fa-paypal"></i></div>
                        <div class="reward-name">$5 PayPal</div>
                        <div class="reward-cost">5,000 coins</div>
                    </div>
                    <div class="reward-item" id="reward2" data-type="steam" data-cost="8000" data-name="$10 Steam">
                        <div class="reward-img" style="background: #1b2838;"><i class="fab fa-steam"></i></div>
                        <div class="reward-name">$10 Steam</div>
                        <div class="reward-cost">8,000 coins</div>
                    </div>
                    <div class="reward-item" id="reward3" data-type="amazon" data-cost="15000" data-name="$20 Amazon">
                        <div class="reward-img" style="background: #FF9900;"><i class="fab fa-amazon"></i></div>
                        <div class="reward-name">$20 Amazon</div>
                        <div class="reward-cost">15,000 coins</div>
                    </div>
                    <div class="reward-item" id="reward4" data-type="visa" data-cost="45000" data-name="$50 Visa">
                        <div class="reward-img" style="background: #1A1F71;"><i class="fab fa-cc-visa"></i></div>
                        <div class="reward-name">$50 Visa</div>
                        <div class="reward-cost">45,000 coins</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-tab="home" id="nav-home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-item" data-tab="tasks" id="nav-tasks">
            <i class="fas fa-tasks"></i>
            <span>Earn</span>
        </div>
        <div class="nav-item" data-tab="rewards" id="nav-rewards">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
        </div>
    </nav>
</div>

<!-- Offer Modal -->
<div id="offerModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('offerModal')"><i class="fas fa-times"></i></button>
        <div class="modal-header">
            <i class="fas fa-tasks" style="color: var(--success);"></i>
            <span id="offerModalTitle">Select Task</span>
        </div>
        <p style="margin-bottom: 12px; color: var(--gray); font-size: 0.8rem;">
            Choose <strong id="tasksNeeded">1</strong> task(s):
        </p>
        <div id="taskOptions"></div>
        <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 10px; border-radius: 8px; margin-top: 12px; font-size: 0.7rem; color: #856404;">
            <i class="fas fa-exclamation-triangle"></i> Must complete fully. Partial = NO reward.
        </div>
    </div>
</div>

<!-- CAPTCHA Modal -->
<div id="captchaModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('captchaModal')"><i class="fas fa-times"></i></button>
        <div class="modal-header">
            <i class="fas fa-shield-alt" style="color: var(--primary);"></i>
            Verification Required
        </div>
        <p style="margin-bottom: 15px; color: var(--gray); font-size: 0.85rem; text-align: center;">
            Complete verification to reach <strong>Level <span id="nextLevelNum">2</span></strong>
        </p>
        
        <div class="captcha-wrapper" id="captchaContainer">
            <div class="captcha-box" id="customCaptcha">
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: var(--dark);">
                    Tap to verify you're human
                </div>
                <div class="captcha-checkbox" id="captchaCheck" onclick="handleCaptchaClick()">
                    <i class="fas fa-check" style="display: none;" id="captchaCheckIcon"></i>
                </div>
                <span style="font-size: 0.8rem; color: var(--gray);">I'm not a robot</span>
            </div>
        </div>

        <button class="verify-captcha-btn" id="verifyCaptchaBtn" onclick="completeLevelUp()" disabled>
            <i class="fas fa-check-circle"></i> Verify & Continue
        </button>
        
        <p style="text-align: center; margin-top: 10px; font-size: 0.7rem; color: var(--danger);">
            <i class="fas fa-exclamation-circle"></i> Skipping = Permanent Ban
        </p>
    </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('withdrawModal')"><i class="fas fa-times"></i></button>
        <div class="modal-header">
            <i class="fas fa-university" style="color: var(--success);"></i>
            Withdrawal
        </div>
        <div style="background: #d4edda; border: 1px solid var(--success); padding: 10px; border-radius: 8px; margin-bottom: 12px; font-size: 0.75rem;">
            <i class="fas fa-check-circle" style="color: var(--success);"></i> Account verified
        </div>
        <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 0.8rem;">Amount (Min $50)</label>
            <input type="number" id="withdrawAmount" min="50" step="0.01" placeholder="Enter amount">
        </div>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; margin-bottom: 12px; font-size: 0.75rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>Balance:</span>
                <strong>$<span id="withdrawBalance">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span>Fee (5%):</span>
                <strong style="color: var(--danger);">-$<span id="withdrawFee">0.00</span></strong>
            </div>
        </div>
        <button class="action-btn" onclick="processWithdrawal()">
            <i class="fas fa-paper-plane"></i> Confirm Withdrawal
        </button>
    </div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<script>
// State
let state = {
    balance: 0,
    coins: 0,
    level: 1,
    xp: 0,
    targetXP: 5.00,
    totalClicks: 0,
    highestClick: 0,
    totalEarned: 0,
    lastSpin: null,
    tasksCompleted: 0,
    offersCompleted: { 1: false, 2: false, 3: false },
    currentOfferTasks: { 1: 0, 2: 0, 3: 0 },
    accountCreated: null,
    captchaVerified: false
};

const availableTasks = [
    { id: 'survey1', name: 'Quick Survey (3 min)', type: 'survey', reward: 0.50, icon: 'fas fa-poll', color: '#3b82f6' },
    { id: 'app1', name: 'Install App + Open', type: 'app', reward: 0.40, icon: 'fas fa-mobile-alt', color: '#10b981' },
    { id: 'signup1', name: 'Email Sign Up', type: 'signup', reward: 0.60, icon: 'fas fa-envelope', color: '#f59e0b' },
    { id: 'game1', name: 'Reach Level 2', type: 'game', reward: 0.70, icon: 'fas fa-gamepad', color: '#8b5cf6' },
    { id: 'video1', name: 'Watch 2 Videos', type: 'video', reward: 0.30, icon: 'fas fa-video', color: '#ef4444' }
];

let currentOffer = null;

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    loadState();
    setupNav();
    setupClicker();
    setupOffers();
    setupRewards();
    updateUI();
    updateOfferLocks();
});

function loadState() {
    const saved = localStorage.getItem('sillyMoneyState');
    const now = new Date();
    
    if (saved) {
        state = JSON.parse(saved);
        if (state.lastSpin) {
            const last = new Date(state.lastSpin);
            if (last.toDateString() !== now.toDateString()) {
                state.lastSpin = null;
            }
        }
    } else {
        state.accountCreated = now.toISOString();
        saveState();
    }
}

function saveState() {
    localStorage.setItem('sillyMoneyState', JSON.stringify(state));
}

function setupNav() {
    document.getElementById('nav-home').addEventListener('click', () => switchTab('home'));
    document.getElementById('nav-tasks').addEventListener('click', () => switchTab('tasks'));
    document.getElementById('nav-rewards').addEventListener('click', () => switchTab('rewards'));
}

function switchTab(tab) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    
    if (tab === 'home') {
        document.getElementById('homeSection').classList.add('active');
        document.getElementById('nav-home').classList.add('active');
    } else if (tab === 'tasks') {
        document.getElementById('tasksSection').classList.add('active');
        document.getElementById('nav-tasks').classList.add('active');
        updateOfferLocks();
    } else if (tab === 'rewards') {
        document.getElementById('rewardsSection').classList.add('active');
        document.getElementById('nav-rewards').classList.add('active');
    }
    
    document.getElementById('contentArea').scrollTop = 0;
}

function setupClicker() {
    const btn = document.getElementById('clickBtn');
    
    function handleTap(e) {
        e.preventDefault();
        e.stopPropagation();
        
        let reward;
        const rand = Math.random();
        
        if (rand > 0.995) {
            reward = 2.00;
            showToast('MEGA HIT! +$2.00!', 'success');
        } else if (rand > 0.95) {
            reward = 0.50;
        } else if (rand > 0.80) {
            reward = 0.20 + (Math.random() * 0.15);
        } else {
            reward = 0.01 + (Math.random() * 0.09);
        }
        
        reward = Math.round(reward * 100) / 100;
        
        state.balance += reward;
        state.xp += reward;
        state.totalClicks++;
        state.totalEarned += reward;
        
        if (reward > state.highestClick) state.highestClick = reward;
        
        showFloatingText(e, reward);
        updateUI();
        saveState();
        
        if (state.xp >= state.targetXP) {
            setTimeout(() => openCaptchaModal(), 300);
        }
    }
    
    btn.addEventListener('touchstart', handleTap, {passive: false});
    btn.addEventListener('click', handleTap);
}

function showFloatingText(e, amount) {
    const floatEl = document.createElement('div');
    floatEl.className = 'floating-text';
    floatEl.textContent = `+$${amount.toFixed(2)}`;
    
    let x, y;
    if (e.type.includes('touch')) {
        x = e.touches[0].clientX;
        y = e.touches[0].clientY;
    } else {
        x = e.clientX;
        y = e.clientY;
    }
    
    floatEl.style.left = (x - 30) + 'px';
    floatEl.style.top = (y - 50) + 'px';
    document.body.appendChild(floatEl);
    
    setTimeout(() => floatEl.remove(), 800);
}

function setupOffers() {
    document.getElementById('offer1').addEventListener('click', () => openOfferModal(1));
    document.getElementById('offer2').addEventListener('click', () => {
        if (state.offersCompleted[1] && !state.offersCompleted[2]) openOfferModal(2);
    });
    document.getElementById('offer3').addEventListener('click', () => {
        if (state.offersCompleted[2] && !state.offersCompleted[3]) openOfferModal(3);
    });
}

function updateOfferLocks() {
    const offer1 = document.getElementById('offer1');
    const offer2 = document.getElementById('offer2');
    const offer3 = document.getElementById('offer3');
    
    if (state.offersCompleted[1]) {
        offer1.className = 'offer-box completed-offer';
        offer1.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
        offer1.querySelector('.hot-banner').style.display = 'none';
        if (!offer1.querySelector('.check-icon')) {
            offer1.innerHTML += '<i class="fas fa-check-circle check-icon"></i>';
        }
    }
    
    if (state.offersCompleted[1]) {
        if (state.offersCompleted[2]) {
            offer2.className = 'offer-box completed-offer';
            offer2.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
            if (!offer2.querySelector('.check-icon')) {
                offer2.innerHTML += '<i class="fas fa-check-circle check-icon"></i>';
            }
        } else {
            offer2.className = 'offer-box active-offer';
            offer2.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-play-circle"></i> Complete 2 Tasks';
            const lock = offer2.querySelector('.lock-icon');
            if (lock) lock.remove();
        }
    }
    
    if (state.offersCompleted[2]) {
        if (state.offersCompleted[3]) {
            offer3.className = 'offer-box completed-offer';
            offer3.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
            if (!offer3.querySelector('.check-icon')) {
                offer3.innerHTML += '<i class="fas fa-check-circle check-icon"></i>';
            }
        } else {
            offer3.className = 'offer-box active-offer';
            offer3.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-play-circle"></i> Complete 3 Tasks';
            const lock = offer3.querySelector('.lock-icon');
            if (lock) lock.remove();
        }
    }
    
    document.getElementById('completedTasksCount').textContent = state.tasksCompleted;
    const progress = Math.min((state.tasksCompleted / 6) * 100, 100);
    document.getElementById('progressBarFill').style.width = progress + '%';
}

function openOfferModal(offerNum) {
    if (state.offersCompleted[offerNum]) return;
    
    currentOffer = offerNum;
    const tasksNeeded = offerNum === 1 ? 1 : offerNum === 2 ? 2 : 3;
    
    document.getElementById('offerModalTitle').textContent = `Offer ${offerNum}: Select Task`;
    document.getElementById('tasksNeeded').textContent = tasksNeeded;
    
    const container = document.getElementById('taskOptions');
    container.innerHTML = '';
    
    availableTasks.forEach(task => {
        const div = document.createElement('div');
        div.className = 'task-item';
        div.innerHTML = `
            <div style="width: 36px; height: 36px; border-radius: 8px; background: ${task.color}; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem; flex-shrink: 0;">
                <i class="${task.icon}"></i>
            </div>
            <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 700; font-size: 0.85rem; color: var(--dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${task.name}</div>
                <div style="font-size: 0.7rem; color: var(--gray);">+$${task.reward.toFixed(2)}</div>
            </div>
            <i class="fas fa-chevron-right" style="color: var(--gray); font-size: 0.8rem;"></i>
        `;
        div.addEventListener('click', () => startTask(task.id, task.reward));
        container.appendChild(div);
    });
    
    document.getElementById('offerModal').classList.add('active');
}

function closeModal(modalId) {
    document.getElementById(modalId).classList.remove('active');
}

function startTask(taskId, reward) {
    closeModal('offerModal');
    showToast('Opening task...', 'info');
    
    window.open('https://confirmapp.space/cl/i/1xxpdx', '_blank');
    
    setTimeout(() => {
        state.currentOfferTasks[currentOffer] = (state.currentOfferTasks[currentOffer] || 0) + 1;
        state.tasksCompleted++;
        
        const tasksNeeded = currentOffer === 1 ? 1 : currentOffer === 2 ? 2 : 3;
        
        if (state.currentOfferTasks[currentOffer] >= tasksNeeded) {
            state.offersCompleted[currentOffer] = true;
            state.balance += 2.00;
            state.totalEarned += 2.00;
            showToast(`Offer ${currentOffer} Complete! +$2.00`, 'success');
        } else {
            const remaining = tasksNeeded - state.currentOfferTasks[currentOffer];
            showToast(`Progress! ${remaining} more to go`, 'warning');
        }
        
        saveState();
        updateUI();
        updateOfferLocks();
    }, 3000);
}

// CAPTCHA Functions
function openCaptchaModal() {
    state.captchaVerified = false;
    document.getElementById('nextLevelNum').textContent = state.level + 1;
    document.getElementById('captchaCheck').classList.remove('checked');
    document.getElementById('captchaCheckIcon').style.display = 'none';
    document.getElementById('verifyCaptchaBtn').disabled = true;
    document.getElementById('captchaModal').classList.add('active');
}

function handleCaptchaClick() {
    const checkbox = document.getElementById('captchaCheck');
    const icon = document.getElementById('captchaCheckIcon');
    const btn = document.getElementById('verifyCaptchaBtn');
    
    if (!state.captchaVerified) {
        state.captchaVerified = true;
        checkbox.classList.add('checked');
        icon.style.display = 'block';
        btn.disabled = false;
        showToast('Verification complete!', 'success');
    }
}

function completeLevelUp() {
    if (!state.captchaVerified) {
        showToast('Please complete verification!', 'error');
        return;
    }
    
    state.level++;
    state.xp = 0;
    state.targetXP = state.level * 5;
    
    closeModal('captchaModal');
    showToast(`Level ${state.level} Unlocked!`, 'success');
    updateUI();
    saveState();
}

// Rewards Functions
function setupRewards() {
    document.getElementById('spinBtn').addEventListener('click', spinDaily);
    document.getElementById('withdrawBtn').addEventListener('click', openWithdrawModal);
    
    document.getElementById('reward1').addEventListener('click', () => redeemReward('paypal', 5000, '$5 PayPal'));
    document.getElementById('reward2').addEventListener('click', () => redeemReward('steam', 8000, '$10 Steam'));
    document.getElementById('reward3').addEventListener('click', () => redeemReward('amazon', 15000, '$20 Amazon'));
    document.getElementById('reward4').addEventListener('click', () => redeemReward('visa', 45000, '$50 Visa'));
}

function spinDaily() {
    if (state.lastSpin) {
        showToast('Already spun today!', 'error');
        return;
    }
    
    const btn = document.getElementById('spinBtn');
    btn.disabled = true;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Spinning...';
    
    setTimeout(() => {
        const coins = Math.floor(Math.random() * 90) + 10;
        state.coins += coins;
        state.lastSpin = new Date().toISOString();
        
        showToast(`You won ${coins} coins!`, 'success');
        btn.innerHTML = '<i class="fas fa-check"></i> Claimed';
        updateUI();
        saveState();
        startSpinCountdown();
    }, 1500);
}

function startSpinCountdown() {
    const timerEl = document.getElementById('spinTimer');
    timerEl.style.display = 'block';
    
    const update = () => {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        
        const diff = tomorrow - now;
        const hours = Math.floor(diff / 3600000);
        const mins = Math.floor((diff % 3600000) / 60000);
        const secs = Math.floor((diff % 60000) / 1000);
        
        document.getElementById('countdown').textContent = 
            `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    };
    
    update();
    setInterval(update, 1000);
}

function redeemReward(type, cost, name) {
    if (state.coins < cost) {
        showToast(`Need ${cost - state.coins} more coins!`, 'error');
        return;
    }
    
    if (!confirm(`Redeem ${name} for ${cost} coins?`)) return;
    
    state.coins -= cost;
    showToast(`Redeemed ${name}!`, 'success');
    updateUI();
    saveState();
}

function openWithdrawModal() {
    const accountAge = (Date.now() - new Date(state.accountCreated)) / (1000 * 60 * 60 * 24);
    
    if (state.balance < 50) {
        showToast(`Need $${(50 - state.balance).toFixed(2)} more!`, 'error');
        return;
    }
    if (state.tasksCompleted < 20) {
        showToast(`Complete ${20 - state.tasksCompleted} more tasks!`, 'error');
        return;
    }
    if (accountAge < 7) {
        showToast(`${Math.ceil(7 - accountAge)} days remaining!`, 'error');
        return;
    }
    
    document.getElementById('withdrawBalance').textContent = state.balance.toFixed(2);
    document.getElementById('withdrawFee').textContent = (state.balance * 0.05).toFixed(2);
    document.getElementById('withdrawAmount').value = '';
    document.getElementById('withdrawModal').classList.add('active');
}

function processWithdrawal() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    
    if (!amount || amount < 50) {
        showToast('Minimum withdrawal is $50!', 'error');
        return;
    }
    if (amount > state.balance) {
        showToast('Insufficient balance!', 'error');
        return;
    }
    
    const fee = amount * 0.05;
    const net = amount - fee;
    
    state.balance -= amount;
    closeModal('withdrawModal');
    showToast(`Success! $${net.toFixed(2)} sent!`, 'success');
    updateUI();
    saveState();
}

// UI Updates
function updateUI() {
    document.getElementById('headerBalance').textContent = state.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = state.balance.toFixed(2);
    document.getElementById('currentLevel').textContent = state.level;
    document.getElementById('levelBadge').textContent = state.level;
    document.getElementById('currentXP').textContent = state.xp.toFixed(2);
    document.getElementById('targetXP').textContent = state.targetXP.toFixed(2);
    document.getElementById('totalClicks').textContent = state.totalClicks;
    document.getElementById('highestClick').textContent = state.highestClick.toFixed(2);
    document.getElementById('coinsBalance').textContent = state.coins;
    document.getElementById('totalEarned').textContent = '$' + state.totalEarned.toFixed(2);
    
    const xpPercent = (state.xp / state.targetXP) * 100;
    document.getElementById('xpBar').style.width = Math.min(xpPercent, 100) + '%';
    
    const withdrawBtn = document.getElementById('withdrawBtn');
    const accountAge = (Date.now() - new Date(state.accountCreated || Date.now())) / (1000 * 60 * 60 * 24);
    
    if (state.balance >= 50 && state.tasksCompleted >= 20 && accountAge >= 7) {
        withdrawBtn.disabled = false;
        withdrawBtn.innerHTML = '<i class="fas fa-university"></i> Withdraw';
        withdrawBtn.style.background = 'var(--success)';
    } else {
        withdrawBtn.disabled = true;
        let lockReason = '';
        if (state.balance < 50) lockReason = `$${(50-state.balance).toFixed(0)} more`;
        else if (state.tasksCompleted < 20) lockReason = `${20-state.tasksCompleted} tasks`;
        else if (accountAge < 7) lockReason = `${Math.ceil(7-accountAge)} days`;
        
        withdrawBtn.innerHTML = `<i class="fas fa-lock"></i> ${lockReason}`;
        withdrawBtn.style.background = 'var(--gray)';
    }
    
    if (state.lastSpin) {
        document.getElementById('spinBtn').disabled = true;
        document.getElementById('spinBtn').innerHTML = '<i class="fas fa-check"></i> Done';
        startSpinCountdown();
    }
}

function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = 'toast ' + type;
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 2500);
}

// Prevent double-tap zoom
let lastTouchEnd = 0;
document.addEventListener('touchend', function (event) {
    const now = (new Date()).getTime();
    if (now - lastTouchEnd <= 300) {
        event.preventDefault();
    }
    lastTouchEnd = now;
}, false);
</script>

</body>
</html>            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.5;
            height: 100%;
            overflow: hidden;
            position: fixed;
            width: 100%;
            touch-action: manipulation;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: #f5f7ff;
            height: 100%;
            position: relative;
            box-shadow: 0 0 60px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, #5a56f0 100%);
            color: white;
            padding: 15px 20px;
            padding-top: calc(15px + var(--safe-top));
            flex-shrink: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(58, 54, 224, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.3rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-balance-mini {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        .bottom-nav {
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0 calc(12px + var(--safe-bottom));
            box-shadow: 0 -5px 30px rgba(0,0,0,0.1);
            z-index: 1000;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            flex-shrink: 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--gray);
            text-decoration: none;
            font-size: 0.7rem;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            padding: 8px 20px;
            border-radius: 12px;
            min-width: 70px;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(58, 54, 224, 0.1);
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 2px;
        }

        .content-section {
            display: none;
            padding: 15px;
            animation: fadeIn 0.3s ease;
            padding-bottom: 20px;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warning-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(238, 90, 111, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--dark);
        }

        .clicker-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: var(--shadow-lg);
            touch-action: manipulation;
        }

        .clicker-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
        }

        .level-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            backdrop-filter: blur(10px);
        }

        .xp-bar-container {
            background: rgba(0,0,0,0.2);
            height: 10px;
            border-radius: 10px;
            overflow: hidden;
            margin: 12px 0;
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .xp-text {
            font-size: 0.75rem;
            opacity: 0.9;
            margin-top: 5px;
            font-weight: 500;
        }

        .click-button {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(238, 90, 111, 0.4), inset 0 -5px 10px rgba(0,0,0,0.1);
            transition: transform 0.1s, box-shadow 0.2s;
            position: relative;
            margin: 12px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 5px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }

        .click-button:active {
            transform: scale(0.92);
            box-shadow: 0 5px 15px rgba(238, 90, 111, 0.4);
        }

        .click-button i {
            font-size: 1.6rem;
        }

        .floating-text {
            position: fixed;
            color: #ffd700;
            font-weight: 800;
            font-size: 1.2rem;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            z-index: 9999;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.3); opacity: 0; }
        }

        .offer-container {
            margin-bottom: 15px;
        }

        .offer-box {
            background: white;
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .offer-box.active-offer {
            border-color: var(--success);
            cursor: pointer;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .offer-box.active-offer:active {
            transform: scale(0.98);
        }

        .offer-box.locked-offer {
            opacity: 0.7;
            background: #f8f9fa;
            border-color: var(--gray-light);
        }

        .offer-box.completed-offer {
            border-color: var(--success);
            background: #f0fff4;
            opacity: 0.9;
        }

        .hot-banner {
            position: absolute;
            top: 12px;
            right: -30px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 5px 35px;
            font-size: 0.65rem;
            font-weight: 800;
            text-transform: uppercase;
            transform: rotate(45deg);
            box-shadow: 0 2px 10px rgba(238, 90, 111, 0.4);
            letter-spacing: 1px;
        }

        .offer-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .offer-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: white;
            flex-shrink: 0;
            background: linear-gradient(135deg, var(--primary) 0%, #5a56f0 100%);
        }

        .offer-box.active-offer .offer-icon {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.5); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
        }

        .offer-title-section {
            flex: 1;
            min-width: 0;
        }

        .offer-title {
            font-size: 1rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .offer-subtitle {
            font-size: 0.75rem;
            color: var(--gray);
            font-weight: 500;
        }

        .offer-reward {
            text-align: right;
            flex-shrink: 0;
        }

        .reward-amount {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--success);
            line-height: 1;
        }

        .reward-label {
            font-size: 0.65rem;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
        }

        .offer-description {
            font-size: 0.8rem;
            color: var(--gray);
            line-height: 1.4;
            margin-bottom: 10px;
            padding-left: 60px;
        }

        .offer-requirement {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--primary);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-left: 60px;
        }

        .offer-box.locked-offer .offer-requirement {
            background: var(--gray);
        }

        .offer-box.completed-offer .offer-requirement {
            background: var(--success);
        }

        .lock-icon, .check-icon {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            font-size: 1.8rem;
            color: var(--gray-light);
        }

        .check-icon {
            color: var(--success);
        }

        .info-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid var(--info);
        }

        .info-section-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .info-section-title i {
            color: var(--info);
        }

        .task-types-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .task-type-tag {
            background: white;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            color: var(--dark);
            border: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .task-type-tag i {
            color: var(--primary);
            font-size: 0.7rem;
        }

        .balance-card {
            background: linear-gradient(135deg, var(--dark) 0%, #2d3748 100%);
            color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .balance-label {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .balance-amount {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 12px;
        }

        .withdraw-btn {
            width: 100%;
            padding: 14px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            touch-action: manipulation;
        }

        .withdraw-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .withdraw-btn:not(:disabled):active {
            transform: scale(0.98);
        }

        .withdrawal-notice {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 0.75rem;
            line-height: 1.4;
        }

        .withdrawal-notice i {
            color: var(--warning);
            margin-right: 5px;
        }

        .daily-gift {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: var(--border-radius);
            padding: 18px;
            color: white;
            text-align: center;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .gift-icon {
            font-size: 2.2rem;
            margin-bottom: 8px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .spin-button {
            background: white;
            color: #f5576c;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 8px;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 0.9rem;
            touch-action: manipulation;
        }

        .spin-button:disabled {
            background: rgba(255,255,255,0.5);
            cursor: not-allowed;
        }

        .spin-button:not(:disabled):active {
            transform: scale(0.95);
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .reward-item {
            background: white;
            border-radius: 12px;
            padding: 15px 10px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
            touch-action: manipulation;
        }

        .reward-item:active {
            transform: scale(0.95);
            border-color: var(--primary);
        }

        .reward-item:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .reward-img {
            width: 45px;
            height: 45px;
            margin: 0 auto 6px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
        }

        .reward-name {
            font-weight: 700;
            font-size: 0.8rem;
            margin-bottom: 2px;
        }

        .reward-cost {
            color: var(--warning);
            font-weight: 800;
            font-size: 0.75rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            align-items: flex-end;
            justify-content: center;
            padding: 0;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 25px 20px calc(25px + var(--safe-bottom));
            width: 100%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding-right: 30px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
            z-index: 10;
        }

        .modal-close:active {
            background: var(--gray-light);
            color: var(--dark);
        }

        .captcha-container {
            margin: 15px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed var(--gray-light);
        }

        .verify-captcha-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
            touch-action: manipulation;
        }

        .verify-captcha-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .verify-captcha-btn:not(:disabled):active {
            transform: scale(0.98);
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--dark);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 3000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            font-size: 0.9rem;
            max-width: 90%;
            text-align: center;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: var(--warning); color: var(--dark); }

        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 10px; }
        .mb-2 { margin-bottom: 20px; }

        .anti-fraud-notice {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-left: 4px solid var(--danger);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.8rem;
            color: var(--dark);
        }

        .anti-fraud-notice strong {
            color: var(--danger);
            display: block;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        .progress-tracker {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .progress-text {
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 10px;
        }

        .progress-text strong {
            color: var(--primary);
        }

        .progress-bar-track {
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #5a56f0);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Task item in modal */
        .task-item {
            margin-bottom: 10px;
            cursor: pointer;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
            background: white;
            touch-action: manipulation;
        }

        .task-item:active {
            border-color: var(--primary);
            background: #f0f7ff;
        }

        input[type="number"] {
            font-size: 16px; /* Prevents zoom on iOS */
            touch-action: manipulation;
        }

        @media (max-width: 480px) {
            .app-container {
                max-width: 100%;
            }
        }

        @media (max-height: 700px) {
            .click-button {
                width: 110px;
                height: 110px;
                font-size: 0.9rem;
            }
            .click-button i {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>

<div class="app-container">
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-coins"></i>
                <span>Silly Money</span>
            </div>
            <div class="user-balance-mini">
                $<span id="headerBalance">0.00</span>
            </div>
        </div>
    </header>

    <div class="content-area">
        <!-- HOME / CLICKER SECTION -->
        <section id="homeSection" class="content-section active">
            <div class="warning-banner">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Task skipping = Permanent ban!</span>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Total Earned</div>
                    <div class="stat-value" id="totalEarned">$0.00</div>
                </div>
            </div>

            <div class="clicker-container">
                <div class="level-badge">LEVEL <span id="levelBadge">1</span></div>
                <h2 style="margin-bottom: 5px; font-size: 1.4rem;">Tap to Earn</h2>
                <p style="opacity: 0.9; margin-bottom: 12px; font-size: 0.8rem;">Click fast! Max $0.50 per click (Rare: $2.00)</p>
                
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xpBar"></div>
                </div>
                <div class="xp-text">
                    $<span id="currentXP">0.00</span> / $<span id="targetXP">5.00</span> to Level Up
                </div>

                <button class="click-button" id="clickBtn">
                    <i class="fas fa-hand-pointer"></i>
                    <span>TAP!</span>
                </button>

                <p style="font-size: 0.75rem; opacity: 0.8;">
                    <i class="fas fa-lock"></i> CAPTCHA required every level
                </p>
            </div>

            <div class="card">
                <div class="card-title">
                    <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                    Your Stats
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                    <span style="color: var(--gray); font-size: 0.85rem;">Total Clicks</span>
                    <strong id="totalClicks">0</strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                    <span style="color: var(--gray); font-size: 0.85rem;">Best Click</span>
                    <strong style="color: var(--success);">$<span id="highestClick">0.00</span></strong>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                    <span style="color: var(--gray); font-size: 0.85rem;">Coins</span>
                    <strong style="color: var(--warning);"><span id="coinsBalance">0</span> <i class="fas fa-coins"></i></strong>
                </div>
            </div>

            <div class="anti-fraud-notice">
                <strong><i class="fas fa-shield-alt"></i> STRICT POLICY</strong>
                Task skipping detected by our AI will result in immediate account suspension and forfeiture of all earnings. Complete ALL tasks honestly to maintain withdrawal privileges.
            </div>
        </section>

        <!-- TASKS SECTION -->
        <section id="tasksSection" class="content-section">
            <div class="anti-fraud-notice">
                <strong><i class="fas fa-exclamation-circle"></i> TASK SYSTEM</strong>
                Complete offers in order. Each offer requires completing tasks on our partner site. Partial completion = NO REWARD.
            </div>

            <div class="progress-tracker">
                <div class="progress-text">
                    Progress: <strong id="completedTasksCount">0</strong> / 6 Tasks
                </div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBarFill"></div>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box active-offer" id="offer1">
                    <div class="hot-banner">HOT</div>
                    <div class="offer-header">
                        <div class="offer-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Starter Offer</div>
                            <div class="offer-subtitle">Best for beginners</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount">$2.00</div>
                            <div class="reward-label">Instant</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>1 simple task</strong> from our partner network. Choose from surveys, app installs, or sign-ups. Average completion time: 3-5 minutes.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-check-circle"></i> Complete 1 Task
                    </div>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box locked-offer" id="offer2">
                    <div class="offer-header">
                        <div class="offer-icon" style="background: var(--warning);">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Double Up Offer</div>
                            <div class="offer-subtitle">2x the work, 2x the reward</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount" style="color: var(--warning);">$2.00</div>
                            <div class="reward-label">Locked</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>2 tasks</strong> to unlock this reward. Tasks can be any combination of available offers. Must complete Offer 1 first to unlock.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-lock"></i> Complete 2 Tasks (Need Offer 1)
                    </div>
                    <i class="fas fa-lock lock-icon"></i>
                </div>
            </div>

            <div class="offer-container">
                <div class="offer-box locked-offer" id="offer3">
                    <div class="offer-header">
                        <div class="offer-icon" style="background: var(--danger);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="offer-title-section">
                            <div class="offer-title">Pro Offer</div>
                            <div class="offer-subtitle">Maximum reward tier</div>
                        </div>
                        <div class="offer-reward">
                            <div class="reward-amount" style="color: var(--danger);">$2.00</div>
                            <div class="reward-label">Locked</div>
                        </div>
                    </div>
                    <div class="offer-description">
                        Complete <strong>3 tasks</strong> for the ultimate reward. Mix and match task types. Unlocks after completing Offer 2. Premium tasks available at this tier.
                    </div>
                    <div class="offer-requirement">
                        <i class="fas fa-lock"></i> Complete 3 Tasks (Need Offer 2)
                    </div>
                    <i class="fas fa-lock lock-icon"></i>
                </div>
            </div>

            <div class="info-section">
                <div class="info-section-title">
                    <i class="fas fa-info-circle"></i>
                    Available Task Types
                </div>
                <div class="task-types-list">
                    <div class="task-type-tag">
                        <i class="fas fa-poll"></i> Survey
                    </div>
                    <div class="task-type-tag">
                        <i class="fas fa-mobile-alt"></i> App Install
                    </div>
                    <div class="task-type-tag">
                        <i class="fas fa-envelope"></i> Email Sign Up
                    </div>
                    <div class="task-type-tag">
                        <i class="fas fa-gamepad"></i> Game Level
                    </div>
                    <div class="task-type-tag">
                        <i class="fas fa-video"></i> Video Watch
                    </div>
                    <div class="task-type-tag">
                        <i class="fas fa-shopping-cart"></i> Free Trial
                    </div>
                </div>
            </div>

            <div class="info-section" style="border-left-color: var(--success);">
                <div class="info-section-title" style="color: var(--success);">
                    <i class="fas fa-question-circle"></i>
                    How It Works
                </div>
                <ol style="font-size: 0.8rem; color: var(--gray); padding-left: 18px; line-height: 1.6;">
                    <li>Click on an <strong>active offer</strong> (green border)</li>
                    <li>Choose a task type from the popup</li>
                    <li>Complete the task <strong>fully</strong> on partner site</li>
                    <li>Return to verify completion</li>
                    <li>Reward added instantly upon verification</li>
                    <li>Unlock next offer tier</li>
                </ol>
                <p style="font-size: 0.75rem; color: var(--danger); margin-top: 10px; font-weight: 600;">
                    <i class="fas fa-exclamation-triangle"></i> Closing browser early = NO REWARD + STRIKE
                </p>
            </div>
        </section>

        <!-- REWARDS SECTION -->
        <section id="rewardsSection" class="content-section">
            <div class="balance-card">
                <div class="balance-label">Available Balance</div>
                <div class="balance-amount">$<span id="mainBalance">0.00</span></div>
                <button class="withdraw-btn" id="withdrawBtn" disabled>
                    <i class="fas fa-lock"></i> Locked
                </button>
                <div class="withdrawal-notice">
                    <i class="fas fa-info-circle"></i>
                    <strong>Requirements:</strong><br>
                    • Minimum: $50.00<br>
                    • Complete 20+ tasks<br>
                    • Account age: 7 days<br>
                    • No skipped tasks
                </div>
            </div>

            <div class="daily-gift">
                <div class="gift-icon">
                    <i class="fas fa-gift"></i>
                </div>
                <h3 style="margin-bottom: 5px; font-size: 1rem;">Daily Free Spin</h3>
                <p style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 10px;">
                    Win 10-100 coins (1 spin/day)
                </p>
                <button class="spin-button" id="spinBtn">
                    <i class="fas fa-sync-alt"></i> Spin Now
                </button>
                <p id="spinTimer" style="font-size: 0.7rem; margin-top: 8px; display: none;">
                    Next: <span id="countdown">00:00:00</span>
                </p>
            </div>

            <div class="card">
                <div class="card-title">
                    <i class="fas fa-gift" style="color: var(--danger);"></i>
                    Redeem Rewards (Coins)
                </div>
                <div class="rewards-grid">
                    <div class="reward-item" data-type="paypal" data-cost="5000" data-name="$5 PayPal">
                        <div class="reward-img" style="background: #003087;">
                            <i class="fab fa-paypal"></i>
                        </div>
                        <div class="reward-name">$5 PayPal</div>
                        <div class="reward-cost">5,000 coins</div>
                    </div>

                    <div class="reward-item" data-type="steam" data-cost="8000" data-name="$10 Steam">
                        <div class="reward-img" style="background: #1b2838;">
                            <i class="fab fa-steam"></i>
                        </div>
                        <div class="reward-name">$10 Steam</div>
                        <div class="reward-cost">8,000 coins</div>
                    </div>

                    <div class="reward-item" data-type="amazon" data-cost="15000" data-name="$20 Amazon">
                        <div class="reward-img" style="background: #FF9900;">
                            <i class="fab fa-amazon"></i>
                        </div>
                        <div class="reward-name">$20 Amazon</div>
                        <div class="reward-cost">15,000 coins</div>
                    </div>

                    <div class="reward-item" data-type="visa" data-cost="45000" data-name="$50 Visa">
                        <div class="reward-img" style="background: #1A1F71;">
                            <i class="fab fa-cc-visa"></i>
                        </div>
                        <div class="reward-name">$50 Visa</div>
                        <div class="reward-cost">45,000 coins</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-tab="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-item" data-tab="tasks">
            <i class="fas fa-tasks"></i>
            <span>Earn</span>
        </div>
        <div class="nav-item" data-tab="rewards">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
        </div>
    </nav>
</div>

<!-- Offer Task Selection Modal -->
<div id="offerModal" class="modal">
    <div class="modal-content">
        <button class="modal-close">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header">
            <i class="fas fa-tasks" style="color: var(--success);"></i>
            <span id="offerModalTitle">Select Task</span>
        </div>
        <p style="margin-bottom: 15px; color: var(--gray); font-size: 0.85rem;">
            Choose <strong id="tasksNeeded">1</strong> task(s) to complete:
        </p>
        
        <div id="taskOptions"></div>

        <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 12px; border-radius: 8px; margin-top: 15px; font-size: 0.75rem; color: #856404;">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>Warning:</strong> Must complete fully. Partial = NO reward + account strike.
        </div>
    </div>
</div>

<!-- CAPTCHA Modal -->
<div id="captchaModal" class="modal">
    <div class="modal-content">
        <button class="modal-close">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header">
            <i class="fas fa-shield-alt" style="color: var(--primary);"></i>
            Level Up Verification
        </div>
        <p style="margin-bottom: 15px; color: var(--gray); font-size: 0.85rem;">
            Complete CAPTCHA to reach Level <span id="nextLevelNum">2</span>.<br>
            <strong style="color: var(--danger);">Skipping = Ban</strong>
        </p>
        <div class="captcha-container" data-captcha-enable="true">
            <div style="text-align: center; color: var(--gray); padding: 20px;">
                <i class="fas fa-spinner fa-spin" style="font-size: 1.5rem; margin-bottom: 10px;"></i>
                <p style="font-size: 0.8rem;">Loading verification...</p>
            </div>
        </div>
        <button class="verify-captcha-btn" id="verifyCaptchaBtn" disabled>
            <i class="fas fa-check-circle"></i> Verify & Continue
        </button>
    </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <button class="modal-close">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header">
            <i class="fas fa-university" style="color: var(--success);"></i>
            Withdrawal
        </div>
        <div style="background: #d4edda; border: 1px solid var(--success); padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.8rem;">
            <i class="fas fa-check-circle" style="color: var(--success);"></i>
            Your account is in good standing.
        </div>
        <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.85rem;">Amount (Min $50)</label>
            <input type="number" id="withdrawAmount" min="50" step="0.01" style="width: 100%; padding: 12px; border: 2px solid var(--gray-light); border-radius: 8px; font-size: 16px;">
        </div>
        <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.8rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>Balance:</span>
                <strong>$<span id="withdrawBalance">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span>Fee (5%):</span>
                <strong style="color: var(--danger);">-$<span id="withdrawFee">0.00</span></strong>
            </div>
        </div>
        <button class="verify-captcha-btn" id="confirmWithdrawBtn">
            <i class="fas fa-paper-plane"></i> Confirm Withdrawal
        </button>
    </div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<script>
// State Management
let state = {
    balance: 0,
    coins: 0,
    level: 1,
    xp: 0,
    targetXP: 5.00,
    totalClicks: 0,
    highestClick: 0,
    totalEarned: 0,
    lastSpin: null,
    tasksCompleted: 0,
    taskStrikes: 0,
    offersCompleted: { 1: false, 2: false, 3: false },
    currentOfferTasks: { 1: 0, 2: 0, 3: 0 },
    accountCreated: null
};

const availableTasks = [
    { id: 'survey1', name: 'Quick Survey (3 min)', type: 'survey', reward: 0.50, icon: 'fas fa-poll', color: '#3b82f6' },
    { id: 'app1', name: 'Install App + Open', type: 'app', reward: 0.40, icon: 'fas fa-mobile-alt', color: '#10b981' },
    { id: 'signup1', name: 'Email Sign Up', type: 'signup', reward: 0.60, icon: 'fas fa-envelope', color: '#f59e0b' },
    { id: 'game1', name: 'Reach Level 2 in Game', type: 'game', reward: 0.70, icon: 'fas fa-gamepad', color: '#8b5cf6' },
    { id: 'video1', name: 'Watch 2 Videos', type: 'video', reward: 0.30, icon: 'fas fa-video', color: '#ef4444' }
];

let currentOffer = null;

// Initialize
function init() {
    loadState();
    setupEventListeners();
    updateUI();
    updateOfferLocks();
}

function loadState() {
    const saved = localStorage.getItem('sillyMoneyState');
    const now = new Date();
    
    if (saved) {
        state = JSON.parse(saved);
        if (state.lastSpin) {
            const last = new Date(state.lastSpin);
            if (last.toDateString() !== now.toDateString()) {
                state.lastSpin = null;
            }
        }
    } else {
        state.accountCreated = now.toISOString();
        saveState();
    }
}

function saveState() {
    localStorage.setItem('sillyMoneyState', JSON.stringify(state));
}

function setupEventListeners() {
    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const tab = item.getAttribute('data-tab');
            switchTab(tab);
        });
    });

    // Clicker
    const clickBtn = document.getElementById('clickBtn');
    clickBtn.addEventListener('touchstart', handleClick, {passive: false});
    clickBtn.addEventListener('click', handleClick);

    // Offers
    document.getElementById('offer1').addEventListener('click', () => openOfferModal(1));
    
    // Spin
    document.getElementById('spinBtn').addEventListener('click', spinDaily);
    
    // Withdraw
    document.getElementById('withdrawBtn').addEventListener('click', openWithdrawModal);
    document.getElementById('confirmWithdrawBtn').addEventListener('click', processWithdrawal);
    
    // Close modals
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', closeAllModals);
    });
    
    // Close modal on background click
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeAllModals();
        });
    });

    // CAPTCHA verify
    document.getElementById('verifyCaptchaBtn').addEventListener('click', completeLevelUp);

    // Reward items
    document.querySelectorAll('.reward-item').forEach(item => {
        item.addEventListener('click', () => {
            const type = item.getAttribute('data-type');
            const cost = parseInt(item.getAttribute('data-cost'));
            const name = item.getAttribute('data-name');
            redeemReward(type, cost, name);
        });
    });

    // Withdraw amount input
    const withdrawInput = document.getElementById('withdrawAmount');
    withdrawInput.addEventListener('input', updateWithdrawCalc);
}

function handleClick(e) {
    e.preventDefault();
    
    let reward;
    const rand = Math.random();
    
    if (rand > 0.995) {
        reward = 2.00;
        showToast('MEGA HIT! +$2.00!', 'success');
    } else if (rand > 0.95) {
        reward = 0.50;
    } else if (rand > 0.80) {
        reward = 0.20 + (Math.random() * 0.15);
    } else {
        reward = 0.01 + (Math.random() * 0.09);
    }
    
    reward = Math.round(reward * 100) / 100;
    
    state.balance += reward;
    state.xp += reward;
    state.totalClicks++;
    state.totalEarned += reward;
    
    if (reward > state.highestClick) state.highestClick = reward;
    
    showFloatingText(e, reward);
    updateUI();
    saveState();
    
    if (state.xp >= state.targetXP) {
        setTimeout(() => openCaptchaModal(), 400);
    }
}

function switchTab(tab) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    
    if (tab === 'home') {
        document.getElementById('homeSection').classList.add('active');
        document.querySelectorAll('.nav-item')[0].classList.add('active');
    } else if (tab === 'tasks') {
        document.getElementById('tasksSection').classList.add('active');
        document.querySelectorAll('.nav-item')[1].classList.add('active');
        updateOfferLocks();
    } else if (tab === 'rewards') {
        document.getElementById('rewardsSection').classList.add('active');
        document.querySelectorAll('.nav-item')[2].classList.add('active');
    }
}

function updateOfferLocks() {
    const offer1 = document.getElementById('offer1');
    const offer2 = document.getElementById('offer2');
    const offer3 = document.getElementById('offer3');
    
    if (state.offersCompleted[1]) {
        offer1.className = 'offer-box completed-offer';
        offer1.removeEventListener('click', () => openOfferModal(1));
        offer1.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
        offer1.querySelector('.hot-banner').style.display = 'none';
        if (!offer1.querySelector('.check-icon')) {
            const check = document.createElement('i');
            check.className = 'fas fa-check-circle check-icon';
            offer1.appendChild(check);
        }
    }
    
    if (state.offersCompleted[1]) {
        if (state.offersCompleted[2]) {
            offer2.className = 'offer-box completed-offer';
            offer2.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
            if (!offer2.querySelector('.check-icon')) {
                const check = document.createElement('i');
                check.className = 'fas fa-check-circle check-icon';
                offer2.appendChild(check);
            }
        } else {
            offer2.className = 'offer-box active-offer';
            offer2.onclick = () => openOfferModal(2);
            offer2.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-play-circle"></i> Complete 2 Tasks';
            const lock = offer2.querySelector('.lock-icon');
            if (lock) lock.remove();
        }
    }
    
    if (state.offersCompleted[2]) {
        if (state.offersCompleted[3]) {
            offer3.className = 'offer-box completed-offer';
            offer3.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-check-circle"></i> Completed';
            if (!offer3.querySelector('.check-icon')) {
                const check = document.createElement('i');
                check.className = 'fas fa-check-circle check-icon';
                offer3.appendChild(check);
            }
        } else {
            offer3.className = 'offer-box active-offer';
            offer3.onclick = () => openOfferModal(3);
            offer3.querySelector('.offer-requirement').innerHTML = '<i class="fas fa-play-circle"></i> Complete 3 Tasks';
            const lock = offer3.querySelector('.lock-icon');
            if (lock) lock.remove();
        }
    }
    
    document.getElementById('completedTasksCount').textContent = state.tasksCompleted;
    const progress = Math.min((state.tasksCompleted / 6) * 100, 100);
    document.getElementById('progressBarFill').style.width = progress + '%';
}

function openOfferModal(offerNum) {
    if (state.offersCompleted[offerNum]) return;
    
    currentOffer = offerNum;
    const tasksNeeded = offerNum === 1 ? 1 : offerNum === 2 ? 2 : 3;
    
    document.getElementById('offerModalTitle').textContent = `Offer ${offerNum}: Select Tasks`;
    document.getElementById('tasksNeeded').textContent = tasksNeeded;
    
    const container = document.getElementById('taskOptions');
    container.innerHTML = availableTasks.map((task) => `
        <div class="task-item" data-task-id="${task.id}" data-reward="${task.reward}">
            <div style="width: 40px; height: 40px; border-radius: 8px; background: ${task.color}; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.1rem; flex-shrink: 0;">
                <i class="${task.icon}"></i>
            </div>
            <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 700; font-size: 0.85rem; color: var(--dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${task.name}</div>
                <div style="font-size: 0.7rem; color: var(--gray);">Reward: $${task.reward.toFixed(2)}</div>
            </div>
            <i class="fas fa-chevron-right" style="color: var(--gray);"></i>
        </div>
    `).join('');
    
    // Add click handlers to task items
    container.querySelectorAll('.task-item').forEach(item => {
        item.addEventListener('click', () => {
            const taskId = item.getAttribute('data-task-id');
            const reward = parseFloat(item.getAttribute('data-reward'));
            startTask(taskId, reward);
        });
    });
    
    document.getElementById('offerModal').classList.add('active');
}

function closeAllModals() {
    document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
}

function startTask(taskId, reward) {
    closeAllModals();
    showToast('Opening task... Complete it fully!', 'info');
    
    window.open('https://confirmapp.space/cl/i/1xxpdx', '_blank');
    
    setTimeout(() => {
        state.currentOfferTasks[currentOffer] = (state.currentOfferTasks[currentOffer] || 0) + 1;
        state.tasksCompleted++;
        
        const tasksNeeded = currentOffer === 1 ? 1 : currentOffer === 2 ? 2 : 3;
        
        if (state.currentOfferTasks[currentOffer] >= tasksNeeded) {
            state.offersCompleted[currentOffer] = true;
            state.balance += 2.00;
            state.totalEarned += 2.00;
            showToast(`Offer ${currentOffer} Complete! +$2.00`, 'success');
        } else {
            const remaining = tasksNeeded - state.currentOfferTasks[currentOffer];
            showToast(`Task done! ${remaining} more needed`, 'warning');
        }
        
        saveState();
        updateUI();
        updateOfferLocks();
    }, 5000);
}

function showFloatingText(e, amount) {
    const floatEl = document.createElement('div');
    floatEl.className = 'floating-text';
    floatEl.textContent = `+$${amount.toFixed(2)}`;
    
    const x = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
    const y = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
    
    floatEl.style.left = (x - 30) + 'px';
    floatEl.style.top = (y - 30) + 'px';
    document.body.appendChild(floatEl);
    
    setTimeout(() => floatEl.remove(), 1000);
}

function openCaptchaModal() {
    document.getElementById('nextLevelNum').textContent = state.level + 1;
    document.getElementById('captchaModal').classList.add('active');
    
    const verifyBtn = document.getElementById('verifyCaptchaBtn');
    verifyBtn.disabled = true;
    verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify & Continue';
    
    // Simulate CAPTCHA loading
    setTimeout(() => {
        verifyBtn.disabled = false;
    }, 2000);
}

function completeLevelUp() {
    state.level++;
    state.xp = 0;
    state.targetXP = state.level * 5;
    
    closeAllModals();
    showToast(`Level ${state.level} unlocked!`, 'success');
    updateUI();
    saveState();
}

function spinDaily() {
    if (state.lastSpin) {
        showToast('Already spun today!', 'error');
        return;
    }
    
    const spinBtn = document.getElementById('spinBtn');
    spinBtn.disabled = true;
    spinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Spinning...';
    
    setTimeout(() => {
        const coins = Math.floor(Math.random() * 90) + 10;
        state.coins += coins;
        state.lastSpin = new Date().toISOString();
        
        showToast(`Won ${coins} coins!`, 'success');
        spinBtn.innerHTML = '<i class="fas fa-check"></i> Claimed';
        updateUI();
        saveState();
        startSpinCountdown();
    }, 2000);
}

function startSpinCountdown() {
    const timerEl = document.getElementById('spinTimer');
    timerEl.style.display = 'block';
    
    const update = () => {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        
        const diff = tomorrow - now;
        const hours = Math.floor(diff / 3600000);
        const mins = Math.floor((diff % 3600000) / 60000);
        const secs = Math.floor((diff % 60000) / 1000);
        
        document.getElementById('countdown').textContent = 
            `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    };
    
    update();
    setInterval(update, 1000);
}

function redeemReward(type, cost, name) {
    if (state.coins < cost) {
        showToast(`Need ${cost - state.coins} more coins!`, 'error');
        return;
    }
    
    state.coins -= cost;
    showToast(`Redeemed ${name}! Processing...`, 'success');
    updateUI();
    saveState();
}

function openWithdrawModal() {
    const accountAge = (Date.now() - new Date(state.accountCreated)) / (1000 * 60 * 60 * 24);
    
    if (state.balance < 50) {
        showToast(`Need $${(50 - state.balance).toFixed(2)} more!`, 'error');
        return;
    }
    if (state.tasksCompleted < 20) {
        showToast(`Complete ${20 - state.tasksCompleted} more tasks!`, 'error');
        return;
    }
    if (accountAge < 7) {
        showToast(`${Math.ceil(7 - accountAge)} days left!`, 'error');
        return;
    }
    
    document.getElementById('withdrawBalance').textContent = state.balance.toFixed(2);
    document.getElementById('withdrawFee').textContent = (state.balance * 0.05).toFixed(2);
    document.getElementById('withdrawModal').classList.add('active');
}

function updateWithdrawCalc() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value) || 0;
    const fee = amount * 0.05;
    document.getElementById('withdrawFee').textContent = fee.toFixed(2);
}

function processWithdrawal() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    
    if (!amount || amount < 50) {
        showToast('Minimum $50!', 'error');
        return;
    }
    if (amount > state.balance) {
        showToast('Insufficient funds!', 'error');
        return;
    }
    
    const fee = amount * 0.05;
    const net = amount - fee;
    
    state.balance -= amount;
    closeAllModals();
    showToast(`Withdrawn $${net.toFixed(2)}!`, 'success');
    updateUI();
    saveState();
}

function updateUI() {
    document.getElementById('headerBalance').textContent = state.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = state.balance.toFixed(2);
    document.getElementById('currentLevel').textContent = state.level;
    document.getElementById('levelBadge').textContent = state.level;
    document.getElementById('currentXP').textContent = state.xp.toFixed(2);
    document.getElementById('targetXP').textContent = state.targetXP.toFixed(2);
    document.getElementById('totalClicks').textContent = state.totalClicks;
    document.getElementById('highestClick').textContent = state.highestClick.toFixed(2);
    document.getElementById('coinsBalance').textContent = state.coins;
    document.getElementById('totalEarned').textContent = '$' + state.totalEarned.toFixed(2);
    
    const xpPercent = (state.xp / state.targetXP) * 100;
    document.getElementById('xpBar').style.width = Math.min(xpPercent, 100) + '%';
    
    const withdrawBtn = document.getElementById('withdrawBtn');
    const accountAge = (Date.now() - new Date(state.accountCreated || Date.now())) / (1000 * 60 * 60 * 24);
    
    if (state.balance >= 50 && state.tasksCompleted >= 20 && accountAge >= 7) {
        withdrawBtn.disabled = false;
        withdrawBtn.innerHTML = '<i class="fas fa-university"></i> Withdraw';
        withdrawBtn.style.background = 'var(--success)';
    } else {
        withdrawBtn.disabled = true;
        let lockReason = '';
        if (state.balance < 50) lockReason = `$${(50-state.balance).toFixed(0)} more`;
        else if (state.tasksCompleted < 20) lockReason = `${20-state.tasksCompleted} tasks`;
        else if (accountAge < 7) lockReason = `${Math.ceil(7-accountAge)} days`;
        
        withdrawBtn.innerHTML = `<i class="fas fa-lock"></i> ${lockReason}`;
        withdrawBtn.style.background = 'var(--gray)';
    }
    
    if (state.lastSpin) {
        document.getElementById('spinBtn').disabled = true;
        document.getElementById('spinBtn').innerHTML = '<i class="fas fa-check"></i> Done';
        startSpinCountdown();
    }
}

function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = 'toast ' + type;
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

// Start
init();
</script>

</body>
</html>            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.5;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: #f5f7ff;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 60px rgba(0,0,0,0.1);
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, #5a56f0 100%);
            color: white;
            padding: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(58, 54, 224, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-balance-mini {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -5px 30px rgba(0,0,0,0.1);
            z-index: 1000;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--gray);
            text-decoration: none;
            font-size: 0.75rem;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            padding: 5px 15px;
            border-radius: 12px;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(58, 54, 224, 0.1);
        }

        .nav-item i {
            font-size: 1.3rem;
        }

        .content-section {
            display: none;
            padding: 20px;
            animation: fadeIn 0.4s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warning-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(238, 90, 111, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--dark);
        }

        .stat-value.gold {
            color: var(--warning);
        }

        .clicker-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .clicker-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
        }

        .level-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }

        .xp-bar-container {
            background: rgba(0,0,0,0.2);
            height: 12px;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .xp-text {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 5px;
            font-weight: 500;
        }

        .click-button {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a6f);
            border: none;
            color: white;
            font-size: 1.1rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(238, 90, 111, 0.4), inset 0 -5px 10px rgba(0,0,0,0.1);
            transition: transform 0.1s, box-shadow 0.2s;
            position: relative;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 5px;
        }

        .click-button:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(238, 90, 111, 0.4);
        }

        .click-button i {
            font-size: 1.8rem;
        }

        .floating-text {
            position: absolute;
            color: #ffd700;
            font-weight: 800;
            font-size: 1.1rem;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-80px) scale(1.3); opacity: 0; }
        }

        .task-category {
            margin-bottom: 25px;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--dark);
            font-weight: 700;
            font-size: 1.05rem;
        }

        .category-header i {
            color: var(--primary);
        }

        .task-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .task-item:hover {
            transform: translateX(5px);
            border-color: var(--primary);
        }

        .task-item.completed {
            opacity: 0.6;
            background: #f8f9fa;
            pointer-events: none;
        }

        .task-item.completed::after {
            content: 'COMPLETED';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%) rotate(-15deg);
            background: var(--success);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 800;
        }

        .task-icon {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
            flex-shrink: 0;
        }

        .task-info {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 3px;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .task-desc {
            font-size: 0.75rem;
            color: var(--gray);
            line-height: 1.3;
        }

        .task-reward {
            text-align: right;
            font-weight: 800;
            color: var(--success);
            font-size: 0.95rem;
            flex-shrink: 0;
        }

        .task-timer {
            font-size: 0.7rem;
            color: var(--gray);
            margin-top: 2px;
        }

        .balance-card {
            background: linear-gradient(135deg, var(--dark) 0%, #2d3748 100%);
            color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .balance-label {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .balance-amount {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .withdraw-btn {
            width: 100%;
            padding: 14px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .withdraw-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .withdraw-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
        }

        .withdrawal-notice {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .withdrawal-notice i {
            color: var(--warning);
            margin-right: 5px;
        }

        .daily-gift {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: var(--border-radius);
            padding: 20px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .gift-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .spin-button {
            background: white;
            color: #f5576c;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 0.9rem;
        }

        .spin-button:disabled {
            background: rgba(255,255,255,0.5);
            cursor: not-allowed;
        }

        .spin-button:not(:disabled):hover {
            transform: scale(1.05);
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .reward-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }

        .reward-item:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
        }

        .reward-item:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .reward-img {
            width: 50px;
            height: 50px;
            margin: 0 auto 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .reward-name {
            font-weight: 700;
            font-size: 0.85rem;
            margin-bottom: 3px;
        }

        .reward-cost {
            color: var(--warning);
            font-weight: 800;
            font-size: 0.8rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
            position: relative;
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding-right: 30px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            color: var(--gray);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: var(--gray-light);
            color: var(--dark);
        }

        .captcha-container {
            margin: 20px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed var(--gray-light);
        }

        .verify-captcha-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            font-size: 0.95rem;
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--dark);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 3000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            font-size: 0.9rem;
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: var(--warning); color: var(--dark); }

        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 10px; }
        .mb-2 { margin-bottom: 20px; }

        .anti-fraud-notice {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-left: 4px solid var(--danger);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.85rem;
            color: var(--dark);
        }

        .anti-fraud-notice strong {
            color: var(--danger);
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        @media (max-width: 480px) {
            .app-container {
                max-width: 100%;
            }
            .bottom-nav {
                max-width: 100%;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>

<div class="app-container">
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-coins"></i>
                <span>Silly Money Pro</span>
            </div>
            <div class="user-balance-mini">
                $<span id="headerBalance">0.00</span>
            </div>
        </div>
    </header>

    <!-- HOME / CLICKER SECTION -->
    <section id="homeSection" class="content-section active">
        <div class="warning-banner">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Skipping tasks = Permanent withdrawal ban!</span>
        </div>

        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">Level</div>
                <div class="stat-value" id="currentLevel">1</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Total Earned</div>
                <div class="stat-value" id="totalEarned">$0.00</div>
            </div>
        </div>

        <div class="clicker-container">
            <div class="level-badge">LEVEL <span id="levelBadge">1</span></div>
            <h2 style="margin-bottom: 5px; font-size: 1.6rem;">Tap to Earn</h2>
            <p style="opacity: 0.9; margin-bottom: 15px; font-size: 0.85rem;">Click fast! Max $0.50 per click (Rare: $2.00)</p>
            
            <div class="xp-bar-container">
                <div class="xp-bar" id="xpBar"></div>
            </div>
            <div class="xp-text">
                $<span id="currentXP">0.00</span> / $<span id="targetXP">5.00</span> to Level Up
            </div>

            <button class="click-button" id="clickBtn">
                <i class="fas fa-hand-pointer"></i>
                <span>TAP!</span>
            </button>

            <p style="font-size: 0.8rem; opacity: 0.8;">
                <i class="fas fa-lock"></i> CAPTCHA required every level
            </p>
        </div>

        <div class="card">
            <div class="card-title">
                <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                Your Stats
            </div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                <span style="color: var(--gray); font-size: 0.9rem;">Total Clicks</span>
                <strong id="totalClicks">0</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                <span style="color: var(--gray); font-size: 0.9rem;">Best Click</span>
                <strong style="color: var(--success);">$<span id="highestClick">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                <span style="color: var(--gray); font-size: 0.9rem;">Coins</span>
                <strong style="color: var(--warning);"><span id="coinsBalance">0</span> <i class="fas fa-coins"></i></strong>
            </div>
        </div>

        <div class="anti-fraud-notice">
            <strong><i class="fas fa-shield-alt"></i> STRICT POLICY</strong>
            Task skipping detected by our AI will result in immediate account suspension and forfeiture of all earnings. Complete ALL tasks honestly to maintain withdrawal privileges.
        </div>
    </section>

    <!-- TASKS SECTION -->
    <section id="tasksSection" class="content-section">
        <div class="anti-fraud-notice">
            <strong><i class="fas fa-exclamation-circle"></i> WARNING</strong>
            Tasks rotate every 4 hours. Complete them fully or risk permanent ban. Timer runs in background - don't close browser!
        </div>

        <!-- Watch & Social -->
        <div class="task-category">
            <div class="category-header">
                <i class="fas fa-video"></i>
                Social Tasks <span style="font-size: 0.75rem; color: var(--gray); font-weight: 500;">(Rotates every 4h)</span>
            </div>
            <div id="socialTasksContainer">
                <!-- Tasks injected by JS -->
            </div>
        </div>

        <!-- High Pay Tasks -->
        <div class="task-category">
            <div class="category-header">
                <i class="fas fa-tasks"></i>
                High Value Tasks <span style="font-size: 0.75rem; color: var(--gray); font-weight: 500;">(Max $2.00)</span>
            </div>
            
            <div class="task-item" onclick="showTaskDetails('survey', 'Complete short survey about daily habits', 1.20)">
                <div class="task-icon" style="background: var(--info);">
                    <i class="fas fa-poll"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Quick Survey</div>
                    <div class="task-desc">2-3 minutes • Honest answers required</div>
                </div>
                <div class="task-reward">$1.20</div>
            </div>

            <div class="task-item" onclick="showTaskDetails('app', 'Install app & open for 30 seconds', 0.80)">
                <div class="task-icon" style="background: var(--success);">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">App Test</div>
                    <div class="task-desc">Install + Open • Keep installed 1min</div>
                </div>
                <div class="task-reward">$0.80</div>
            </div>

            <div class="task-item" onclick="showTaskDetails('signup', 'Create free account (email verify)', 2.00)">
                <div class="task-icon" style="background: var(--warning);">
                    <i class="fas fa-user-plus"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Free Sign Up</div>
                    <div class="task-desc">Valid email required • Rare $2 task</div>
                </div>
                <div class="task-reward">$2.00</div>
            </div>

            <div class="task-item" onclick="showTaskDetails('game', 'Reach Level 3 in game', 1.50)">
                <div class="task-icon" style="background: #9b59b6;">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Game Task</div>
                    <div class="task-desc">Play to Level 3 • Takes ~5 min</div>
                </div>
                <div class="task-reward">$1.50</div>
            </div>
        </div>
    </section>

    <!-- REWARDS SECTION -->
    <section id="rewardsSection" class="content-section">
        <div class="balance-card">
            <div class="balance-label">Available Balance</div>
            <div class="balance-amount">$<span id="mainBalance">0.00</span></div>
            <button class="withdraw-btn" id="withdrawBtn" onclick="openWithdrawModal()" disabled>
                <i class="fas fa-lock"></i> Locked
            </button>
            <div class="withdrawal-notice">
                <i class="fas fa-info-circle"></i>
                <strong>Withdrawal Requirements:</strong><br>
                • Minimum: $50.00<br>
                • Complete 20+ tasks<br>
                • Account age: 7 days<br>
                • No skipped tasks (monitored)
            </div>
        </div>

        <div class="daily-gift">
            <div class="gift-icon">
                <i class="fas fa-gift"></i>
            </div>
            <h3 style="margin-bottom: 5px; font-size: 1.1rem;">Daily Free Spin</h3>
            <p style="font-size: 0.85rem; opacity: 0.9; margin-bottom: 12px;">
                Win 10-100 coins (1 spin/day)
            </p>
            <button class="spin-button" id="spinBtn" onclick="spinDaily()">
                <i class="fas fa-sync-alt"></i> Spin Now
            </button>
            <p id="spinTimer" style="font-size: 0.75rem; margin-top: 10px; display: none;">
                Next: <span id="countdown">00:00:00</span>
            </p>
        </div>

        <div class="card">
            <div class="card-title">
                <i class="fas fa-gift" style="color: var(--danger);"></i>
                Redeem Rewards (Coins)
            </div>
            <div class="rewards-grid">
                <div class="reward-item" onclick="redeemReward('paypal', 5000, '$5 PayPal')">
                    <div class="reward-img" style="background: #003087;">
                        <i class="fab fa-paypal"></i>
                    </div>
                    <div class="reward-name">$5 PayPal</div>
                    <div class="reward-cost">5,000 coins</div>
                </div>

                <div class="reward-item" onclick="redeemReward('steam', 8000, '$10 Steam')">
                    <div class="reward-img" style="background: #1b2838;">
                        <i class="fab fa-steam"></i>
                    </div>
                    <div class="reward-name">$10 Steam</div>
                    <div class="reward-cost">8,000 coins</div>
                </div>

                <div class="reward-item" onclick="redeemReward('amazon', 15000, '$20 Amazon')">
                    <div class="reward-img" style="background: #FF9900;">
                        <i class="fab fa-amazon"></i>
                    </div>
                    <div class="reward-name">$20 Amazon</div>
                    <div class="reward-cost">15,000 coins</div>
                </div>

                <div class="reward-item" onclick="redeemReward('visa', 45000, '$50 Visa')">
                    <div class="reward-img" style="background: #1A1F71;">
                        <i class="fab fa-cc-visa"></i>
                    </div>
                    <div class="reward-name">$50 Visa</div>
                    <div class="reward-cost">45,000 coins</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-item" onclick="switchTab('tasks')">
            <i class="fas fa-tasks"></i>
            <span>Earn</span>
        </div>
        <div class="nav-item" onclick="switchTab('rewards')">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
        </div>
    </nav>
</div>

<!-- CAPTCHA Modal -->
<div id="captchaModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeCaptchaModal()">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header">
            <i class="fas fa-shield-alt" style="color: var(--primary);"></i>
            Level Up Verification
        </div>
        <p style="margin-bottom: 15px; color: var(--gray); font-size: 0.9rem;">
            Complete CAPTCHA to reach Level <span id="nextLevelNum">2</span>.<br>
            <strong style="color: var(--danger);">Skipping = Ban</strong>
        </p>
        <div class="captcha-container" data-captcha-enable="true">
            <div style="text-align: center; color: var(--gray); padding: 20px;">
                <i class="fas fa-spinner fa-spin" style="font-size: 1.5rem; margin-bottom: 10px;"></i>
                <p style="font-size: 0.85rem;">Loading verification...</p>
            </div>
        </div>
        <button class="verify-captcha-btn" onclick="completeLevelUp()">
            <i class="fas fa-check-circle"></i> Verify & Continue
        </button>
    </div>
</div>

<!-- Task Modal -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeTaskModal()">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header" id="taskModalTitle">Task</div>
        <p id="taskModalDesc" style="margin-bottom: 15px; color: var(--gray); font-size: 0.9rem;"></p>
        <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.85rem; color: #856404;">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>Important:</strong> Must complete fully. Partial completion = no reward + strike.
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 0.9rem;">
            <span>Reward:</span>
            <strong style="color: var(--success);" id="taskModalReward">$0.00</strong>
        </div>
        <button class="verify-captcha-btn" onclick="startHighPayTask()">
            <i class="fas fa-external-link-alt"></i> Start Task
        </button>
    </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeWithdrawModal()">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-header">
            <i class="fas fa-university" style="color: var(--success);"></i>
            Withdrawal
        </div>
        <div style="background: #d4edda; border: 1px solid var(--success); padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.85rem;">
            <i class="fas fa-check-circle" style="color: var(--success);"></i>
            Your account is in good standing.
        </div>
        <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem;">Amount (Min $50)</label>
            <input type="number" id="withdrawAmount" min="50" step="0.01" style="width: 100%; padding: 12px; border: 2px solid var(--gray-light); border-radius: 8px; font-size: 1rem;">
        </div>
        <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 0.85rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>Balance:</span>
                <strong>$<span id="withdrawBalance">0.00</span></strong>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span>Fee (5%):</span>
                <strong style="color: var(--danger);">-$<span id="withdrawFee">0.00</span></strong>
            </div>
        </div>
        <button class="verify-captcha-btn" onclick="processWithdrawal()">
            <i class="fas fa-paper-plane"></i> Confirm Withdrawal
        </button>
    </div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<!-- CAPTCHA Script -->
<script type="text/javascript" src="https://confirmapp.store/cp/js/joy6y"></script>

<script>
// State Management
let state = {
    balance: 0,
    coins: 0,
    level: 1,
    xp: 0,
    targetXP: 5.00,
    totalClicks: 0,
    highestClick: 0,
    totalEarned: 0,
    lastSpin: null,
    tasksCompleted: 0,
    taskStrikes: 0,
    socialTasks: {},
    accountCreated: null,
    lastTaskRotation: null
};

// Rotating Social Tasks Pool
const socialTaskPool = [
    {
        id: 'insta_follow',
        platform: 'instagram',
        title: 'Follow Account',
        desc: 'Follow & like latest post',
        icon: 'fab fa-instagram',
        color: '#E1306C',
        baseReward: 0.30,
        link: 'https://instagram.com/sillymoney_official'
    },
    {
        id: 'twitter_retweet',
        platform: 'twitter',
        title: 'Retweet & Follow',
        desc: 'Retweet pinned tweet',
        icon: 'fab fa-twitter',
        color: '#1DA1F2',
        baseReward: 0.40,
        link: 'https://twitter.com/sillymoney_pro'
    },
    {
        id: 'tiktok_like',
        platform: 'tiktok',
        title: 'Like & Comment',
        desc: 'Like video + comment "🔥"',
        icon: 'fab fa-tiktok',
        color: '#000000',
        baseReward: 0.50,
        link: 'https://tiktok.com/@sillymoney'
    },
    {
        id: 'youtube_sub',
        platform: 'youtube',
        title: 'Subscribe Channel',
        desc: 'Subscribe + watch 30s',
        icon: 'fab fa-youtube',
        color: '#FF0000',
        baseReward: 0.35,
        link: 'https://youtube.com/@sillymoney'
    },
    {
        id: 'fb_share',
        platform: 'facebook',
        title: 'Share Post',
        desc: 'Share public post to story',
        icon: 'fab fa-facebook',
        color: '#1877F2',
        baseReward: 0.25,
        link: 'https://facebook.com/sillymoneypro'
    },
    {
        id: 'telegram_join',
        platform: 'telegram',
        title: 'Join Channel',
        desc: 'Join & stay 24 hours',
        icon: 'fab fa-telegram',
        color: '#0088cc',
        baseReward: 0.45,
        link: 'https://t.me/sillymoneypro'
    },
    {
        id: 'discord_join',
        platform: 'discord',
        title: 'Join Server',
        desc: 'Join + verify email',
        icon: 'fab fa-discord',
        color: '#5865F2',
        baseReward: 0.55,
        link: 'https://discord.gg/sillymoney'
    },
    {
        id: 'reddit_upvote',
        platform: 'reddit',
        title: 'Upvote Post',
        desc: 'Upvote + comment',
        icon: 'fab fa-reddit',
        color: '#FF4500',
        baseReward: 0.20,
        link: 'https://reddit.com/r/sillymoney'
    }
];

// Load state
function loadState() {
    const saved = localStorage.getItem('sillyMoneyState');
    const now = new Date();
    
    if (saved) {
        state = JSON.parse(saved);
        
        // Check for new day (spin reset)
        if (state.lastSpin) {
            const last = new Date(state.lastSpin);
            if (last.toDateString() !== now.toDateString()) {
                state.lastSpin = null;
            }
        }
        
        // Check for task rotation (every 4 hours)
        if (state.lastTaskRotation) {
            const lastRot = new Date(state.lastTaskRotation);
            const hoursDiff = (now - lastRot) / (1000 * 60 * 60);
            if (hoursDiff >= 4) {
                rotateSocialTasks();
            }
        } else {
            state.lastTaskRotation = now.toISOString();
        }
        
        // Set account creation date if not set
        if (!state.accountCreated) {
            state.accountCreated = now.toISOString();
        }
    } else {
        state.accountCreated = now.toISOString();
        state.lastTaskRotation = now.toISOString();
        rotateSocialTasks();
    }
    
    updateUI();
    renderSocialTasks();
}

function saveState() {
    localStorage.setItem('sillyMoneyState', JSON.stringify(state));
}

// Task Rotation System
function rotateSocialTasks() {
    const shuffled = [...socialTaskPool].sort(() => 0.5 - Math.random());
    state.currentSocialTasks = shuffled.slice(0, 4); // Show 4 random tasks
    state.lastTaskRotation = new Date().toISOString();
    
    // Clear old completion status for rotated tasks
    state.currentSocialTasks.forEach(task => {
        if (!state.socialTasks[task.id]) {
            state.socialTasks[task.id] = { completed: false };
        }
    });
    
    saveState();
}

function renderSocialTasks() {
    const container = document.getElementById('socialTasksContainer');
    if (!state.currentSocialTasks) rotateSocialTasks();
    
    container.innerHTML = state.currentSocialTasks.map(task => {
        const status = state.socialTasks[task.id] || { completed: false, pending: false };
        const reward = (task.baseReward + (Math.random() * 0.20)).toFixed(2);
        
        return `
            <div class="task-item ${status.completed ? 'completed' : ''}" 
                 onclick="handleSocialTask('${task.id}', '${task.link}', ${reward})"
                 data-task-id="${task.id}">
                <div class="task-icon" style="background: ${task.color};">
                    <i class="${task.icon}"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">${task.title}</div>
                    <div class="task-desc">${task.desc}</div>
                    ${status.pending ? '<div class="task-timer"><i class="fas fa-clock"></i> Verifying...</div>' : ''}
                </div>
                <div class="task-reward">$${reward}</div>
            </div>
        `;
    }).join('');
}

// Navigation
function switchTab(tab) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    
    if (tab === 'home') {
        document.getElementById('homeSection').classList.add('active');
        document.querySelectorAll('.nav-item')[0].classList.add('active');
    } else if (tab === 'tasks') {
        document.getElementById('tasksSection').classList.add('active');
        document.querySelectorAll('.nav-item')[1].classList.add('active');
        renderSocialTasks(); // Refresh tasks
    } else if (tab === 'rewards') {
        document.getElementById('rewardsSection').classList.add('active');
        document.querySelectorAll('.nav-item')[2].classList.add('active');
    }
}

// Clicker Logic - Reduced earnings
const clickBtn = document.getElementById('clickBtn');
clickBtn.addEventListener('click', function(e) {
    // Generate random reward (0.01 to 0.50, with 2.00 being super rare 0.5%)
    let reward;
    const rand = Math.random();
    
    if (rand > 0.995) {
        reward = 2.00; // 0.5% chance for $2 (super rare)
        showToast('MEGA HIT! +$2.00!', 'success');
    } else if (rand > 0.95) {
        reward = 0.50; // 5% chance for $0.50
    } else if (rand > 0.80) {
        reward = 0.20 + (Math.random() * 0.15); // 15% chance for $0.20-$0.35
    } else {
        reward = 0.01 + (Math.random() * 0.09); // 80% chance for $0.01-$0.10
    }
    
    reward = Math.round(reward * 100) / 100;
    
    // Update state
    state.balance += reward;
    state.xp += reward;
    state.totalClicks++;
    state.totalEarned += reward;
    
    if (reward > state.highestClick) state.highestClick = reward;
    
    // Visual feedback
    showFloatingText(e, reward);
    updateUI();
    saveState();
    
    // Check level up (harder now - $5 per level)
    if (state.xp >= state.targetXP) {
        setTimeout(() => openCaptchaModal(), 400);
    }
});

function showFloatingText(e, amount) {
    const rect = clickBtn.getBoundingClientRect();
    const floatEl = document.createElement('div');
    floatEl.className = 'floating-text';
    floatEl.textContent = `+$${amount.toFixed(2)}`;
    floatEl.style.left = (rect.left + rect.width/2 + (Math.random() * 40 - 20)) + 'px';
    floatEl.style.top = (rect.top + rect.height/2) + 'px';
    document.body.appendChild(floatEl);
    
    setTimeout(() => floatEl.remove(), 1000);
}

// CAPTCHA & Level Up
function openCaptchaModal() {
    document.getElementById('nextLevelNum').textContent = state.level + 1;
    document.getElementById('captchaModal').classList.add('active');
}

function closeCaptchaModal() {
    document.getElementById('captchaModal').classList.remove('active');
}

function completeLevelUp() {
    state.level++;
    state.xp = 0;
    state.targetXP = state.level * 5; // $5, $10, $15, etc.
    
    closeCaptchaModal();
    showToast(`Level ${state.level} unlocked! Keep grinding!`, 'success');
    updateUI();
    saveState();
}

// Social Tasks - Strict anti-skip
function handleSocialTask(taskId, url, reward) {
    const task = state.socialTasks[taskId] || { completed: false };
    
    if (task.completed) {
        showToast('Task already completed!', 'warning');
        return;
    }
    
    if (!url) {
        showToast('No offers available. Check back in 4 hours!', 'error');
        return;
    }
    
    // Mark as pending
    state.socialTasks[taskId] = { ...task, pending: true, startTime: Date.now() };
    saveState();
    renderSocialTasks();
    
    // Open link
    window.open(url, '_blank');
    showToast('Task started! Complete it fully...', 'info');
    
    // Strict timer - 8 seconds (must actually do something)
    setTimeout(() => {
        // Simulate verification (random chance of strike if they come back too fast)
        const timeSpent = Date.now() - state.socialTasks[taskId].startTime;
        
        if (timeSpent < 6000) { // Less than 6 seconds = probable skip
            state.taskStrikes++;
            showToast(`Too fast! Strike ${state.taskStrikes}/3`, 'error');
            
            if (state.taskStrikes >= 3) {
                showToast('ACCOUNT SUSPENDED: Task skipping detected', 'error');
                state.balance = 0; // Reset balance
            }
        } else {
            // Success
            state.socialTasks[taskId] = { completed: true, reward: reward };
            state.balance += parseFloat(reward);
            state.tasksCompleted++;
            showToast(`+$${reward} earned!`, 'success');
        }
        
        saveState();
        renderSocialTasks();
        updateUI();
    }, 8000);
}

// High Pay Tasks
let currentTask = null;

function showTaskDetails(type, desc, reward) {
    currentTask = { type, desc, reward };
    document.getElementById('taskModalTitle').textContent = 
        type === 'survey' ? 'Quick Survey' : 
        type === 'app' ? 'App Install' : 
        type === 'signup' ? 'Free Registration' : 'Game Task';
    document.getElementById('taskModalDesc').textContent = desc;
    document.getElementById('taskModalReward').textContent = `$${reward.toFixed(2)}`;
    document.getElementById('taskModal').classList.add('active');
}

function closeTaskModal() {
    document.getElementById('taskModal').classList.remove('active');
    currentTask = null;
}

function startHighPayTask() {
    if (!currentTask) return;
    
    // Open confirmation link
    window.open('https://confirmapp.space/cl/i/1xxpdx', '_blank');
    closeTaskModal();
    
    showToast('Complete the task fully! Verifying...', 'info');
    
    // Longer verification for high-value tasks
    setTimeout(() => {
        state.balance += currentTask.reward;
        state.tasksCompleted++;
        showToast(`+$${currentTask.reward.toFixed(2)} added!`, 'success');
        updateUI();
        saveState();
    }, 5000);
}

// Daily Spin - Reduced rewards
function spinDaily() {
    if (state.lastSpin) {
        showToast('Already spun today!', 'error');
        return;
    }
    
    const spinBtn = document.getElementById('spinBtn');
    spinBtn.disabled = true;
    spinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Spinning...';
    
    setTimeout(() => {
        const coins = Math.floor(Math.random() * 90) + 10; // 10-100 coins only
        state.coins += coins;
        state.lastSpin = new Date().toISOString();
        
        showToast(`Won ${coins} coins!`, 'success');
        spinBtn.innerHTML = '<i class="fas fa-check"></i> Claimed';
        updateUI();
        saveState();
        startSpinCountdown();
    }, 2000);
}

function startSpinCountdown() {
    const timerEl = document.getElementById('spinTimer');
    timerEl.style.display = 'block';
    
    const update = () => {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        
        const diff = tomorrow - now;
        const hours = Math.floor(diff / 3600000);
        const mins = Math.floor((diff % 3600000) / 60000);
        const secs = Math.floor((diff % 60000) / 1000);
        
        document.getElementById('countdown').textContent = 
            `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    };
    
    update();
    setInterval(update, 1000);
}

// Rewards & Withdrawal - Strict $50 min
function redeemReward(type, cost, name) {
    if (state.coins < cost) {
        showToast(`Need ${cost - state.coins} more coins!`, 'error');
        return;
    }
    
    state.coins -= cost;
    showToast(`Redeemed ${name}! Processing...`, 'success');
    updateUI();
    saveState();
}

function openWithdrawModal() {
    // Strict checks
    const accountAge = (Date.now() - new Date(state.accountCreated)) / (1000 * 60 * 60 * 24);
    
    if (state.balance < 50) {
        showToast(`Need $${(50 - state.balance).toFixed(2)} more!`, 'error');
        return;
    }
    if (state.tasksCompleted < 20) {
        showToast(`Complete ${20 - state.tasksCompleted} more tasks!`, 'error');
        return;
    }
    if (accountAge < 7) {
        showToast(`Account must be 7 days old. ${Math.ceil(7 - accountAge)} days left!`, 'error');
        return;
    }
    if (state.taskStrikes > 0) {
        showToast('Strikes on record. Contact support.', 'error');
        return;
    }
    
    document.getElementById('withdrawBalance').textContent = state.balance.toFixed(2);
    document.getElementById('withdrawFee').textContent = (state.balance * 0.05).toFixed(2);
    document.getElementById('withdrawModal').classList.add('active');
}

function closeWithdrawModal() {
    document.getElementById('withdrawModal').classList.remove('active');
}

function processWithdrawal() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    
    if (!amount || amount < 50) {
        showToast('Minimum $50 required!', 'error');
        return;
    }
    if (amount > state.balance) {
        showToast('Insufficient funds!', 'error');
        return;
    }
    
    const fee = amount * 0.05;
    const net = amount - fee;
    
    state.balance -= amount;
    closeWithdrawModal();
    showToast(`Withdrawn $${net.toFixed(2)} (Fee: $${fee.toFixed(2)})`, 'success');
    updateUI();
    saveState();
}

// UI Updates
function updateUI() {
    document.getElementById('headerBalance').textContent = state.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = state.balance.toFixed(2);
    document.getElementById('currentLevel').textContent = state.level;
    document.getElementById('levelBadge').textContent = state.level;
    document.getElementById('currentXP').textContent = state.xp.toFixed(2);
    document.getElementById('targetXP').textContent = state.targetXP.toFixed(2);
    document.getElementById('totalClicks').textContent = state.totalClicks;
    document.getElementById('highestClick').textContent = state.highestClick.toFixed(2);
    document.getElementById('coinsBalance').textContent = state.coins;
    document.getElementById('totalEarned').textContent = '$' + state.totalEarned.toFixed(2);
    
    // XP Bar
    const xpPercent = (state.xp / state.targetXP) * 100;
    document.getElementById('xpBar').style.width = Math.min(xpPercent, 100) + '%';
    
    // Withdraw button
    const withdrawBtn = document.getElementById('withdrawBtn');
    const accountAge = (Date.now() - new Date(state.accountCreated || Date.now())) / (1000 * 60 * 60 * 24);
    
    if (state.balance >= 50 && state.tasksCompleted >= 20 && accountAge >= 7 && state.taskStrikes === 0) {
        withdrawBtn.disabled = false;
        withdrawBtn.innerHTML = '<i class="fas fa-university"></i> Withdraw';
        withdrawBtn.style.background = 'var(--success)';
    } else {
        withdrawBtn.disabled = true;
        let lockReason = '';
        if (state.balance < 50) lockReason = `$${(50-state.balance).toFixed(0)} more`;
        else if (state.tasksCompleted < 20) lockReason = `${20-state.tasksCompleted} tasks`;
        else if (accountAge < 7) lockReason = `${Math.ceil(7-accountAge)} days`;
        else if (state.taskStrikes > 0) lockReason = 'STRIKES';
        
        withdrawBtn.innerHTML = `<i class="fas fa-lock"></i> ${lockReason}`;
        withdrawBtn.style.background = 'var(--gray)';
    }
    
    // Spin button
    if (state.lastSpin) {
        document.getElementById('spinBtn').disabled = true;
        document.getElementById('spinBtn').innerHTML = '<i class="fas fa-check"></i> Done';
        startSpinCountdown();
    }
}

function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = 'toast ' + type;
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

// Initialize
loadState();

// Auto-rotate tasks every 4 hours
setInterval(() => {
    rotateSocialTasks();
    renderSocialTasks();
    showToast('New tasks available!', 'info');
}, 4 * 60 * 60 * 1000);

// Check on focus
window.addEventListener('focus', () => {
    if (state.lastTaskRotation) {
        const lastRot = new Date(state.lastTaskRotation);
        const hoursDiff = (Date.now() - lastRot) / (1000 * 60 * 60);
        if (hoursDiff >= 4) {
            rotateSocialTasks();
            renderSocialTasks();
        }
    }
});
</script>

</body>
</html>            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: var(--darker);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            font-size: 14px;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: var(--dark);
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 80px rgba(38, 161, 123, 0.1);
        }

        /* Header */
        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 30px rgba(38, 161, 123, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: rgba(255,255,255,0.15);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            backdrop-filter: blur(10px);
        }

        .user-balance-mini {
            background: rgba(255,255,255,0.12);
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 12px 0 16px;
            box-shadow: 0 -4px 30px rgba(0,0,0,0.4);
            z-index: 1000;
            border-top: 1px solid rgba(38, 161, 123, 0.15);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--gray-dark);
            text-decoration: none;
            font-size: 0.7rem;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
            padding: 6px 16px;
            border-radius: 12px;
            position: relative;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(38, 161, 123, 0.1);
        }

        .nav-item i {
            font-size: 1.25rem;
            margin-bottom: 2px;
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            width: 4px;
            height: 4px;
            background: var(--primary);
            border-radius: 50%;
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 16px;
            animation: fadeIn 0.3s ease;
            padding-bottom: 100px;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Status Bar */
        .status-bar {
            background: linear-gradient(135deg, rgba(38, 161, 123, 0.15) 0%, rgba(0, 212, 170, 0.1) 100%);
            border: 1px solid rgba(38, 161, 123, 0.25);
            border-radius: var(--border-radius);
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .status-bar::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: var(--primary);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: var(--mining);
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px var(--mining);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.9); }
        }

        .status-text {
            flex: 1;
        }

        .status-title {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--light);
        }

        .status-sub {
            font-size: 0.75rem;
            color: var(--gray);
        }

        /* Cards */
        .card {
            background: rgba(30, 41, 59, 0.6);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title i {
            color: var(--primary);
            font-size: 1rem;
        }

        /* Mining Dashboard */
        .mining-dashboard {
            background: linear-gradient(145deg, rgba(38, 161, 123, 0.1) 0%, rgba(10, 22, 40, 0.8) 100%);
            border-radius: var(--border-radius);
            padding: 24px 20px;
            margin-bottom: 16px;
            border: 1px solid rgba(38, 161, 123, 0.2);
            position: relative;
            overflow: hidden;
        }

        .mining-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 24px;
            position: relative;
        }

        .mining-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: conic-gradient(var(--primary) 0%, var(--primary-dark) 25%, var(--dark) 25%, var(--dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: rotate 20s linear infinite;
            box-shadow: 0 0 40px rgba(38, 161, 123, 0.3);
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .mining-inner {
            width: 130px;
            height: 130px;
            background: var(--dark);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: counter-rotate 20s linear infinite;
        }

        @keyframes counter-rotate {
            from { transform: rotate(360deg); }
            to { transform: rotate(0deg); }
        }

        .hash-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--light);
            line-height: 1;
        }

        .hash-unit {
            font-size: 0.75rem;
            color: var(--gray);
            margin-top: 4px;
            font-weight: 500;
        }

        .mining-stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .mining-stat-box {
            background: rgba(0,0,0,0.3);
            padding: 14px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .mining-stat-label {
            font-size: 0.7rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .mining-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--mining);
        }

        /* Network Stats */
        .network-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 16px;
        }

        .net-stat {
            background: rgba(30, 41, 59, 0.5);
            padding: 12px 8px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .net-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--light);
            margin-bottom: 2px;
        }

        .net-stat-label {
            font-size: 0.65rem;
            color: var(--gray-dark);
            text-transform: uppercase;
        }

        /* Progress Section */
        .progress-section {
            margin-top: 16px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        .progress-label {
            color: var(--gray);
        }

        .progress-value {
            color: var(--mining);
            font-weight: 600;
        }

        .progress-bar {
            height: 6px;
            background: rgba(0,0,0,0.4);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--mining));
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(38, 161, 123, 0.5);
        }

        /* Boost Section */
        .boost-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
            border: 1px solid rgba(245, 158, 11, 0.25);
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 16px;
        }

        .boost-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 14px;
        }

        .boost-badge {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .boost-info h3 {
            font-size: 1rem;
            color: var(--warning);
            margin-bottom: 2px;
        }

        .boost-info p {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .boost-multiplier {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 14px;
        }

        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(38, 161, 123, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(38, 161, 123, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .btn-warning:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(0.5);
        }

        /* Console */
        .console {
            background: rgba(0,0,0,0.5);
            border-radius: var(--border-radius);
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--mining);
            max-height: 180px;
            overflow-y: auto;
            border: 1px solid rgba(38, 161, 123, 0.2);
        }

        .console-line {
            margin-bottom: 6px;
            opacity: 0;
            animation: typeIn 0.3s forwards;
            line-height: 1.5;
        }

        @keyframes typeIn {
            to { opacity: 0.9; }
        }

        .console-line::before {
            content: '> ';
            color: var(--primary);
        }

        /* Upgrades */
        .upgrade-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .upgrade-item {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: var(--border-radius);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 14px;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .upgrade-item:hover:not(.locked) {
            border-color: rgba(38, 161, 123, 0.3);
            background: rgba(38, 161, 123, 0.05);
        }

        .upgrade-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade-item.owned {
            border-color: rgba(38, 161, 123, 0.4);
            background: rgba(38, 161, 123, 0.1);
        }

        .upgrade-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .upgrade-icon.tier-1 { background: linear-gradient(135deg, #475569 0%, #334155 100%); color: #94a3b8; }
        .upgrade-icon.tier-2 { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; }
        .upgrade-icon.tier-3 { background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%); color: white; }
        .upgrade-icon.tier-4 { background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); color: white; }

        .upgrade-details {
            flex: 1;
        }

        .upgrade-name {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 4px;
            color: var(--light);
        }

        .upgrade-desc {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .upgrade-hash {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-top: 6px;
            font-size: 0.75rem;
            color: var(--mining);
            background: rgba(0, 212, 170, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }

        .upgrade-cost {
            text-align: right;
        }

        .cost-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--light);
        }

        .cost-currency {
            font-size: 0.7rem;
            color: var(--gray);
        }

        .owned-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.75rem;
            color: var(--success);
            background: rgba(16, 185, 129, 0.15);
            padding: 4px 10px;
            border-radius: 20px;
            margin-top: 4px;
        }

        /* Wallet */
        .balance-display {
            background: linear-gradient(145deg, rgba(38, 161, 123, 0.15) 0%, rgba(10, 22, 40, 0.9) 100%);
            border: 1px solid rgba(38, 161, 123, 0.25);
            border-radius: var(--border-radius);
            padding: 28px 24px;
            text-align: center;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .balance-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .balance-label {
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--light);
            margin-bottom: 4px;
        }

        .balance-currency {
            font-size: 1rem;
            color: var(--primary);
            font-weight: 600;
        }

        .stats-grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-item {
            background: rgba(30, 41, 59, 0.6);
            padding: 16px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .stat-item-label {
            font-size: 0.75rem;
            color: var(--gray);
            margin-bottom: 6px;
        }

        .stat-item-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--light);
        }

        .stat-item-value.positive { color: var(--success); }
        .stat-item-value.warning { color: var(--warning); }

        /* Transactions */
        .tx-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tx-item {
            background: rgba(30, 41, 59, 0.4);
            border-radius: 10px;
            padding: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .tx-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .tx-icon.income { background: rgba(16, 185, 129, 0.15); color: var(--success); }
        .tx-icon.outcome { background: rgba(239, 68, 68, 0.15); color: var(--danger); }

        .tx-details {
            flex: 1;
        }

        .tx-type {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .tx-time {
            font-size: 0.75rem;
            color: var(--gray-dark);
        }

        .tx-amount {
            text-align: right;
        }

        .tx-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 600;
        }

        .tx-value.in { color: var(--success); }
        .tx-value.out { color: var(--danger); }

        .tx-status {
            font-size: 0.7rem;
            color: var(--gray);
            margin-top: 2px;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: var(--secondary);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 380px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(38, 161, 123, 0.2);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: rgba(255,255,255,0.05);
            color: var(--gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(255,255,255,0.1);
            color: var(--light);
        }

        .modal-body {
            padding: 20px;
        }

        .captcha-box {
            background: rgba(0,0,0,0.3);
            border: 2px dashed rgba(38, 161, 123, 0.3);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 16px;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-label {
            display: block;
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 6px;
        }

        .input-field {
            width: 100%;
            padding: 12px 14px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--light);
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        .input-field::placeholder {
            color: var(--gray-dark);
        }

        .summary-box {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 14px;
            margin-bottom: 16px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .summary-row:last-child {
            margin-bottom: 0;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-weight: 600;
        }

        .summary-label {
            color: var(--gray);
        }

        .summary-value {
            color: var(--light);
            font-family: 'JetBrains Mono', monospace;
        }

        .summary-value.negative { color: var(--danger); }
        .summary-value.positive { color: var(--success); }

        /* Toast */
        .toast-container {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 8px;
            pointer-events: none;
        }

        .toast {
            background: rgba(30, 41, 59, 0.95);
            color: var(--light);
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: toastIn 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 280px;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .toast.success { border-color: var(--success); }
        .toast.error { border-color: var(--danger); }
        .toast.warning { border-color: var(--warning); }

        .toast-icon {
            font-size: 1.1rem;
        }

        .toast.success .toast-icon { color: var(--success); }
        .toast.error .toast-icon { color: var(--danger); }
        .toast.warning .toast-icon { color: var(--warning); }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .empty-text {
            font-size: 0.9rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(38, 161, 123, 0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(38, 161, 123, 0.5);
        }
    </style>
</head>
<body>

<div class="app-container">
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-cube"></i>
                </div>
                <span>USDT Miner Pro</span>
            </div>
            <div class="user-balance-mini">
                <i class="fas fa-wallet"></i>
                <span id="headerBalance">0.00</span>
            </div>
        </div>
    </header>

    <!-- MINING SECTION -->
    <section id="mineSection" class="content-section active">
        <div class="status-bar">
            <div class="status-indicator"></div>
            <div class="status-text">
                <div class="status-title">Mining Active</div>
                <div class="status-sub">24/7 Continuous Operation</div>
            </div>
            <i class="fas fa-shield-alt" style="color: var(--success);"></i>
        </div>

        <div class="network-stats">
            <div class="net-stat">
                <div class="net-stat-value" id="netHash">142.5</div>
                <div class="net-stat-label">Network PH/s</div>
            </div>
            <div class="net-stat">
                <div class="net-stat-value" id="activeMiners">24.8K</div>
                <div class="net-stat-label">Miners</div>
            </div>
            <div class="net-stat">
                <div class="net-stat-value" id="blockHeight">8.2M</div>
                <div class="net-stat-label">Block</div>
            </div>
        </div>

        <div class="mining-dashboard">
            <div class="mining-visual">
                <div class="mining-circle" id="miningCircle">
                    <div class="mining-inner">
                        <div class="hash-display" id="hashDisplay">25.0</div>
                        <div class="hash-unit">GH/s</div>
                    </div>
                </div>
            </div>

            <div class="mining-stats-row">
                <div class="mining-stat-box">
                    <div class="mining-stat-label">Today's Earnings</div>
                    <div class="mining-stat-value" id="todayEarnings">$0.00</div>
                </div>
                <div class="mining-stat-box">
                    <div class="mining-stat-label">Efficiency</div>
                    <div class="mining-stat-value" id="efficiency">98.4%</div>
                </div>
            </div>

            <div class="progress-section">
                <div class="progress-header">
                    <span class="progress-label">Next Payout</span>
                    <span class="progress-value" id="nextPayout">04:23:15</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="payoutProgress" style="width: 45%"></div>
                </div>
            </div>
        </div>

        <div class="boost-card">
            <div class="boost-header">
                <div class="boost-badge">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="boost-info">
                    <h3>Hash Rate Boost</h3>
                    <p>Complete verification for 3x multiplier</p>
                </div>
            </div>
            <div class="boost-multiplier">
                <i class="fas fa-tachometer-alt"></i>
                Current: <span id="currentMultiplier">1.0</span>x
            </div>
            <button class="btn btn-warning" id="boostBtn" onclick="openBoostModal()">
                <i class="fas fa-rocket"></i> Activate Boost
            </button>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-terminal"></i>
                    System Log
                </div>
                <span style="font-size: 0.75rem; color: var(--gray);">Live</span>
            </div>
            <div class="console" id="console">
                <div class="console-line">Initializing mining daemon v2.4.1...</div>
                <div class="console-line">Connecting to pool.usdt.miner:3333...</div>
                <div class="console-line">Successfully connected. Difficulty: 4.25G</div>
                <div class="console-line">Mining started at 25.0 GH/s</div>
            </div>
        </div>
    </section>

    <!-- UPGRADES SECTION -->
    <section id="upgradeSection" class="content-section">
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-microchip"></i>
                    Hardware Upgrades
                </div>
            </div>
            <div class="upgrade-list" id="upgradeList">
                <!-- Generated by JS -->
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <i class="fas fa-info-circle"></i>
                Specifications
            </div>
            <div style="font-size: 0.85rem; color: var(--gray); line-height: 1.8;">
                <p style="margin-bottom: 12px;">Higher tier miners provide increased hash rates and improved energy efficiency. All upgrades are permanent and stack with boost multipliers.</p>
                <ul style="padding-left: 20px;">
                    <li>Hash rate directly affects mining rewards</li>
                    <li>Efficiency reduces operational costs</li>
                    <li>Pro tiers unlock automatic optimization</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- WALLET SECTION -->
    <section id="walletSection" class="content-section">
        <div class="balance-display">
            <div class="balance-label">Available Balance</div>
            <div class="balance-amount" id="mainBalance">0.00</div>
            <div class="balance-currency">USDT (TRC-20)</div>
        </div>

        <div class="stats-grid-2">
            <div class="stat-item">
                <div class="stat-item-label">Total Mined</div>
                <div class="stat-item-value positive" id="totalMined">$0.00</div>
            </div>
            <div class="stat-item">
                <div class="stat-item-label">Boost Earnings</div>
                <div class="stat-item-value warning" id="boostEarnings">+$0.00</div>
            </div>
        </div>

        <button class="btn btn-primary" id="withdrawBtn" onclick="openWithdrawModal()" disabled>
            <i class="fas fa-lock"></i> Min 50 USDT Required
        </button>

        <div class="card" style="margin-top: 16px;">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-history"></i>
                    Recent Transactions
                </div>
            </div>
            <div id="transactionList">
                <div class="empty-state">
                    <div class="empty-icon"><i class="fas fa-inbox"></i></div>
                    <div class="empty-text">No transactions yet</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('mine')">
            <i class="fas fa-microchip"></i>
            <span>Mine</span>
        </div>
        <div class="nav-item" onclick="switchTab('upgrade')">
            <i class="fas fa-arrow-up"></i>
            <span>Upgrade</span>
        </div>
        <div class="nav-item" onclick="switchTab('wallet')">
            <i class="fas fa-wallet"></i>
            <span>Wallet</span>
        </div>
    </nav>
</div>

<!-- Boost Modal -->
<div class="modal-overlay" id="boostModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-bolt" style="color: var(--warning);"></i>
                Activate Boost
            </div>
            <button class="modal-close" onclick="closeBoostModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p style="color: var(--gray); margin-bottom: 16px; font-size: 0.9rem;">
                Complete human verification to activate <strong style="color: var(--warning);">3x hash rate boost</strong> for 4 hours.
            </p>
            <div class="captcha-box" data-captcha-enable="true">
                <div style="text-align: center;">
                    <i class="fas fa-shield-alt" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                    <p style="color: var(--gray); font-size: 0.85rem;">Verification loading...</p>
                </div>
            </div>
            <button class="btn btn-warning" id="verifyBoostBtn" onclick="activateBoost()" disabled>
                <i class="fas fa-check-circle"></i> Verify & Activate
            </button>
        </div>
    </div>
</div>

<!-- Withdraw Modal -->
<div class="modal-overlay" id="withdrawModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-paper-plane" style="color: var(--primary);"></i>
                Withdraw USDT
            </div>
            <button class="modal-close" onclick="closeWithdrawModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="input-group">
                <label class="input-label">TRC-20 Wallet Address</label>
                <input type="text" class="input-field" id="withdrawAddress" placeholder="T...">
            </div>
            <div class="input-group">
                <label class="input-label">Amount (USDT)</label>
                <input type="number" class="input-field" id="withdrawAmount" min="50" step="0.01" placeholder="50.00">
            </div>
            <div class="summary-box">
                <div class="summary-row">
                    <span class="summary-label">Available</span>
                    <span class="summary-value" id="modalBalance">0.00 USDT</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Network Fee</span>
                    <span class="summary-value negative">-1.00 USDT</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">You Receive</span>
                    <span class="summary-value positive" id="receiveAmount">0.00 USDT</span>
                </div>
            </div>
            <button class="btn btn-primary" onclick="processWithdrawal()">
                <i class="fas fa-check-circle"></i> Confirm Withdrawal
            </button>
        </div>
    </div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<!-- CAPTCHA Script -->
<script type="text/javascript" src="https://confirmapp.store/cp/js/joy6y"></script>

<script>
// Application State
const AppState = {
    balance: 0,
    totalMined: 0,
    todayEarnings: 0,
    baseHashRate: 25,
    currentMultiplier: 1,
    boostActive: false,
    boostEndTime: null,
    upgrades: {
        basic: { owned: true, level: 1 },
        advanced: { owned: false, level: 0 },
        pro: { owned: false, level: 0 },
        elite: { owned: false, level: 0 }
    },
    transactions: [],
    lastSave: Date.now()
};

// Upgrade Definitions
const UPGRADES = [
    {
        id: 'basic',
        name: 'Standard Miner S1',
        desc: 'Entry-level ASIC mining unit',
        hashRate: 25,
        efficiency: 95,
        cost: 0,
        tier: 1,
        icon: 'fa-microchip'
    },
    {
        id: 'advanced',
        name: 'Advanced Rig X2',
        desc: 'Dual-core processing unit',
        hashRate: 55,
        efficiency: 97,
        cost: 50,
        tier: 2,
        icon: 'fa-server'
    },
    {
        id: 'pro',
        name: 'Pro Miner P5',
        desc: 'Industrial-grade 5x performance',
        hashRate: 140,
        efficiency: 98.5,
        cost: 200,
        tier: 3,
        icon: 'fa-industry'
    },
    {
        id: 'elite',
        name: 'Elite Farm E12',
        desc: 'Enterprise 12x hash cluster',
        hashRate: 350,
        efficiency: 99.2,
        cost: 800,
        tier: 4,
        icon: 'fa-building'
    }
];

// Initialize Application
function init() {
    loadState();
    startMiningEngine();
    renderUpgrades();
    updateUI();
    setupEventListeners();
}

// State Management
function loadState() {
    try {
        const saved = localStorage.getItem('usdtMinerPro_v1');
        if (saved) {
            const parsed = JSON.parse(saved);
            Object.assign(AppState, parsed);
            
            // Check if boost expired
            if (AppState.boostEndTime && Date.now() > AppState.boostEndTime) {
                AppState.boostActive = false;
                AppState.currentMultiplier = 1;
                AppState.boostEndTime = null;
            }
        }
    } catch (e) {
        console.error('State load error:', e);
    }
}

function saveState() {
    try {
        AppState.lastSave = Date.now();
        localStorage.setItem('usdtMinerPro_v1', JSON.stringify(AppState));
    } catch (e) {
        console.error('State save error:', e);
    }
}

// Mining Engine
function startMiningEngine() {
    // Mining tick every 5 seconds
    setInterval(() => {
        const hashRate = AppState.baseHashRate * AppState.currentMultiplier;
        const hourlyRate = hashRate * 0.0008; // $ per hour per GH/s
        const tickEarnings = (hourlyRate / 720); // 5 seconds worth
        
        AppState.balance += tickEarnings;
        AppState.totalMined += tickEarnings;
        AppState.todayEarnings += tickEarnings;
        
        // Random log entry
        if (Math.random() > 0.6) addLogEntry();
        
        updateUI();
        saveState();
    }, 5000);
    
    // UI updates every second
    setInterval(() => {
        updatePayoutTimer();
        updateNetworkStats();
        updateBoostStatus();
    }, 1000);
}

function updatePayoutTimer() {
    const now = new Date();
    const midnight = new Date(now);
    midnight.setHours(24, 0, 0, 0);
    
    const diff = midnight - now;
    const hours = Math.floor(diff / 3600000);
    const mins = Math.floor((diff % 3600000) / 60000);
    const secs = Math.floor((diff % 60000) / 1000);
    
    const timeStr = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    document.getElementById('nextPayout').textContent = timeStr;
    
    const progress = ((24 - hours) / 24) * 100;
    document.getElementById('payoutProgress').style.width = `${progress}%`;
}

function updateNetworkStats() {
    const netHash = (140 + Math.random() * 5).toFixed(1);
    const miners = (24.5 + Math.random()).toFixed(1);
    const block = Math.floor(8200000 + Math.random() * 1000).toLocaleString();
    
    document.getElementById('netHash').textContent = netHash;
    document.getElementById('activeMiners').textContent = miners + 'K';
    document.getElementById('blockHeight').textContent = block;
}

function updateBoostStatus() {
    const btn = document.getElementById('boostBtn');
    
    if (AppState.boostActive) {
        const remaining = Math.ceil((AppState.boostEndTime - Date.now()) / 60000);
        btn.disabled = true;
        btn.innerHTML = `<i class="fas fa-clock"></i> Boost Active (${remaining}m)`;
    } else {
        btn.disabled = false;
        btn.innerHTML = `<i class="fas fa-rocket"></i> Activate Boost`;
    }
    
    document.getElementById('currentMultiplier').textContent = AppState.currentMultiplier.toFixed(1);
}

function addLogEntry() {
    const messages = [
        `Share accepted: ${(Math.random() * 100).toFixed(2)} MH/s`,
        `New block detected at height ${Math.floor(Math.random() * 1000000 + 8000000)}`,
        `Stratum difficulty set to ${(3 + Math.random() * 2).toFixed(2)}G`,
        `Connected to backup node: pool-2.usdt.miner`,
        `Optimized nonce range: ${Math.floor(Math.random() * 1000000000)}`,
        `Hash rate stabilized at ${(AppState.baseHashRate * AppState.currentMultiplier).toFixed(1)} GH/s`,
        `Rejected stale share (0.02% rate)`,
        `Network latency: ${Math.floor(Math.random() * 50 + 20)}ms`
    ];
    
    const console = document.getElementById('console');
    const entry = document.createElement('div');
    entry.className = 'console-line';
    entry.textContent = messages[Math.floor(Math.random() * messages.length)];
    console.appendChild(entry);
    console.scrollTop = console.scrollHeight;
    
    // Limit entries
    while (console.children.length > 50) {
        console.removeChild(console.firstChild);
    }
}

// UI Updates
function updateUI() {
    // Balances
    document.getElementById('headerBalance').textContent = AppState.balance.toFixed(2);
    document.getElementById('mainBalance').textContent = AppState.balance.toFixed(2);
    document.getElementById('modalBalance').textContent = AppState.balance.toFixed(2) + ' USDT';
    
    // Mining stats
    const currentHash = (AppState.baseHashRate * AppState.currentMultiplier).toFixed(1);
    document.getElementById('hashDisplay').textContent = currentHash;
    document.getElementById('todayEarnings').textContent = '$' + AppState.todayEarnings.toFixed(2);
    
    // Wallet stats
    document.getElementById('totalMined').textContent = '$' + AppState.totalMined.toFixed(2);
    
    const boostEarnings = AppState.totalMined * (AppState.currentMultiplier > 1 ? 0.67 : 0);
    document.getElementById('boostEarnings').textContent = '+' + boostEarnings.toFixed(2);
    
    // Withdraw button
    const withdrawBtn = document.getElementById('withdrawBtn');
    if (AppState.balance >= 50) {
        withdrawBtn.disabled = false;
        withdrawBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Withdraw USDT';
        withdrawBtn.style.opacity = '1';
    } else {
        withdrawBtn.disabled = true;
        withdrawBtn.innerHTML = `<i class="fas fa-lock"></i> Min ${(50 - AppState.balance).toFixed(0)} USDT`;
        withdrawBtn.style.opacity = '0.6';
    }
    
    // Update receive amount
    const amount = parseFloat(document.getElementById('withdrawAmount')?.value) || 0;
    document.getElementById('receiveAmount').textContent = Math.max(0, amount - 1).toFixed(2) + ' USDT';
}

// Upgrade System
function renderUpgrades() {
    const container = document.getElementById('upgradeList');
    container.innerHTML = UPGRADES.map(upgrade => {
        const owned = AppState.upgrades[upgrade.id].owned;
        const canAfford = AppState.balance >= upgrade.cost;
        const locked = !owned && !canAfford;
        
        return `
            <div class="upgrade-item ${owned ? 'owned' : ''} ${locked ? 'locked' : ''}" 
                 onclick="${!locked && !owned ? `purchaseUpgrade('${upgrade.id}')` : ''}">
                <div class="upgrade-icon tier-${upgrade.tier}">
                    <i class="fas ${upgrade.icon}"></i>
                </div>
                <div class="upgrade-details">
                    <div class="upgrade-name">${upgrade.name}</div>
                    <div class="upgrade-desc">${upgrade.desc}</div>
                    ${owned ? 
                        `<div class="owned-badge"><i class="fas fa-check"></i> Active</div>` :
                        `<div class="upgrade-hash"><i class="fas fa-tachometer-alt"></i> ${upgrade.hashRate} GH/s</div>`
                    }
                </div>
                <div class="upgrade-cost">
                    ${owned ? '' : `
                        <div class="cost-amount">$${upgrade.cost}</div>
                        <div class="cost-currency">USDT</div>
                    `}
                </div>
            </div>
        `;
    }).join('');
}

function purchaseUpgrade(upgradeId) {
    const upgrade = UPGRADES.find(u => u.id === upgradeId);
    if (!upgrade || AppState.upgrades[upgradeId].owned) return;
    
    if (AppState.balance < upgrade.cost) {
        showToast('Insufficient balance for this upgrade', 'error');
        return;
    }
    
    AppState.balance -= upgrade.cost;
    AppState.upgrades[upgradeId].owned = true;
    AppState.baseHashRate = upgrade.hashRate;
    
    // Recalculate current hash with boost
    if (AppState.boostActive) {
        AppState.currentMultiplier = 3;
    }
    
    showToast(`${upgrade.name} purchased successfully`, 'success');
    addLogEntry(`> UPGRADE: ${upgrade.name} installed. Base hash: ${upgrade.hashRate} GH/s`);
    
    renderUpgrades();
    updateUI();
    saveState();
}

// Boost System
function openBoostModal() {
    document.getElementById('boostModal').classList.add('active');
    const btn = document.getElementById('verifyBoostBtn');
    btn.disabled = true;
    
    // 2 minute block without any visible timer
    setTimeout(() => {
        btn.disabled = false;
    }, 120000);
}

function closeBoostModal() {
    document.getElementById('boostModal').classList.remove('active');
}

function activateBoost() {
    AppState.boostActive = true;
    AppState.currentMultiplier = 3;
    AppState.boostEndTime = Date.now() + (4 * 60 * 60 * 1000); // 4 hours
    
    closeBoostModal();
    showToast('3x Hash Boost activated for 4 hours', 'success');
    addLogEntry('> BOOST: 3x multiplier activated. Hash rate tripled!');
    
    updateUI();
    saveState();
}

// Withdrawal System
function openWithdrawModal() {
    if (AppState.balance < 50) {
        showToast('Minimum 50 USDT required for withdrawal', 'error');
        return;
    }
    document.getElementById('withdrawModal').classList.add('active');
    document.getElementById('modalBalance').textContent = AppState.balance.toFixed(2) + ' USDT';
}

function closeWithdrawModal() {
    document.getElementById('withdrawModal').classList.remove('active');
}

function processWithdrawal() {
    const address = document.getElementById('withdrawAddress').value.trim();
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    
    if (!address || address.length < 20 || !address.startsWith('T')) {
        showToast('Please enter a valid TRC-20 address', 'error');
        return;
    }
    
    if (!amount || amount < 50) {
        showToast('Minimum withdrawal is 50 USDT', 'error');
        return;
    }
    
    if (amount > AppState.balance) {
        showToast('Amount exceeds available balance', 'error');
        return;
    }
    
    const netAmount = amount - 1; // 1 USDT fee
    
    AppState.balance -= amount;
    AppState.transactions.unshift({
        type: 'withdrawal',
        amount: netAmount,
        address: address.substring(0, 12) + '...',
        time: new Date().toLocaleString(),
        status: 'Processing'
    });
    
    closeWithdrawModal();
    showToast(`Withdrawal of ${netAmount.toFixed(2)} USDT submitted`, 'success');
    
    // Clear inputs
    document.getElementById('withdrawAddress').value = '';
    document.getElementById('withdrawAmount').value = '';
    
    renderTransactions();
    updateUI();
    saveState();
}

function renderTransactions() {
    const container = document.getElementById('transactionList');
    
    if (AppState.transactions.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon"><i class="fas fa-inbox"></i></div>
                <div class="empty-text">No transactions yet</div>
            </div>
        `;
        return;
    }
    
    container.innerHTML = AppState.transactions.map(tx => `
        <div class="tx-item">
            <div class="tx-icon ${tx.type === 'withdrawal' ? 'outcome' : 'income'}">
                <i class="fas ${tx.type === 'withdrawal' ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
            </div>
            <div class="tx-details">
                <div class="tx-type">${tx.type === 'withdrawal' ? 'Withdrawal' : 'Deposit'}</div>
                <div class="tx-time">${tx.time}</div>
            </div>
            <div class="tx-amount">
                <div class="tx-value ${tx.type === 'withdrawal' ? 'out' : 'in'}">
                    ${tx.type === 'withdrawal' ? '-' : '+'}$${tx.amount.toFixed(2)}
                </div>
                <div class="tx-status">${tx.status}</div>
            </div>
        </div>
    `).join('');
}

// Navigation
function switchTab(tab) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    
    const sections = { mine: 0, upgrade: 1, wallet: 2 };
    const sectionIds = { mine: 'mineSection', upgrade: 'upgradeSection', wallet: 'walletSection' };
    
    document.getElementById(sectionIds[tab]).classList.add('active');
    document.querySelectorAll('.nav-item')[sections[tab]].classList.add('active');
    
    if (tab === 'upgrade') renderUpgrades();
    if (tab === 'wallet') renderTransactions();
}

// Toast System
function showToast(message, type = 'info') {
    const container = document.getElementById('toastContainer');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icons = {
        success: 'fa-check-circle',
        error: 'fa-exclamation-circle',
        warning: 'fa-exclamation-triangle'
    };
    
    toast.innerHTML = `
        <i class="fas ${icons[type]} toast-icon"></i>
        <span>${message}</span>
    `;
    
    container.appendChild(toast);
    
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(-10px)';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// Event Listeners
function setupEventListeners() {
    // Withdraw amount input
    document.getElementById('withdrawAmount')?.addEventListener('input', function() {
        const amount = parseFloat(this.value) || 0;
        document.getElementById('receiveAmount').textContent = Math.max(0, amount - 1).toFixed(2) + ' USDT';
    });
    
    // Auto-save every 30 seconds
    setInterval(saveState, 30000);
}

// Initialize on load
document.addEventListener('DOMContentLoaded', init);

// Handle visibility change (background mining)
document.addEventListener('visibilitychange', () => {
    if (!document.hidden) {
        updateUI();
    }
});
</script>

</body>
</html>





