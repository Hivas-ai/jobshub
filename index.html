<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WDS | Free-to-Earn Rewards</title>
    <meta name="description" content="Earn free rewards by completing simple tasks and claiming daily gifts">
    <link rel="icon" type="image/jpeg" href="file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/fav-icon.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-y pinch-zoom;
        }

        :root {
            --pure-black: #000000;
            --pure-white: #FFFFFF;
            --zinc-50: #fafafa;
            --zinc-100: #f4f4f5;
            --zinc-200: #e4e4e7;
            --zinc-300: #d4d4d8;
            --zinc-400: #a1a1aa;
            --zinc-500: #71717a;
            --zinc-600: #52525b;
            --zinc-700: #3f3f46;
            --zinc-800: #27272a;
            --zinc-900: #18181b;
            --zinc-950: #09090b;
            --primary-color: #8b5cf6;
            --secondary-color: #3b82f6;
            --accent-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --squircle-radius: 20px;
            --glass-blur: blur(12px);
            --backdrop-blur: blur(12px);
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-medium: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-condensed: 'Roboto Condensed', var(--font-primary);
            --header-height: 70px;
            --header-shrink-height: 60px;
            --dock-height: 80px;
        }

        html {
            scroll-behavior: smooth;
            height: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--pure-black);
            color: var(--pure-white);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior-y: auto;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            letter-spacing: -0.025em;
            line-height: 1.2;
        }

        .condensed {
            font-family: var(--font-condensed);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .text-gradient {
            background: linear-gradient(90deg, var(--pure-white), var(--zinc-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .squircle {
            border-radius: var(--squircle-radius);
        }

        .glass {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .recessed {
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.05), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .elevated {
            box-shadow: 0 4px 20px rgba(255, 255, 255, 0.03), 
                        0 0 0 1px rgba(255, 255, 255, 0.05),
                        0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .outer-glow {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1),
                        0 0 40px rgba(255, 255, 255, 0.05);
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--header-height);
            transition: all var(--transition-medium);
            pointer-events: auto;
        }

        .header.shrink {
            height: var(--header-shrink-height);
            background-color: rgba(0, 0, 0, 0.98);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            pointer-events: auto;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: transparent;
        }

        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .header-logo {
            font-weight: 900;
            font-size: 1.5rem;
            text-transform: uppercase;
            font-style: italic;
            letter-spacing: -0.025em;
            background: linear-gradient(to right, var(--pure-white), var(--zinc-300));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all var(--transition-fast);
        }

        .header.shrink .header-logo {
            font-size: 1.25rem;
        }

        .header.shrink .logo-icon {
            width: 36px;
            height: 36px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            pointer-events: auto;
        }

        .coin-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.875rem;
            font-weight: 600;
            transition: all var(--transition-fast);
            pointer-events: auto;
            cursor: pointer;
        }

        .coin-display:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .coin-display i {
            color: var(--warning-color);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--zinc-700), var(--pure-white));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--pure-black);
            cursor: pointer;
            transition: all var(--transition-fast);
            overflow: hidden;
            pointer-events: auto;
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .level-badge {
            position: absolute;
            bottom: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.625rem;
            font-weight: 800;
            color: white;
            border: 2px solid var(--pure-black);
        }

        .main-content {
            padding-top: calc(var(--header-height) + 1.5rem);
            padding-bottom: calc(var(--dock-height) + 2rem);
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding-left: 1rem;
            padding-right: 1rem;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        @media (min-width: 768px) {
            .main-content {
                padding-left: 2rem;
                padding-right: 2rem;
            }
        }

        .auth-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            text-align: center;
            padding: 2rem 0;
        }

        .auth-header-banner {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
            border: 1px solid rgba(245, 158, 11, 0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 100px;
            margin-bottom: 2rem;
            font-weight: 700;
            color: var(--warning-color);
            font-size: 1rem;
        }

        .auth-title {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            letter-spacing: -0.05em;
            background: linear-gradient(to right, var(--pure-white), var(--zinc-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .auth-subtitle {
            color: var(--zinc-500);
            font-size: 0.875rem;
            margin-bottom: 2.5rem;
            max-width: 300px;
            line-height: 1.6;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
            max-width: 320px;
            position: relative;
            z-index: 10;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            text-align: left;
            position: relative;
            z-index: 10;
        }

        .form-label {
            font-size: 0.75rem;
            color: var(--zinc-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        .form-input {
            padding: 0.875rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: var(--pure-white);
            font-size: 0.875rem;
            transition: all var(--transition-fast);
            font-family: var(--font-primary);
            pointer-events: auto;
            position: relative;
            z-index: 10;
            cursor: text;
            -webkit-user-select: text;
            user-select: text;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            display: block;
        }

        .form-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .form-input::placeholder {
            color: var(--zinc-600);
        }

        .form-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .password-requirements {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .password-req {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .password-req.valid {
            color: #10b981;
        }

        .password-req i {
            font-size: 0.625rem;
        }

        .auth-toggle {
            text-align: center;
            margin-top: 1.5rem;
            position: relative;
            z-index: 10;
        }

        .auth-toggle-text {
            color: var(--zinc-500);
            font-size: 0.875rem;
        }

        .auth-toggle-button {
            background: none;
            border: none;
            color: var(--pure-white);
            font-weight: 600;
            cursor: pointer;
            margin-left: 0.5rem;
            transition: color var(--transition-fast);
            pointer-events: auto;
        }

        .auth-toggle-button:hover {
            color: var(--zinc-300);
        }

        .shimmer-button {
            position: relative;
            overflow: hidden;
            background: var(--pure-white);
            color: var(--pure-black);
            border: none;
            border-radius: 100px;
            padding: 1rem 2rem;
            font-weight: 700;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            outline: none;
            pointer-events: auto;
            z-index: 10;
        }

        .shimmer-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.15),
                        0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        .shimmer-button:active {
            transform: translateY(0);
        }

        .shimmer-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .ghost-button {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--pure-white);
            border-radius: 100px;
            padding: 1rem 2rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            width: 100%;
            outline: none;
            pointer-events: auto;
            z-index: 10;
        }

        .ghost-button:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .ghost-button:active {
            transform: translateY(1px);
        }

        .banner {
            background: linear-gradient(135deg, 
                rgba(139, 92, 246, 0.15), 
                rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: var(--squircle-radius);
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .motivation-banner {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));
            border: 1px solid rgba(239, 68, 68, 0.3);
            margin-bottom: 0.75rem;
        }

        .motivation-banner .banner-icon {
            color: #ef4444;
        }

        .motivation-banner .banner-title {
            color: #ef4444;
        }

        .banner-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 1;
            position: relative;
        }

        .banner-icon {
            color: var(--primary-color);
        }

        .banner-text {
            display: flex;
            flex-direction: column;
        }

        .banner-title {
            font-weight: 700;
            font-size: 0.875rem;
        }

        .banner-description {
            font-size: 0.75rem;
            color: var(--zinc-400);
            margin-top: 0.125rem;
            font-variant-numeric: tabular-nums;
        }

        .action-search-bar {
            position: relative;
            margin-bottom: 1.5rem;
            z-index: 10;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 100px;
            color: var(--pure-white);
            font-size: 0.875rem;
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.05), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
            font-family: var(--font-primary);
            outline: none;
            pointer-events: auto;
            position: relative;
            z-index: 10;
            cursor: text;
            -webkit-user-select: text;
            user-select: text;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
        }

        .search-input:focus {
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1),
                        inset 0 2px 4px rgba(255, 255, 255, 0.05);
        }

        .search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--zinc-500);
            pointer-events: none;
            transition: color var(--transition-fast);
            z-index: 11;
        }

        .search-input:focus + .search-icon {
            color: var(--pure-white);
        }

        .search-dropdown {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: rgba(20, 20, 20, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .search-dropdown.active {
            display: block;
        }

        .search-result-item {
            padding: 1rem;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .search-result-item.highlight-match {
            animation: glowHighlight 2s ease-out;
        }

        @keyframes glowHighlight {
            0% { box-shadow: inset 0 0 0 2px var(--primary-color); }
            100% { box-shadow: inset 0 0 0 0 transparent; }
        }

        .search-result-img {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .search-result-info {
            flex: 1;
            min-width: 0;
        }

        .search-result-title {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .search-result-desc {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .highlight {
            color: var(--primary-color);
            font-weight: 700;
        }

        .section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--zinc-500);
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .offers-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 640px) {
            .offers-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .offer-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            cursor: pointer;
            transition: all var(--transition-medium);
            text-align: center;
            pointer-events: auto;
            position: relative;
            overflow: hidden;
        }

        .offer-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .offer-card.hot-offer {
            border: 2px solid var(--danger-color);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
        }

        .offer-card.hot-offer::before {
            content: 'HOT';
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--danger-color);
            color: white;
            font-size: 0.625rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
        }

        .offer-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: transform var(--transition-medium);
            margin: 0 auto;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
        }

        .offer-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .offer-label {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .offer-subtext {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .daily-gifts-section {
            margin-bottom: 2rem;
        }

        .daily-gifts-slider {
            position: relative;
            overflow: hidden;
            border-radius: var(--squircle-radius);
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            touch-action: pan-y;
        }

        .daily-gifts-container {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: grab;
        }

        .daily-gifts-container:active {
            cursor: grabbing;
        }

        .daily-gifts-slide {
            min-width: 100%;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            user-select: none;
        }

        @media (max-width: 640px) {
            .daily-gifts-slide {
                padding: 1rem;
            }
        }

        .gift-media-wrapper {
            width: 100%;
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 640px) {
            .gift-media-wrapper {
                height: 250px;
            }
        }

        .gift-media-wrapper video,
        .gift-media-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            max-width: 100%;
            max-height: 100%;
        }

        .gift-slider-dots {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            justify-content: center;
        }

        .gift-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .gift-dot.active {
            background: var(--primary-color);
            width: 24px;
            border-radius: 4px;
        }

        .gifts-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .gifts-subtitle {
            color: var(--zinc-500);
            font-size: 0.875rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .gifts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin: 1rem 0;
        }

        .gift-box {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all var(--transition-medium);
            pointer-events: auto;
        }

        .gift-box:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-color);
        }

        .gift-box.selected {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        .gift-icon {
            font-size: 1.5rem;
            color: var(--warning-color);
        }

        .gift-value {
            font-weight: 700;
            font-size: 1.125rem;
        }

        .gift-label {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .tasks-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 1rem;
        }

        .view-all {
            font-size: 0.625rem;
            color: var(--zinc-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: color var(--transition-fast);
            background: none;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            pointer-events: auto;
        }

        .view-all:hover {
            color: var(--pure-white);
            background: rgba(255, 255, 255, 0.05);
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .task-list-vertical {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .task-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            cursor: pointer;
            transition: all var(--transition-fast);
            pointer-events: auto;
            position: relative;
        }

        .task-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .task-card:active {
            transform: translateY(0);
        }

        .task-card.hot {
            position: relative;
            border-left: 4px solid var(--danger-color);
        }

        .task-card.hot::before {
            content: 'HOT';
            position: absolute;
            top: -8px;
            right: 10px;
            background: var(--danger-color);
            color: white;
            font-size: 0.625rem;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .task-card.ai {
            position: relative;
            border-left: 4px solid var(--secondary-color);
        }

        .task-card.ai::before {
            content: 'AI';
            position: absolute;
            top: -8px;
            right: 10px;
            background: var(--secondary-color);
            color: white;
            font-size: 0.625rem;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .task-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .task-card.locked::after {
            content: 'LOCKED';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: var(--zinc-400);
            font-size: 0.625rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .task-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .task-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 100px;
            font-size: 0.625rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            width: fit-content;
        }

        .task-card:nth-child(1) .task-badge {
            background: rgba(139, 92, 246, 0.15);
            color: var(--primary-color);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .task-card:nth-child(2) .task-badge {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger-color);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .task-card:nth-child(3) .task-badge {
            background: rgba(59, 130, 246, 0.15);
            color: var(--secondary-color);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .task-card:nth-child(4) .task-badge {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning-color);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .task-title {
            font-weight: 700;
            font-size: 1.125rem;
            line-height: 1.3;
        }

        .task-description {
            font-size: 0.75rem;
            color: var(--zinc-500);
            line-height: 1.5;
        }

        .task-action {
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.6875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--zinc-400);
            transition: color var(--transition-fast);
        }

        .task-card:hover .task-action {
            color: var(--pure-white);
        }

        .task-image {
            width: 80px;
            height: 80px;
            border-radius: var(--squircle-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.05);
        }

        .task-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-medium);
        }

        .task-card:hover .task-image img {
            transform: scale(1.05);
        }

        .small-tasks-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 0.75rem;
        }

        @media (min-width: 640px) {
            .small-tasks-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .small-task-card {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .small-task-card:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateY(-2px);
        }

        .small-task-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .small-task-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .small-task-info {
            flex: 1;
            min-width: 0;
        }

        .small-task-title {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .small-task-category {
            font-size: 0.625rem;
            color: var(--zinc-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .small-task-reward {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--warning-color);
            flex-shrink: 0;
        }

        .minimalist-dock {
            position: fixed;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 900;
            width: calc(100% - 2rem);
            max-width: 480px;
            pointer-events: none;
        }

        .dock-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5),
                        0 0 0 1px rgba(255, 255, 255, 0.05);
            pointer-events: auto;
        }

        .dock-item {
            position: relative;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-medium);
            color: var(--pure-white);
            font-size: 1.25rem;
            pointer-events: auto;
        }

        .dock-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-4px) scale(1.1);
        }

        .dock-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .dock-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%) translateY(5px);
            background: rgba(0, 0, 0, 0.9);
            color: var(--pure-white);
            padding: 0.375rem 0.75rem;
            border-radius: 8px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-fast);
            border: 1px solid rgba(255, 255, 255, 0.1);
            pointer-events: none;
            z-index: 1000;
        }

        .dock-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: rgba(0, 0, 0, 0.9);
        }

        .dock-item:hover .dock-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 850;
            padding: 1rem;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .modal {
            background: rgba(20, 20, 20, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--squircle-radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            flex-shrink: 0;
        }

        .modal-title {
            font-weight: 700;
            font-size: 1.25rem;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--zinc-500);
            font-size: 1.5rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all var(--transition-fast);
            pointer-events: auto;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--pure-white);
        }

        .modal-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .modal-image {
            width: 100%;
            height: 160px;
            border-radius: var(--squircle-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-description {
            font-size: 0.875rem;
            color: var(--zinc-400);
            line-height: 1.6;
        }

        .progress-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--pure-white), var(--zinc-300));
            border-radius: 3px;
            width: 0%;
            transition: width 1s ease;
        }

        .modal-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: auto;
            padding-top: 1rem;
            flex-shrink: 0;
        }

        .quiz-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .quiz-question {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .quiz-option {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-align: left;
            color: var(--pure-white);
            font-size: 0.875rem;
        }

        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .quiz-option.selected {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary-color);
        }

        .profile-page {
            padding: 1rem 0;
        }

        .profile-header-large {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .profile-avatar-xl {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--zinc-700), var(--pure-white));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
            color: var(--pure-black);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-fast);
        }

        .profile-avatar-xl:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .profile-avatar-xl img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-avatar-edit {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem;
            font-size: 0.75rem;
            text-align: center;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .profile-avatar-xl:hover .profile-avatar-edit {
            opacity: 1;
        }

        .avatar-picker {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
            max-height: 200px;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .avatar-emoji {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .avatar-emoji:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }

        .profile-info-large {
            text-align: center;
        }

        .profile-name-large {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .profile-title {
            font-size: 0.875rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .profile-email-large {
            font-size: 0.875rem;
            color: var(--zinc-500);
        }

        .profile-stats-large {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card-large {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.25rem 1rem;
            text-align: center;
        }

        .stat-value-large {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .stat-label-large {
            font-size: 0.75rem;
            color: var(--zinc-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .profile-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .profile-section-title {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--zinc-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .level-up-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 5000;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .level-up-content {
            text-align: center;
            animation: scaleUp 0.5s ease;
        }

        @keyframes scaleUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .level-up-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            margin-bottom: 1.5rem;
            animation: pulse 1s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .level-up-title {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .level-up-subtitle {
            font-size: 1.25rem;
            color: var(--zinc-400);
            margin-bottom: 0.5rem;
        }

        .level-up-reward {
            font-size: 1rem;
            color: var(--warning-color);
            margin-bottom: 2rem;
        }

        .level-up-button {
            padding: 1rem 3rem;
            background: var(--pure-white);
            color: var(--pure-black);
            border: none;
            border-radius: 100px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .level-up-button:hover {
            transform: scale(1.05);
        }

        .explore-page {
            padding: 1rem 0;
        }

        .explore-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }

        .explore-categories {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .explore-categories::-webkit-scrollbar {
            display: none;
        }

        .explore-category-tab {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            font-size: 0.875rem;
            white-space: nowrap;
            cursor: pointer;
            transition: all var(--transition-fast);
            flex-shrink: 0;
        }

        .explore-category-tab.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .rewards-page {
            padding: 1rem 0;
            position: relative;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rewards-categories {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .rewards-categories::-webkit-scrollbar {
            display: none;
        }

        .category-tab {
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            font-size: 0.875rem;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            transition: all var(--transition-fast);
            pointer-events: auto;
            flex-shrink: 0;
        }

        .category-tab:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .category-tab.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary-color);
            color: var(--pure-white);
        }

        .rewards-grid-page {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 640px) {
            .rewards-grid-page {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .rewards-grid-page {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .reward-card-page {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-medium);
            pointer-events: auto;
            overflow: hidden;
            position: relative;
        }

        .reward-card-page:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .reward-discount-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--danger-color);
            color: white;
            font-size: 0.625rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
            z-index: 2;
        }

        .reward-icon-page {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            transition: transform var(--transition-medium);
            overflow: hidden;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .reward-icon-page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .reward-card-page:hover .reward-icon-page {
            transform: scale(1.05);
        }

        .reward-name-page {
            font-weight: 700;
            font-size: 0.875rem;
        }

        .reward-cost-page {
            font-size: 0.75rem;
            color: var(--warning-color);
            font-weight: 700;
        }

        .reward-original-price {
            font-size: 0.625rem;
            color: var(--zinc-500);
            text-decoration: line-through;
            margin-left: 0.25rem;
        }

        .reward-description-page {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .rewards-balance-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .balance-amount {
            font-size: 3rem;
            font-weight: 900;
            color: var(--warning-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .balance-usd {
            font-size: 1rem;
            color: var(--zinc-400);
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .balance-label {
            font-size: 0.875rem;
            color: var(--zinc-400);
            margin-bottom: 1rem;
        }

        .share-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            text-align: center;
        }

        .share-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .share-subtitle {
            color: var(--zinc-500);
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .share-btn {
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            color: var(--pure-white);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .share-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .guest-restricted {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 3rem 1rem;
            min-height: 60vh;
        }

        .guest-icon {
            font-size: 3rem;
            color: var(--zinc-500);
            margin-bottom: 1.5rem;
        }

        .guest-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .guest-description {
            color: var(--zinc-500);
            font-size: 0.875rem;
            margin-bottom: 2rem;
            max-width: 300px;
            line-height: 1.6;
        }

        .skeleton {
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.05), 
                rgba(255, 255, 255, 0.1), 
                rgba(255, 255, 255, 0.05));
            background-size: 200% 100%;
            border-radius: var(--squircle-radius);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
        }

        .skeleton-image {
            width: 100%;
            height: 160px;
        }

        .task-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            gap: 1rem;
            min-height: 200px;
        }

        .task-loader-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--pure-white);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .task-loader-text {
            font-size: 0.875rem;
            color: var(--zinc-400);
        }

        .task-countdown {
            font-size: 5rem;
            font-weight: 900;
            color: var(--pure-white);
            animation: pulseCount 1s ease-in-out infinite;
        }

        @keyframes pulseCount {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .task-checkmark {
            width: 64px;
            height: 64px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .task-completed-message {
            text-align: center;
            color: #10b981;
            font-weight: 600;
            font-size: 1.25rem;
        }

        .warning-text {
            color: var(--warning-color);
            font-weight: 600;
            text-align: center;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            max-width: 320px;
            z-index: 3000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
            pointer-events: auto;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .notification-success {
            border-left: 4px solid #10b981;
        }
        
        .notification-error {
            border-left: 4px solid #ef4444;
        }
        
        .notification-info {
            border-left: 4px solid #3b82f6;
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
        }
        
        .notification-content i {
            font-size: 1.25rem;
        }
        
        .notification-success .notification-content i {
            color: #10b981;
        }
        
        .notification-error .notification-content i {
            color: #ef4444;
        }
        
        .notification-info .notification-content i {
            color: #3b82f6;
        }
        
        .notification-close {
            background: none;
            border: none;
            color: var(--zinc-500);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.2s;
            pointer-events: auto;
        }
        
        .notification-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--pure-white);
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: none;
            border: none;
            color: var(--pure-white);
            font-size: 0.875rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 100px;
            transition: all var(--transition-fast);
            pointer-events: auto;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .daily-gift-page {
            padding: 1rem 0;
            max-width: 600px;
            margin: 0 auto;
        }

        .gift-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 2.5rem;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.05));
            border-radius: var(--squircle-radius);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .gift-icon-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .gift-title-large {
            font-size: 1.75rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
            background: linear-gradient(to right, var(--pure-white), var(--zinc-300));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gift-subtitle-large {
            font-size: 0.875rem;
            color: var(--zinc-400);
            max-width: 300px;
            line-height: 1.6;
        }

        .gift-grid-large {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .gift-box-large {
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--squircle-radius);
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-medium);
            position: relative;
            overflow: hidden;
        }

        .gift-box-large:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-4px);
        }

        .gift-box-large.selected {
            background: rgba(139, 92, 246, 0.15);
            border-color: var(--primary-color);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.2);
        }

        .gift-box-large.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(139, 92, 246, 0.2), transparent);
            pointer-events: none;
        }

        .gift-box-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--warning-color);
            transition: all var(--transition-medium);
        }

        .gift-box-large:hover .gift-box-icon {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.1);
        }

        .gift-box-large.selected .gift-box-icon {
            background: rgba(139, 92, 246, 0.3);
            color: var(--pure-white);
        }

        .gift-box-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--pure-white);
            transition: all var(--transition-fast);
        }

        .gift-box-large.selected .gift-box-value {
            color: var(--primary-color);
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }

        .gift-box-label {
            font-size: 0.75rem;
            color: var(--zinc-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        .gift-info-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .gift-info-title {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--zinc-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            text-align: center;
        }

        .gift-probability-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.875rem;
        }

        .gift-probability-row:last-child {
            border-bottom: none;
        }

        .gift-probability-row span:first-child {
            color: var(--pure-white);
            font-weight: 600;
        }

        .gift-probability-row span:last-child {
            color: var(--zinc-500);
            font-size: 0.75rem;
        }

        ::selection {
            background: var(--pure-white);
            color: var(--pure-black);
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--zinc-950);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--zinc-800);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--zinc-700);
        }

        .hidden-timer {
            position: absolute;
            left: -9999px;
            visibility: hidden;
        }

        .camera-input {
            display: none;
        }

        .camera-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--pure-white);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.875rem;
        }

        .camera-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .swipe-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 100;
        }

        .swipe-indicator.left {
            left: 10px;
        }

        .swipe-indicator.right {
            right: 10px;
        }

        .swipe-indicator.visible {
            opacity: 1;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }

        .category-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .category-chip {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .category-chip:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .category-chip.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .task-message-container {
            text-align: center;
            padding: 2rem;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .task-message-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .task-message {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--pure-white);
            opacity: 0;
            animation: fadeSequence 5s ease-in-out forwards;
        }

        @keyframes fadeSequence {
            0% { opacity: 0; transform: translateY(20px); }
            10% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }

        .initial-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            gap: 1rem;
        }

        .initial-loader-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .initial-loader-text {
            font-size: 1rem;
            color: van(--zinc-400);
            font-weight: 600;
        }

        .category-tasks-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .category-task-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .category-task-item:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .category-task-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .category-task-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .category-task-info {
            flex: 1;
            min-width: 0;
        }

        .category-task-title {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .category-task-desc {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .category-task-reward {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--warning-color);
            flex-shrink: 0;
        }

        .security-shield {
            font-size: 4rem;
            color: #10b981;
            animation: shieldPulse 2s ease-in-out infinite;
        }

        @keyframes shieldPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .fade-in-out {
            animation: fadeInOut 2s ease-in-out infinite;
        }

        .start-task-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 100px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            text-decoration: none;
        }

        .start-task-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }

        .start-task-btn i {
            font-size: 1.25rem;
        }

        .insufficient-balance-msg {
            text-align: center;
            padding: 2rem;
        }

        .insufficient-balance-msg i {
            font-size: 3rem;
            color: var(--danger-color);
            margin-bottom: 1rem;
        }

        .insufficient-balance-msg h4 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--pure-white);
        }

        .insufficient-balance-msg p {
            color: var(--zinc-400);
            margin-bottom: 1.5rem;
        }

        .countdown-number {
            font-size: 4rem;
            font-weight: 900;
            color: var(--pure-white);
            margin: 1rem 0;
        }

        .captcha-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 4000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            cursor: zoom-out;
        }

        .lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 12px;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Chart Styles */
        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            height: 400px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chart-title {
            font-size: 1rem;
            font-weight: 700;
        }

        .chart-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .chart-tab {
            padding: 0.375rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .chart-tab.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .pull-to-refresh {
            position: absolute;
            top: -60px;
            left: 0;
            right: 0;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .pull-to-refresh.visible {
            opacity: 1;
        }

        .pull-to-refresh-spinner {
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .transaction-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .transaction-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .transaction-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .transaction-icon.negative {
            background: rgba(239, 68, 68, 0.2);
        }

        .transaction-icon.positive {
            background: rgba(16, 185, 129, 0.2);
        }

        .transaction-details h4 {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .transaction-details p {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        .transaction-amount {
            font-weight: 700;
            font-size: 0.875rem;
        }

        .transaction-amount.positive {
            color: #10b981;
        }

        .transaction-amount.negative {
            color: #ef4444;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .stat-box-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-box-label {
            font-size: 0.75rem;
            color: var(--zinc-500);
        }

        /* Virtual Card Styles */
        .virtual-card-section {
            margin-bottom: 2rem;
        }

        .virtual-card {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            aspect-ratio: 1.586;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .virtual-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: rotate(30deg);
            pointer-events: none;
        }

        .card-chip {
            width: 60px;
            height: 45px;
            background: linear-gradient(135deg, #f0c674, #d4a574);
            border-radius: 8px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .card-chip::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 30px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .card-logo {
            font-size: 1.5rem;
            font-weight: 900;
            color: rgba(255, 255, 255, 0.9);
            text-align: right;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-style: italic;
        }

        .card-number {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            letter-spacing: 4px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            margin: 1rem 0;
            cursor: pointer;
            user-select: none;
        }

        .card-details {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .card-holder {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-expiry {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .card-hidden {
            filter: blur(4px);
            transition: filter 0.3s;
        }

        .card-hidden:hover {
            filter: blur(0);
        }

        .card-toggle-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
        }

        .card-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .card-activation {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--squircle-radius);
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .card-inactive {
            background: linear-gradient(135deg, rgba(50, 50, 50, 0.5), rgba(30, 30, 30, 0.5));
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 3rem 2rem;
            text-align: center;
            aspect-ratio: 1.586;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 400px;
            margin: 0 auto;
        }

        .card-inactive-icon {
            font-size: 3rem;
            color: var(--zinc-500);
            margin-bottom: 1rem;
        }

        .withdraw-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--squircle-radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .withdraw-methods {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .withdraw-method {
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .withdraw-method:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-color);
        }

        .withdraw-method.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .withdraw-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            font-family: var(--font-primary);
        }

        .withdraw-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .withdraw-minimum {
            font-size: 0.75rem;
            color: var(--zinc-500);
            margin-bottom: 1rem;
            text-align: center;
        }

        .card-info-row {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-info-item {
            text-align: center;
        }

        .card-info-label {
            font-size: 0.625rem;
            color: var(--zinc-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .card-info-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--pure-white);
        }
    </style>
<base target="_blank">
<base target="_blank">
</head>
<body>
    <div id="root"></div>

    <script>
        // TASK LINKS - Updated links for tasks
        const TASK_LINKS = [
            'https://lockedapp.store/cl/i/o63lvn',
            'https://lockedapp.space/cl/i/6nn1l7',
            'https://appverification.site/cl/i/wow4r1'
        ];

        // REWARD IMAGES
        const REWARD_IMAGES = {
            robux2000: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Roblox25.jpg',
            robux4500: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Roblox50.jpg',
            robux10000: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Roblox100.jpg',
            fortnite2800: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Fortni20.jpg',
            fortnite5000: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Fortni50.jpg',
            paypal: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/pypal10.jpg',
            googleplay: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Googleplay.jpg',
            aitools: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/AItools.jpg',
            bitcoin: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/BTC.jpg',
            solana: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/SOL.jpg',
            usdt: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/USDT.jpg',
            amazon: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Amazon.jpg',
            netflix: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Netflix25.jpg',
            trading: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/AItrading.jpg',
            aiagents: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/AIagent.jpg'
        };

        // SLIDER MEDIA - Added 2 new pictures
        const SLIDER_VIDEO = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/sliderVid.mp4';
        const SLIDER_IMAGE = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/sliderpic.jpg';
        const SLIDER_IMAGE2 = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/sliderpic2.jpg';
        const SLIDER_IMAGE3 = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/sliderpic3.jpg';

        // TASK ICONS
        const TASK_ICONS = {
            video: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Video-Icon.jpg',
            gift: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/gift-icon.jpg',
            hot: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Hot-icon.jpg',
            exclusive: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/exclusive-icon.jpg',
            ai: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/AI-icon.jpg',
            games: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/games-icon.jpg',
            crypto: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/crypto-icon.jpg',
            social: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/social-icon.jpg',
            content: 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Content-icon.jpg'
        };

        // LOGO
        const LOGO_IMAGE = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/Logo.jpg';
        const FAV_ICON = 'file:///C:/Users/royan/OneDrive/Desktop/WeDropStuff/Pics/fav-icon.jpg';

        function getCategoryTaskIcon(category) {
            const icons = {
                hot: TASK_ICONS.hot,
                ai: TASK_ICONS.ai,
                games: TASK_ICONS.games,
                crypto: TASK_ICONS.crypto,
                social: TASK_ICONS.social,
                content: TASK_ICONS.content
            };
            return icons[category] || TASK_ICONS.gift;
        }

        const LevelSystem = {
            titles: [
                { level: 1, title: "Novice", color: "#71717a", coins: 5 },
                { level: 2, title: "Beginner", color: "#a1a1aa", coins: 10 },
                { level: 3, title: "Learner", color: "#3b82f6", coins: 15 },
                { level: 4, title: "Apprentice", color: "#06b6d4", coins: 20 },
                { level: 5, title: "Practitioner", color: "#10b981", coins: 25 },
                { level: 6, title: "Skilled", color: "#22c55e", coins: 30 },
                { level: 7, title: "Proficient", color: "#84cc16", coins: 35 },
                { level: 8, title: "Advanced", color: "#eab308", coins: 40 },
                { level: 9, title: "Expert", color: "#f59e0b", coins: 45 },
                { level: 10, title: "Specialist", color: "#f97316", coins: 50 },
                { level: 11, title: "Professional", color: "#ef4444", coins: 60 },
                { level: 12, title: "Master", color: "#dc2626", coins: 70 },
                { level: 13, title: "Grandmaster", color: "#b91c1c", coins: 80 },
                { level: 14, title: "Legend", color: "#7c3aed", coins: 90 },
                { level: 15, title: "Mythic", color: "#6d28d9", coins: 100 },
                { level: 16, title: "Immortal", color: "#9333ea", coins: 120 },
                { level: 17, title: "Divine", color: "#a855f7", coins: 140 },
                { level: 18, title: "Celestial", color: "#c084fc", coins: 160 },
                { level: 19, title: "Transcendent", color: "#d8b4fe", coins: 180 },
                { level: 20, title: "Supreme", color: "#f0abfc", coins: 200 },
                { level: 21, title: "Ultimate", color: "#e879f9", coins: 250 },
                { level: 22, title: "Infinite", color: "#f0abfc", coins: 300 },
                { level: 23, title: "Eternal", color: "#fda4af", coins: 350 },
                { level: 24, title: "Cosmic", color: "#fb7185", coins: 400 },
                { level: 25, title: "Galactic", color: "#f43f5e", coins: 450 },
                { level: 26, title: "Universal", color: "#e11d48", coins: 500 },
                { level: 27, title: "Omnipotent", color: "#be123c", coins: 600 },
                { level: 28, title: "Omniscient", color: "#9f1239", coins: 700 },
                { level: 29, title: "Omnipresent", color: "#881337", coins: 800 },
                { level: 30, title: "Absolute", color: "#4c0519", coins: 900 },
                { level: 31, title: "Void Walker", color: "#000000", coins: 1000 },
                { level: 32, title: "Reality Bender", color: "#1e1b4b", coins: 1100 },
                { level: 33, title: "Time Lord", color: "#312e81", coins: 1200 },
                { level: 34, title: "Space Weaver", color: "#3730a3", coins: 1300 },
                { level: 35, title: "Dimension Hopper", color: "#4338ca", coins: 1400 },
                { level: 36, title: "Multiverse", color: "#4f46e5", coins: 1500 },
                { level: 37, title: "Quantum", color: "#6366f1", coins: 1600 },
                { level: 38, title: "Singularity", color: "#818cf8", coins: 1700 },
                { level: 39, title: "Event Horizon", color: "#a5b4fc", coins: 1800 },
                { level: 40, title: "Supernova", color: "#c7d2fe", coins: 1900 },
                { level: 41, title: "Pulsar", color: "#dbeafe", coins: 2000 },
                { level: 42, title: "Quasar", color: "#bfdbfe", coins: 2200 },
                { level: 43, title: "Nebula", color: "#93c5fd", coins: 2400 },
                { level: 44, title: "Black Hole", color: "#60a5fa", coins: 2600 },
                { level: 45, title: "White Dwarf", color: "#3b82f6", coins: 2800 },
                { level: 46, title: "Red Giant", color: "#2563eb", coins: 3000 },
                { level: 47, title: "Blue Supergiant", color: "#1d4ed8", coins: 3200 },
                { level: 48, title: "Hypernova", color: "#1e40af", coins: 3400 },
                { level: 49, title: "Magnetar", color: "#1e3a8a", coins: 3600 },
                { level: 50, title: "Grand Master", color: "#172554", coins: 4000 },
                { level: 51, title: "Godlike", color: "#fef08a", coins: 4500 },
                { level: 52, title: "Demigod", color: "#fde047", coins: 5000 },
                { level: 53, title: "Titan", color: "#facc15", coins: 5500 },
                { level: 54, title: "Deity", color: "#eab308", coins: 6000 },
                { level: 55, title: "Archon", color: "#ca8a04", coins: 6500 },
                { level: 56, title: "Overlord", color: "#a16207", coins: 7000 },
                { level: 57, title: "Sovereign", color: "#854d0e", coins: 7500 },
                { level: 58, title: "Monarch", color: "#713f12", coins: 8000 },
                { level: 59, title: "Emperor", color: "#fcd34d", coins: 8500 },
                { level: 60, title: "Imperator", color: "#fbbf24", coins: 9000 },
                { level: 61, title: "Conqueror", color: "#f59e0b", coins: 9500 },
                { level: 62, title: "Dominus", color: "#d97706", coins: 10000 },
                { level: 63, title: "Supremus", color: "#b45309", coins: 11000 },
                { level: 64, title: "Maximus", color: "#92400e", coins: 12000 },
                { level: 65, title: "Ultimus", color: "#78350f", coins: 13000 },
                { level: 66, title: "Primus", color: "#451a03", coins: 14000 },
                { level: 67, title: "Alpha", color: "#78350f", coins: 15000 },
                { level: 68, title: "Omega", color: "#92400e", coins: 16000 },
                { level: 69, title: "Infinity", color: "#b45309", coins: 17000 },
                { level: 70, title: "Eternity", color: "#d97706", coins: 18000 },
                { level: 71, title: "Apex", color: "#f59e0b", coins: 19000 },
                { level: 72, title: "Zenith", color: "#fbbf24", coins: 20000 },
                { level: 73, title: "Pinnacle", color: "#fcd34d", coins: 22000 },
                { level: 74, title: "Summit", color: "#fde047", coins: 24000 },
                { level: 75, title: "Crown", color: "#fef08a", coins: 26000 },
                { level: 76, title: "Throne", color: "#facc15", coins: 28000 },
                { level: 77, title: "Scepter", color: "#eab308", coins: 30000 },
                { level: 78, title: "Orb", color: "#ca8a04", coins: 32000 },
                { level: 79, title: "Chalice", color: "#a16207", coins: 34000 },
                { level: 80, title: "Grail", color: "#854d0e", coins: 36000 },
                { level: 81, title: "Relic", color: "#fcd34d", coins: 38000 },
                { level: 82, title: "Artifact", color: "#fbbf24", coins: 40000 },
                { level: 83, title: "Treasure", color: "#f59e0b", coins: 42000 },
                { level: 84, title: "Fortune", color: "#d97706", coins: 44000 },
                { level: 85, title: "Destiny", color: "#b45309", coins: 46000 },
                { level: 86, title: "Fate", color: "#92400e", coins: 48000 },
                { level: 87, title: "Karma", color: "#78350f", coins: 50000 },
                { level: 88, title: "Dharma", color: "#451a03", coins: 52000 },
                { level: 89, title: "Nirvana", color: "#fefce8", coins: 54000 },
                { level: 90, title: "Enlightenment", color: "#fef9c3", coins: 56000 },
                { level: 91, title: "Transcendence", color: "#fefce8", coins: 58000 },
                { level: 92, title: "Ascension", color: "#fef08a", coins: 60000 },
                { level: 93, title: "Apotheosis", color: "#fde047", coins: 62000 },
                { level: 94, title: "Deification", color: "#facc15", coins: 64000 },
                { level: 95, title: "Apotheon", color: "#eab308", coins: 66000 },
                { level: 96, title: "Paragon", color: "#ca8a04", coins: 68000 },
                { level: 97, title: "Exemplar", color: "#a16207", coins: 70000 },
                { level: 98, title: "Epitome", color: "#854d0e", coins: 72000 },
                { level: 99, title: "Quintessence", color: "#713f12", coins: 74000 },
                { level: 100, title: "Absolute Grand Master", color: "#dc2626", coins: 100000 }
            ],

            getLevelInfo(level) {
                return this.titles.find(t => t.level === level) || this.titles[this.titles.length - 1];
            },

            getXPForNextLevel(currentLevel) {
                return Math.floor(100 * Math.pow(1.5, currentLevel - 1));
            },

            calculateLevel(xp) {
                let level = 1;
                let remainingXP = xp;
                
                while (remainingXP >= this.getXPForNextLevel(level) && level < 100) {
                    remainingXP -= this.getXPForNextLevel(level);
                    level++;
                }
                
                return { level, remainingXP, nextLevelXP: this.getXPForNextLevel(level) };
            }
        };

        const QuestionDatabase = [
            { q: "What's your favorite gaming platform?", options: ["PC", "Console", "Mobile"] },
            { q: "How often do you play games?", options: ["Daily", "Weekly", "Monthly"] },
            { q: "Which reward interests you most?", options: ["Crypto", "Gift Cards", "Game Currency"] },
            { q: "What's your preferred crypto?", options: ["Bitcoin", "Ethereum", "Solana"] },
            { q: "How do you prefer to earn?", options: ["Surveys", "Videos", "Games"] },
            { q: "What's your favorite game genre?", options: ["Action", "Strategy", "RPG"] },
            { q: "How long do you game daily?", options: ["1-2 hours", "3-5 hours", "5+ hours"] },
            { q: "What's your favorite social media?", options: ["Instagram", "TikTok", "Twitter"] },
            { q: "Which console do you prefer?", options: ["PlayStation", "Xbox", "Nintendo"] },
            { q: "What's your spending habit?", options: ["Free only", "Occasional", "Whale"] },
            { q: "Favorite mobile game type?", options: ["Puzzle", "Battle Royale", "Gacha"] },
            { q: "How do you discover games?", options: ["Friends", "Ads", "Store"] },
            { q: "What's your internet speed?", options: ["Slow", "Average", "Fast"] },
            { q: "Do you watch gaming streams?", options: ["Often", "Sometimes", "Never"] },
            { q: "Favorite payment method?", options: ["PayPal", "Crypto", "Cards"] },
            { q: "How many games do you play?", options: ["1-2", "3-5", "5+"] },
            { q: "Do you join gaming communities?", options: ["Yes", "No", "Sometimes"] },
            { q: "What's your age group?", options: ["Under 18", "18-25", "25+"] },
            { q: "Preferred game difficulty?", options: ["Easy", "Medium", "Hard"] },
            { q: "Do you play competitively?", options: ["Yes", "Casual only", "No"] },
            { q: "Favorite gaming accessory?", options: ["Headset", "Controller", "Mouse"] },
            { q: "How do you learn new games?", options: ["Tutorials", "Trial", "Guides"] },
            { q: "What's your main device?", options: ["Phone", "PC", "Console"] },
            { q: "Do you spend on cosmetics?", options: ["Yes", "No", "Rarely"] },
            { q: "Favorite game company?", options: ["Nintendo", "Sony", "Microsoft"] },
            { q: "How do you track progress?", options: ["In-game", "Apps", "Manual"] },
            { q: "Do you trade in games?", options: ["Yes", "No", "Digital only"] },
            { q: "What's your gaming setup?", options: ["Basic", "Mid", "High-end"] },
            { q: "Do you follow esports?", options: ["Yes", "Casually", "No"] },
            { q: "Favorite game soundtrack?", options: ["Orchestral", "Electronic", "Rock"] },
            { q: "How do you handle updates?", options: ["Auto", "Manual", "Delay"] },
            { q: "Do you play retro games?", options: ["Often", "Sometimes", "Never"] },
            { q: "What's your gaming goal?", options: ["Fun", "Competition", "Completion"] },
            { q: "Do you use voice chat?", options: ["Always", "Sometimes", "Never"] },
            { q: "Favorite game art style?", options: ["Realistic", "Cartoon", "Pixel"] },
            { q: "How do you deal with toxicity?", options: ["Mute", "Report", "Ignore"] },
            { q: "Do you pre-order games?", options: ["Always", "Sometimes", "Never"] },
            { q: "What's your DLC policy?", options: ["Buy all", "Selective", "None"] },
            { q: "Do you speedrun games?", options: ["Yes", "Attempted", "No"] },
            { q: "Favorite gaming snack?", options: ["Chips", "Energy drinks", "Healthy"] },
            { q: "How do you choose games?", options: ["Reviews", "Trailers", "Friends"] },
            { q: "Do you game with family?", options: ["Often", "Sometimes", "Never"] },
            { q: "What's your refund policy?", options: ["Always", "If broken", "Never"] },
            { q: "Do you collect gaming merch?", options: ["Yes", "Some", "No"] },
            { q: "How do you handle lag?", options: ["Quit", "Endure", "Fix"] },
            { q: "Do you watch game movies?", options: ["Yes", "If good", "No"] },
            { q: "What's your gaming origin?", options: ["Console", "PC", "Mobile"] },
            { q: "Do you mod games?", options: ["Often", "Sometimes", "Never"] },
            { q: "How do you celebrate wins?", options: ["Share", "Quiet", "Rage"] },
            { q: "What's your gaming resolution?", options: ["720p", "1080p", "4K"] },
            { q: "Do you game on vacation?", options: ["Yes", "Sometimes", "No"] },
            { q: "What's your ultimate gaming dream?", options: ["Pro player", "Streamer", "Just fun"] }
        ];

        const AppState = {
            user: null,
            isAuthenticated: false,
            currentView: 'auth',
            authMode: 'signin',
            activeModal: null,
            selectedTask: null,
            selectedOffer: null,
            loading: false,
            searchQuery: '',
            selectedCategory: null,
            headerShrunk: false,
            activeDockItem: 'home',
            selectedRewardCategory: 'all',
            exploreCategory: 'all',
            taskInProgress: false,
            taskCompleted: false,
            taskCountdown: 15,
            taskLoaderStage: 'idle',
            adBarClosed: false,
            currentQuizQuestion: 0,
            quizAnswers: [],
            giftSlideIndex: 0,
            avatarPickerOpen: false,
            showLevelUp: false,
            newLevel: null,
            taskMessageIndex: 0,
            lastTaskRefresh: null,
            initialLoader: false,
            autoSlideInterval: null,
            selectedOfferCategory: null,
            categoryTasks: [],
            quizQuestions: [],
            warningPhase: 0,
            confirmationStage: 'idle',
            confirmingReward: null,
            videoTaskCompleted: false,
            currentLightbox: null,
            chartPeriod: '7d',
            chartInstance: null,
            pullToRefreshState: 'idle',
            pullStartY: 0,
            eventTimer: {
                days: 7,
                hours: 0,
                minutes: 0,
                seconds: 0
            },
            cardHidden: true,
            virtualCardActivated: false,
            withdrawMethod: 'crypto',
            
            authForm: {
                email: '',
                password: '',
                name: ''
            },
            
            limitedTime: {
                hours: 23,
                minutes: 59,
                seconds: 59
            },
            
            userData: {
                name: '',
                email: '',
                avatar: '',
                avatarType: 'initial',
                balance: 1250,
                xp: 0,
                completedTasks: 12,
                level: 3,
                dailyGiftClaimed: false,
                loginBonusClaimed: false,
                taskProgress: {},
                unlockedTitles: [],
                profileCircleColor: '#71717a',
                joinDate: null,
                cardNumber: null,
                cardExpiry: null,
                cardCvv: null
            },
            
            bigTasks: [
                { 
                    id: 'creativity', 
                    title: 'Creativity Creator', 
                    description: 'Earn 10,000 coins in a day through content creation tasks',
                    targetCoins: 10000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'Creator', color: '#8b5cf6' },
                    category: 'content',
                    completed: false,
                    unlocked: true
                },
                { 
                    id: 'social', 
                    title: 'Social Psychologist', 
                    description: 'Earn 15,000 coins through social sharing tasks',
                    targetCoins: 15000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'Influencer', color: '#10b981' },
                    category: 'social',
                    completed: false,
                    unlocked: false,
                    unlockLevel: 20
                },
                { 
                    id: 'virtual', 
                    title: 'Virtual World Explorer', 
                    description: 'Reach level 40 and earn 20,000 coins through gaming',
                    targetCoins: 20000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'Gamer', color: '#f59e0b' },
                    category: 'games',
                    completed: false,
                    unlocked: false,
                    unlockLevel: 40
                },
                { 
                    id: 'agentic', 
                    title: 'Agentic AI', 
                    description: 'Earn 40,000 coins through AI tasks to unlock the power of agentic systems',
                    targetCoins: 40000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'Agentic AI', color: '#3b82f6' },
                    category: 'ai',
                    completed: false,
                    unlocked: false,
                    unlockLevel: 70
                },
                { 
                    id: 'silent', 
                    title: 'The Silent Investor', 
                    description: 'Complete crypto tasks with 30+ coin rewards. Rare but highly profitable tasks.',
                    targetCoins: 30000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'Silent Investor', color: '#f59e0b' },
                    category: 'crypto',
                    completed: false,
                    unlocked: false,
                    unlockLevel: 60
                },
                { 
                    id: 'agi', 
                    title: 'AGI - Artificial General Intelligence', 
                    description: 'The ultimate achievement. Earn 80,000 coins through hot tasks to prove your mastery.',
                    targetCoins: 80000,
                    currentProgress: 0,
                    reward: { type: 'title', value: 'AGI', color: '#dc2626' },
                    category: 'hot',
                    completed: false,
                    unlocked: false,
                    unlockLevel: 80
                }
            ],
            
            smallTasks: [],
            
            offers: [
                { 
                    id: 'hot', 
                    label: 'Hot Offers', 
                    icon: TASK_ICONS.hot,
                    subtext: 'High value tasks',
                    coins: 470,
                    category: 'hot',
                    hot: true
                },
                { 
                    id: 'ai', 
                    label: 'AI', 
                    icon: TASK_ICONS.ai,
                    subtext: 'Prompts tools code',
                    coins: 320,
                    category: 'ai'
                },
                { 
                    id: 'games', 
                    label: 'Games', 
                    icon: TASK_ICONS.games,
                    subtext: 'Roblox, Fortnite',
                    coins: 270,
                    category: 'games'
                },
                { 
                    id: 'crypto', 
                    label: 'Crypto', 
                    icon: TASK_ICONS.crypto,
                    subtext: 'BTC, SOL, USDT',
                    coins: 275,
                    category: 'crypto'
                }
            ],
            
            tasks: [
                { 
                    id: 1, 
                    title: 'Exclusive Coins', 
                    description: 'Access exclusive coin offers', 
                    type: 'Coin Task', 
                    targetLevel: 0,
                    image: TASK_ICONS.exclusive,
                    status: 'normal',
                    navigateTo: 'search'
                },
                { 
                    id: 2, 
                    title: 'Hot Task', 
                    description: 'Complete hot trending tasks', 
                    type: 'Hot Task', 
                    targetLevel: 0,
                    image: TASK_ICONS.hot,
                    status: 'hot',
                    navigateTo: 'search'
                },
                { 
                    id: 3, 
                    title: 'Video Task', 
                    description: 'Watch video and earn +25 coins', 
                    type: 'Video Task', 
                    targetLevel: 0,
                    image: TASK_ICONS.video,
                    status: 'ai',
                    navigateTo: 'video'
                },
                { 
                    id: 4, 
                    title: 'Daily Gift', 
                    description: 'Claim your daily gift', 
                    type: 'Daily Task', 
                    targetLevel: 0,
                    image: TASK_ICONS.gift,
                    status: 'normal',
                    navigateTo: 'gift'
                }
            ],
            
            dailyGifts: [
                { id: 1, value: 0, revealed: false, type: 'empty' },
                { id: 2, value: 0, revealed: false, type: 'coin' },
                { id: 3, value: 0, revealed: false, type: 'coin' }
            ],
            
            rewards: [
                { id: 1, name: '2000 Robux', icon: REWARD_IMAGES.robux2000, cost: 7000, originalCost: 8000, discount: 12.5, type: 'games', category: 'roblox', description: 'Roblox in-game currency' },
                { id: 2, name: '4500 Robux', icon: REWARD_IMAGES.robux4500, cost: 25000, type: 'games', category: 'roblox', description: 'Roblox in-game currency' },
                { id: 3, name: '10000 Robux', icon: REWARD_IMAGES.robux10000, cost: 45000, type: 'games', category: 'roblox', description: 'Roblox in-game currency' },
                { id: 4, name: 'Fortnite 2800 V-Bucks', icon: REWARD_IMAGES.fortnite2800, cost: 7000, originalCost: 7500, discount: 6.7, type: 'games', category: 'fortnite', description: 'Fortnite in-game currency' },
                { id: 5, name: 'Fortnite 5000 V-Bucks', icon: REWARD_IMAGES.fortnite5000, cost: 25000, type: 'games', category: 'fortnite', description: 'Fortnite in-game currency' },
                { id: 6, name: '$5 PayPal', icon: REWARD_IMAGES.paypal, cost: 5000, type: 'other', category: 'paypal', description: 'PayPal cash' },
                { id: 7, name: '$10 Google Play', icon: REWARD_IMAGES.googleplay, cost: 10000, type: 'games', category: 'google', description: 'Google Play gift card' },
                { id: 8, name: 'AI Tools', icon: REWARD_IMAGES.aitools, cost: 20000, originalCost: 25000, discount: 20, type: 'other', category: 'AI', description: '+50 Free AI tools & Premium prompts' },
                { id: 9, name: '0.00015 BTC', icon: REWARD_IMAGES.bitcoin, cost: 15000, type: 'crypto', category: 'bitcoin', description: 'Bitcoin cryptocurrency' },
                { id: 10, name: '0.04 SOL', icon: REWARD_IMAGES.solana, cost: 15000, type: 'crypto', category: 'solana', description: 'Solana cryptocurrency' },
                { id: 11, name: '10 USDT', icon: REWARD_IMAGES.usdt, cost: 15000, type: 'crypto', category: 'usdt', description: 'Tether stablecoin' },
                { id: 12, name: 'Amazon', icon: REWARD_IMAGES.amazon, cost: 25000, type: 'other', category: 'amazon', description: 'Amazon gift card & Promo codes ' },
                { id: 13, name: 'Netflix Premium', icon: REWARD_IMAGES.netflix, cost: 15000, type: 'other', category: 'netflix', description: 'Free premium Netflix' },
                { id: 14, name: 'AI Trading Indicators', icon: REWARD_IMAGES.trading, cost: 18000, originalCost: 22000, discount: 18.2, type: 'other', category: 'trading', description: 'Free +$90 AI Trading Indicators' },
                { id: 15, name: 'AI Agents & Digital Projects', icon: REWARD_IMAGES.aiagents, cost: 15000, originalCost: 20000, discount: 25, type: 'other', category: 'AI', description: 'Free Premium AI Agents business Managers & +89 Digital Projects' }
            ],
            
            rewardCategories: [
                { id: 'all', label: 'All Rewards', icon: 'gift' },
                { id: 'games', label: 'Games', icon: 'gamepad' },
                { id: 'crypto', label: 'Crypto', icon: 'bitcoin-sign' },
                { id: 'other', label: 'Other', icon: 'shopping-bag' }
            ],
            
            dockItems: [
                { id: 'home', icon: 'home', label: 'Home' },
                { id: 'search', icon: 'search', label: 'Search' },
                { id: 'gift', icon: 'gift', label: 'Daily Gift' },
                { id: 'wallet', icon: 'wallet', label: 'Rewards' },
                { id: 'user', icon: 'user', label: 'Profile' }
            ],

            emojis: ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        };

        function generateSmallTasks(count = 50, includeHighValue = false) {
            const categories = ['hot', 'ai', 'games', 'crypto', 'social', 'content'];
            const categoryNames = {
                hot: 'Hot Offer',
                ai: 'AI Task',
                games: 'Game Task',
                crypto: 'Crypto Task',
                social: 'Social Task',
                content: 'Content Task'
            };
            
            const tasks = [];
            for (let i = 1; i <= count; i++) {
                const category = categories[Math.floor(Math.random() * categories.length)];
                let coins = Math.floor(Math.random() * 36) + 5;
                
                if (includeHighValue && category === 'crypto' && Math.random() < 0.1) {
                    coins = Math.floor(Math.random() * 20) + 30;
                }
                
                if (category === 'ai' && Math.random() < 0.15) {
                    coins = Math.floor(Math.random() * 30) + 25;
                }
                
                if (category === 'hot' && Math.random() < 0.05) {
                    coins = Math.floor(Math.random() * 70) + 30;
                }
                
                tasks.push({
                    id: `small_${Date.now()}_${i}`,
                    title: `${categoryNames[category]} #${i}`,
                    description: `Complete this ${category} task to earn ${coins} coins`,
                    category: category,
                    coins: coins,
                    completed: false,
                    href: TASK_LINKS[Math.floor(Math.random() * TASK_LINKS.length)]
                });
            }
            return tasks;
        }

        function checkAndRefreshTasks() {
            const lastRefresh = localStorage.getItem('wdsLastTaskRefresh');
            const now = new Date();
            
            if (!lastRefresh) {
                localStorage.setItem('wdsLastTaskRefresh', now.toISOString());
                return generateSmallTasks(50, true);
            }
            
            const lastRefreshDate = new Date(lastRefresh);
            const hoursDiff = (now - lastRefreshDate) / (1000 * 60 * 60);
            
            if (hoursDiff >= 24) {
                localStorage.setItem('wdsLastTaskRefresh', now.toISOString());
                return generateSmallTasks(50, true);
            }
            
            const savedTasks = localStorage.getItem('wdsSmallTasks');
            if (savedTasks) {
                return JSON.parse(savedTasks);
            }
            
            return generateSmallTasks(50, true);
        }

        let state = JSON.parse(JSON.stringify(AppState));
        state.smallTasks = checkAndRefreshTasks();
        state.videoTaskCompleted = localStorage.getItem('wdsVideoTaskCompleted') === 'true';

        let timerInterval = null;
        let taskTimerInterval = null;
        let hiddenTimerInterval = null;
        let searchDebounceTimer = null;
        let autoSlideInterval = null;
        let confirmationInterval = null;
        let eventTimerInterval = null;

        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;

        function setState(newState, skipRender = false) {
            Object.keys(newState).forEach(key => {
                if (state[key] !== undefined) {
                    state[key] = newState[key];
                }
            });
            
            if (newState.user !== undefined || newState.isAuthenticated !== undefined || newState.userData !== undefined) {
                localStorage.setItem('wdsUser', JSON.stringify({
                    user: state.user,
                    isAuthenticated: state.isAuthenticated,
                    userData: state.userData
                }));
            }
            
            if (newState.smallTasks !== undefined) {
                localStorage.setItem('wdsSmallTasks', JSON.stringify(state.smallTasks));
            }
            
            if (!skipRender) {
                render();
            }
        }

        function loadSavedState() {
            try {
                const saved = localStorage.getItem('wdsUser');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    if (parsed.isAuthenticated && parsed.user) {
                        state.user = parsed.user;
                        state.isAuthenticated = parsed.isAuthenticated;
                        state.userData = { ...state.userData, ...parsed.userData };
                        state.currentView = 'main';
                        
                        updateTaskUnlockStatus();
                        
                        const lastClaim = localStorage.getItem('wdsLastGiftClaim');
                        if (lastClaim) {
                            const lastClaimDate = new Date(lastClaim);
                            const today = new Date();
                            if (lastClaimDate.toDateString() === today.toDateString()) {
                                state.userData.dailyGiftClaimed = true;
                            }
                        }
                        
                        // Check if virtual card is activated
                        if (state.userData.cardNumber) {
                            state.virtualCardActivated = true;
                        }
                    }
                }
                
                const savedTasks = localStorage.getItem('wdsSmallTasks');
                if (savedTasks) {
                    state.smallTasks = JSON.parse(savedTasks);
                }
            } catch (e) {
                console.error('Error loading saved state:', e);
            }
        }

        function updateTaskUnlockStatus() {
            const userLevel = state.userData.level || 1;
            state.bigTasks.forEach(task => {
                if (task.unlockLevel) {
                    task.unlocked = userLevel >= task.unlockLevel;
                }
            });
        }

        function initSwipeHandlers() {
            document.addEventListener('touchstart', handleTouchStart, { passive: true });
            document.addEventListener('touchend', handleTouchEnd, { passive: true });
            document.addEventListener('mousedown', handleMouseDown);
            document.addEventListener('mouseup', handleMouseUp);
        }

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }

        function handleMouseDown(e) {
            touchStartX = e.screenX;
            touchStartY = e.screenY;
        }

        function handleMouseUp(e) {
            touchEndX = e.screenX;
            handleSwipe();
        }

        function handleSwipe() {
            const swipeThreshold = 100;
            const diff = touchStartX - touchEndX;
            const verticalDiff = Math.abs(touchStartY - (window.event?.clientY || 0));
            
            if (verticalDiff > 50) return;
            
            const pages = ['home', 'search', 'gift', 'wallet', 'user'];
            const currentIndex = pages.indexOf(state.activeDockItem);
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0 && currentIndex < pages.length - 1) {
                    handleDockItemClick(pages[currentIndex + 1]);
                } else if (diff < 0 && currentIndex > 0) {
                    handleDockItemClick(pages[currentIndex - 1]);
                }
            }
        }

        function initGiftSlider() {
            const slider = document.querySelector('.daily-gifts-container');
            if (!slider) return;
            
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
            
            let startX = 0;
            let currentX = 0;
            let isDragging = false;
            
            slider.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                isDragging = true;
                if (autoSlideInterval) clearInterval(autoSlideInterval);
            }, { passive: true });
            
            slider.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                currentX = e.touches[0].clientX;
            }, { passive: true });
            
            slider.addEventListener('touchend', () => {
                if (!isDragging) return;
                const diff = startX - currentX;
                
                if (Math.abs(diff) > 50) {
                    if (diff > 0 && state.giftSlideIndex < 4) {
                        setState({ giftSlideIndex: state.giftSlideIndex + 1 });
                    } else if (diff < 0 && state.giftSlideIndex > 0) {
                        setState({ giftSlideIndex: state.giftSlideIndex - 1 });
                    }
                }
                
                isDragging = false;
                startAutoSlide();
            });
            
            startAutoSlide();
        }

        function startAutoSlide() {
            if (autoSlideInterval) clearInterval(autoSlideInterval);
            
            autoSlideInterval = setInterval(() => {
                if (state.currentView !== 'main' && state.currentView !== 'daily-gift') return;
                
                let nextSlide = state.giftSlideIndex + 1;
                if (nextSlide > 4) nextSlide = 0;
                
                setState({ giftSlideIndex: nextSlide });
            }, 6000);
        }

        function initPullToRefresh() {
            const rewardsPage = document.querySelector('.rewards-page');
            if (!rewardsPage) return;
            
            let startY = 0;
            let currentY = 0;
            let isPulling = false;
            
            rewardsPage.addEventListener('touchstart', (e) => {
                if (rewardsPage.scrollTop === 0) {
                    startY = e.touches[0].clientY;
                    isPulling = true;
                }
            }, { passive: true });
            
            rewardsPage.addEventListener('touchmove', (e) => {
                if (!isPulling) return;
                currentY = e.touches[0].clientY;
                const diff = currentY - startY;
                
                if (diff > 0 && diff < 100) {
                    const pullIndicator = document.querySelector('.pull-to-refresh');
                    if (pullIndicator) {
                        pullIndicator.style.transform = `translateY(${diff}px)`;
                        pullIndicator.classList.add('visible');
                    }
                }
            }, { passive: true });
            
            rewardsPage.addEventListener('touchend', () => {
                if (!isPulling) return;
                const diff = currentY - startY;
                
                if (diff > 80) {
                    location.reload();
                } else {
                    const pullIndicator = document.querySelector('.pull-to-refresh');
                    if (pullIndicator) {
                        pullIndicator.style.transform = 'translateY(0)';
                        pullIndicator.classList.remove('visible');
                    }
                }
                
                isPulling = false;
            });
        }

        function generateCardNumber() {
            // Generate unique card number based on timestamp and random
            const timestamp = Date.now().toString().slice(-8);
            const random1 = Math.floor(Math.random() * 9000 + 1000);
            const random2 = Math.floor(Math.random() * 9000 + 1000);
            const random3 = Math.floor(Math.random() * 9000 + 1000);
            return `${random1} ${random2} ${random3} ${timestamp}`;
        }

        function getTransactionHistory() {
            const saved = localStorage.getItem('wdsTransactions');
            return saved ? JSON.parse(saved) : [];
        }

        function addTransaction(type, amount, description, balanceAfter) {
            const transactions = getTransactionHistory();
            transactions.push({
                id: Date.now(),
                type,
                amount,
                description,
                balanceAfter,
                date: new Date().toISOString()
            });
            localStorage.setItem('wdsTransactions', JSON.stringify(transactions));
        }

        function initChart() {
            const ctx = document.getElementById('balanceChart');
            if (!ctx) return;
            
            const transactions = getTransactionHistory();
            const joinDate = state.userData.joinDate ? new Date(state.userData.joinDate) : new Date();
            
            // Generate data from join date to now
            const labels = [];
            const data = [];
            
            // Create daily data points from join date
            const days = 7;
            const today = new Date();
            
            for (let i = days; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                
                // Calculate balance at this date
                const txsBeforeDate = transactions.filter(t => new Date(t.date) <= date);
                if (txsBeforeDate.length > 0) {
                    data.push(txsBeforeDate[txsBeforeDate.length - 1].balanceAfter);
                } else {
                    data.push(0); // Start from 0 if no transactions
                }
            }
            
            // Add current balance if not yet added
            if (data[data.length - 1] !== state.userData.balance) {
                data[data.length - 1] = state.userData.balance;
            }
            
            if (state.chartInstance) {
                state.chartInstance.destroy();
            }
            
            state.chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Balance',
                        data: data,
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: '#8b5cf6',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return 'Balance: ' + context.parsed.y + ' coins';
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            grid: { display: false, drawBorder: false },
                            ticks: { 
                                color: 'rgba(255, 255, 255, 0.5)',
                                maxTicksLimit: 8
                            }
                        },
                        y: {
                            display: true,
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.05)', drawBorder: false },
                            ticks: { 
                                color: 'rgba(255, 255, 255, 0.5)',
                                callback: function(value) {
                                    return value >= 1000 ? (value/1000).toFixed(1) + 'k' : value;
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        function convertCoinsToUSD(coins) {
            return (coins / 100 * 0.1).toFixed(2);
        }

        function formatUSD(value) {
            return '$' + parseFloat(value).toFixed(2);
        }

        class AuthSystem {
            static validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            static validatePassword(password) {
                return password.length >= 6;
            }

            static async signUp(email, password, name) {
                await new Promise(resolve => setTimeout(resolve, 800));
                
                if (!this.validateEmail(email)) {
                    throw new Error('Please enter a valid email address');
                }
                
                if (!this.validatePassword(password)) {
                    throw new Error('Password must be at least 6 characters');
                }
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                if (users[email]) {
                    throw new Error('User already exists with this email');
                }
                
                const levelInfo = LevelSystem.getLevelInfo(1);
                const joinDate = new Date().toISOString();
                
                users[email] = {
                    email,
                    password,
                    name: name || email.split('@')[0],
                    createdAt: joinDate,
                    balance: 180,
                    xp: 0,
                    level: 1,
                    completedTasks: 0,
                    dailyGiftClaimed: false,
                    loginBonusClaimed: true,
                    profileCircleColor: levelInfo.color,
                    joinDate: joinDate
                };
                
                localStorage.setItem('wdsUsers', JSON.stringify(users));
                
                // Add initial transaction
                addTransaction('signup', 180, 'Welcome Bonus', 180);
                
                return {
                    email,
                    name: name || email.split('@')[0],
                    avatar: '',
                    balance: 180,
                    xp: 0,
                    level: 1,
                    completedTasks: 0,
                    dailyGiftClaimed: false,
                    loginBonusClaimed: true,
                    profileCircleColor: levelInfo.color,
                    joinDate: joinDate
                };
            }

            static async signIn(email, password) {
                await new Promise(resolve => setTimeout(resolve, 600));
                
                if (!this.validateEmail(email)) {
                    throw new Error('Please enter a valid email address');
                }
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[email];
                
                if (!user) {
                    throw new Error('User not found. Please sign up first.');
                }
                
                if (user.password !== password) {
                    throw new Error('Invalid password');
                }
                
                let loginBonus = 0;
                if (!user.loginBonusClaimed) {
                    user.balance += 80;
                    user.loginBonusClaimed = true;
                    loginBonus = 80;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                    addTransaction('bonus', 80, 'Login Bonus', user.balance);
                }
                
                const levelInfo = LevelSystem.getLevelInfo(user.level || 1);
                
                return {
                    email: user.email,
                    name: user.name,
                    avatar: user.avatar || '',
                    balance: user.balance || 100,
                    xp: user.xp || 0,
                    level: user.level || 1,
                    completedTasks: user.completedTasks || 0,
                    dailyGiftClaimed: user.dailyGiftClaimed || false,
                    loginBonusClaimed: user.loginBonusClaimed || false,
                    loginBonusGiven: loginBonus,
                    profileCircleColor: levelInfo.color,
                    joinDate: user.joinDate || new Date().toISOString(),
                    cardNumber: user.cardNumber,
                    cardExpiry: user.cardExpiry,
                    cardCvv: user.cardCvv
                };
            }

            static signOut() {
                setState({
                    user: null,
                    isAuthenticated: false,
                    currentView: 'auth',
                    authMode: 'signin',
                    authForm: { email: '', password: '', name: '' }
                });
            }

            static updateProfile(updates) {
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[state.user.email];
                
                if (user) {
                    Object.assign(user, updates);
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                return { ...state.userData, ...updates };
            }

            static changePassword(currentPassword, newPassword) {
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[state.user.email];
                
                if (!user) {
                    throw new Error('User not found');
                }
                
                if (user.password !== currentPassword) {
                    throw new Error('Current password is incorrect');
                }
                
                if (newPassword.length < 6) {
                    throw new Error('New password must be at least 6 characters');
                }
                
                user.password = newPassword;
                localStorage.setItem('wdsUsers', JSON.stringify(users));
                
                return true;
            }
        }

        class LevelSystemManager {
            static addXP(amount) {
                const currentXP = (state.userData.xp || 0) + amount;
                const levelData = LevelSystem.calculateLevel(currentXP);
                const oldLevel = state.userData.level || 1;
                
                if (levelData.level > oldLevel) {
                    const newLevelInfo = LevelSystem.getLevelInfo(levelData.level);
                    const bonusCoins = newLevelInfo.coins;
                    state.userData.balance += bonusCoins;
                    state.userData.profileCircleColor = newLevelInfo.color;
                    
                    updateTaskUnlockStatus();
                    
                    setTimeout(() => {
                        setState({
                            showLevelUp: true,
                            newLevel: levelData.level
                        });
                    }, 500);
                    
                    showNotification(`Level Up! You reached level ${levelData.level} - ${newLevelInfo.title}! +${bonusCoins} coins bonus!`, 'success');
                }
                
                state.userData.xp = currentXP;
                state.userData.level = levelData.level;
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                if (users[state.user.email]) {
                    users[state.user.email].xp = currentXP;
                    users[state.user.email].level = levelData.level;
                    users[state.user.email].balance = state.userData.balance;
                    users[state.user.email].profileCircleColor = state.userData.profileCircleColor;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                return levelData;
            }

            static getCurrentTitle() {
                const levelInfo = LevelSystem.getLevelInfo(state.userData.level || 1);
                return levelInfo.title;
            }

            static getProgressToNext() {
                const currentXP = state.userData.xp || 0;
                const levelData = LevelSystem.calculateLevel(currentXP);
                return {
                    current: levelData.remainingXP,
                    total: levelData.nextLevelXP,
                    percent: (levelData.remainingXP / levelData.nextLevelXP) * 100
                };
            }
        }

        class DailyGiftSystem {
            static generateGiftValues() {
                const gifts = [...state.dailyGifts];
                
                const probabilities = [
                    { min: 5, max: 10, chance: 90 },
                    { min: 10, max: 20, chance: 80 },
                    { min: 20, max: 30, chance: 50 },
                    { min: 30, max: 40, chance: 20 },
                    { min: 40, max: 40, chance: 10 }
                ];
                
                const emptyGiftIndex = Math.floor(Math.random() * 3);
                
                gifts.forEach((gift, index) => {
                    if (index === emptyGiftIndex) {
                        gift.value = 0;
                        gift.type = 'empty';
                    } else {
                        const random = Math.random() * 100;
                        let selectedRange = probabilities[0];
                        
                        for (const range of probabilities) {
                            if (random <= range.chance) {
                                selectedRange = range;
                                break;
                            }
                        }
                        
                        const min = selectedRange.min;
                        const max = selectedRange.max;
                        gift.value = Math.floor(Math.random() * (max - min + 1)) + min;
                        gift.type = 'coin';
                    }
                    gift.revealed = false;
                });
                
                return gifts;
            }

            static claimGift(giftIndex) {
                const gifts = [...state.dailyGifts];
                if (gifts[giftIndex].revealed) return false;
                
                gifts[giftIndex].revealed = true;
                
                if (gifts[giftIndex].type === 'coin' && gifts[giftIndex].value > 0) {
                    const newBalance = state.userData.balance + gifts[giftIndex].value;
                    LevelSystemManager.addXP(10);
                    
                    const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                    const user = users[state.user.email];
                    if (user) {
                        user.balance = newBalance;
                        user.dailyGiftClaimed = true;
                        localStorage.setItem('wdsUsers', JSON.stringify(users));
                    }
                    
                    state.userData.balance = newBalance;
                    state.userData.dailyGiftClaimed = true;
                    localStorage.setItem('wdsLastGiftClaim', new Date().toISOString());
                    
                    addTransaction('gift', gifts[giftIndex].value, 'Daily Gift', newBalance);
                    showNotification(`You won ${gifts[giftIndex].value} coins!`, 'success');
                    
                    setTimeout(() => {
                        setState({ giftSlideIndex: 1 });
                    }, 1000);
                } else {
                    showNotification('This gift was empty. Try again tomorrow!', 'info');
                }
                
                setState({ dailyGifts: gifts, userData: state.userData });
                return true;
            }

            static resetGifts() {
                const gifts = state.dailyGifts.map(gift => ({
                    ...gift,
                    revealed: false,
                    value: 0,
                    type: 'coin'
                }));
                setState({ dailyGifts: gifts, giftSlideIndex: 0 });
            }
        }

        class TaskSystem {
            static completeTask(task) {
                const newBalance = state.userData.balance + task.reward;
                const newCompletedTasks = state.userData.completedTasks + 1;
                
                LevelSystemManager.addXP(Math.floor(task.reward / 10));
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[state.user.email];
                if (user) {
                    user.balance = newBalance;
                    user.completedTasks = newCompletedTasks;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                state.userData.balance = newBalance;
                state.userData.completedTasks = newCompletedTasks;
                
                const updatedTasks = state.tasks.map(t => {
                    if (t.id === task.id) {
                        return { ...t, completed: true, progress: 100 };
                    }
                    return t;
                });
                
                addTransaction('task', task.reward, task.title, newBalance);
                showNotification(`Task completed! You earned ${task.reward} coins.`, 'success');
                
                setState({ 
                    userData: state.userData, 
                    tasks: updatedTasks
                });
            }

            static updateBigTaskProgress(category, coinsEarned) {
                const bigTasks = [...state.bigTasks];
                let updated = false;
                
                bigTasks.forEach(task => {
                    if (task.category === category && !task.completed) {
                        if (task.unlockLevel && state.userData.level < task.unlockLevel) {
                            return;
                        }
                        
                        task.currentProgress += coinsEarned;
                        
                        if (task.currentProgress >= task.targetCoins) {
                            task.completed = true;
                            task.currentProgress = task.targetCoins;
                            
                            if (!state.userData.unlockedTitles) {
                                state.userData.unlockedTitles = [];
                            }
                            state.userData.unlockedTitles.push(task.reward);
                            
                            showNotification(`Big Task Complete: ${task.title}! Unlocked title: ${task.reward.value}`, 'success');
                        }
                        updated = true;
                    }
                });
                
                if (updated) {
                    setState({ bigTasks });
                }
            }
        }

        class OfferSystem {
            static startOffer(offer) {
                // Skip quiz, go directly to loading
                setState({ 
                    selectedOffer: offer,
                    activeModal: 'small-task-complete',
                    taskLoaderStage: 'preparing',
                    taskCountdown: 3
                });
                
                let timeLeft = 3;
                if (taskTimerInterval) clearInterval(taskTimerInterval);
                
                taskTimerInterval = setInterval(() => {
                    timeLeft--;
                    setState({ taskCountdown: timeLeft }, true);
                    
                    if (timeLeft <= 0) {
                        clearInterval(taskTimerInterval);
                        setState({ taskLoaderStage: 'ready-to-start' });
                    }
                }, 1000);
            }

            static completeSmallTask(task) {
                // Skip quiz, go directly to loading
                setState({ 
                    selectedOffer: task,
                    activeModal: 'small-task-complete',
                    taskLoaderStage: 'preparing',
                    taskCountdown: 3
                });
                
                let timeLeft = 3;
                if (taskTimerInterval) clearInterval(taskTimerInterval);
                
                taskTimerInterval = setInterval(() => {
                    timeLeft--;
                    setState({ taskCountdown: timeLeft }, true);
                    
                    if (timeLeft <= 0) {
                        clearInterval(taskTimerInterval);
                        setState({ taskLoaderStage: 'ready-to-start' });
                    }
                }, 1000);
            }
        }

        class RewardsSystem {
            static initiateClaim(reward) {
                setState({
                    activeModal: 'reward-confirmation',
                    confirmingReward: reward,
                    confirmationStage: 'idle'
                });
            }

            static confirmClaim(reward) {
                if (state.userData.balance < reward.cost) {
                    setState({ confirmationStage: 'insufficient' });
                    return;
                }

                setState({ confirmationStage: 'countdown', taskCountdown: 3 });
                
                let timeLeft = 3;
                if (confirmationInterval) clearInterval(confirmationInterval);
                
                confirmationInterval = setInterval(() => {
                    timeLeft--;
                    setState({ taskCountdown: timeLeft }, true);
                    
                    if (timeLeft <= 0) {
                        clearInterval(confirmationInterval);
                        this.processClaim(reward);
                    }
                }, 1000);
            }

            static processClaim(reward) {
                setState({ confirmationStage: 'processing' });
                
                setTimeout(() => {
                    const newBalance = state.userData.balance - reward.cost;
                    
                    const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                    const user = users[state.user.email];
                    if (user) {
                        user.balance = newBalance;
                        localStorage.setItem('wdsUsers', JSON.stringify(users));
                    }
                    
                    state.userData.balance = newBalance;
                    
                    addTransaction('purchase', -reward.cost, reward.name, newBalance);
                    
                    setState({ 
                        userData: state.userData,
                        confirmationStage: 'complete'
                    });
                    
                    setTimeout(() => {
                        showNotification(`${reward.name} claimed successfully! Check your email.`, 'success');
                        setState({ 
                            activeModal: null,
                            confirmingReward: null,
                            confirmationStage: 'idle'
                        });
                    }, 1500);
                }, 1500);
            }
            
            static getFilteredRewards() {
                if (state.selectedRewardCategory === 'all') {
                    return state.rewards;
                }
                return state.rewards.filter(reward => reward.type === state.selectedRewardCategory);
            }

            static getFilteredSmallTasks() {
                let tasks = state.smallTasks;
                
                if (state.exploreCategory !== 'all') {
                    tasks = tasks.filter(task => task.category === state.exploreCategory);
                }
                
                if (state.selectedOfferCategory === 'hot') {
                    tasks = tasks.filter(task => task.coins >= 100 && task.coins <= 240);
                    tasks = tasks.slice(0, 4);
                }
                
                return tasks;
            }

            static shareSite(platform) {
                const shareLink = "https://wedropstuff.netlify.app/ref";
                
                navigator.clipboard.writeText(shareLink).then(() => {
                    showNotification(`Link copied! Opening ${platform}...`, 'success');
                    
                    let url = '';
                    switch(platform) {
                        case 'Facebook': 
                            url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareLink)}`; 
                            break;
                        case 'WhatsApp': 
                            url = `https://wa.me/?text=${encodeURIComponent(shareLink)}`; 
                            break;
                        case 'Telegram': 
                            url = `https://t.me/share/url?url=${encodeURIComponent(shareLink)}`; 
                            break;
                        case 'Reddit': 
                            url = `https://reddit.com/submit?url=${encodeURIComponent(shareLink)}`; 
                            break;
                        case 'Discord': 
                            showNotification('Link copied! Open Discord to share.', 'info');
                            return;
                        case 'TikTok':
                            showNotification('Link copied! Open TikTok to share.', 'info');
                            return;
                    }
                    
                    if(url) window.open(url, '_blank');
                }).catch(() => {
                    showNotification('Failed to copy link. Please try again.', 'error');
                });
            }
        }

        class CardSystem {
            static activateCard() {
                if (state.userData.balance < 1000) {
                    showNotification('Insufficient balance! Need 1000 coins to activate card.', 'error');
                    return;
                }
                
                const newBalance = state.userData.balance - 1000;
                const cardNumber = generateCardNumber();
                const expiry = new Date();
                expiry.setFullYear(expiry.getFullYear() + 3);
                const expiryStr = expiry.toLocaleDateString('en-US', { month: '2-digit', year: '2-digit' }).replace('/', '/');
                const cvv = Math.floor(Math.random() * 900 + 100).toString();
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[state.user.email];
                
                if (user) {
                    user.balance = newBalance;
                    user.cardNumber = cardNumber;
                    user.cardExpiry = expiryStr;
                    user.cardCvv = cvv;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                state.userData.balance = newBalance;
                state.userData.cardNumber = cardNumber;
                state.userData.cardExpiry = expiryStr;
                state.userData.cardCvv = cvv;
                state.virtualCardActivated = true;
                
                addTransaction('purchase', -1000, 'Virtual Card Activation', newBalance);
                showNotification('Virtual card activated successfully!', 'success');
                setState({ userData: state.userData, virtualCardActivated: true });
            }

            static withdrawFunds(method, amount, address) {
                const minAmount = 20; // $20 minimum
                const coinAmount = amount * 1000; // Convert USD to coins (approximate rate)
                
                if (amount < minAmount) {
                    showNotification(`Minimum withdrawal is $${minAmount}`, 'error');
                    return false;
                }
                
                if (state.userData.balance < coinAmount) {
                    showNotification('Insufficient balance!', 'error');
                    return false;
                }
                
                const newBalance = state.userData.balance - coinAmount;
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                const user = users[state.user.email];
                
                if (user) {
                    user.balance = newBalance;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                state.userData.balance = newBalance;
                
                addTransaction('withdrawal', -coinAmount, `Withdrawal to ${method}`, newBalance);
                showNotification(`Withdrawal of $${amount} initiated! Processing...`, 'success');
                setState({ userData: state.userData });
                return true;
            }
        }

        class TimerSystem {
            static start() {
                if (timerInterval) clearInterval(timerInterval);
                
                timerInterval = setInterval(() => {
                    let { hours, minutes, seconds } = state.limitedTime;
                    
                    seconds--;
                    
                    if (seconds < 0) {
                        seconds = 59;
                        minutes--;
                        
                        if (minutes < 0) {
                            minutes = 59;
                            hours--;
                            
                            if (hours < 0) {
                                hours = 23;
                                minutes = 59;
                                seconds = 59;
                                
                                state.userData.dailyGiftClaimed = false;
                                DailyGiftSystem.resetGifts();
                                
                                state.videoTaskCompleted = false;
                                localStorage.removeItem('wdsVideoTaskCompleted');
                                
                                const newTasks = generateSmallTasks(50, true);
                                state.smallTasks = newTasks;
                                localStorage.setItem('wdsSmallTasks', JSON.stringify(newTasks));
                                localStorage.setItem('wdsLastTaskRefresh', new Date().toISOString());
                            }
                        }
                    }
                    
                    state.limitedTime = { hours, minutes, seconds };
                    
                    const timerEl = document.getElementById('timer-display');
                    if (timerEl) {
                        timerEl.textContent = this.getFormattedTime();
                    }
                }, 1000);
            }

            static startEventTimer() {
                if (eventTimerInterval) clearInterval(eventTimerInterval);
                
                eventTimerInterval = setInterval(() => {
                    let { days, hours, minutes, seconds } = state.eventTimer;
                    
                    seconds--;
                    
                    if (seconds < 0) {
                        seconds = 59;
                        minutes--;
                        
                        if (minutes < 0) {
                            minutes = 59;
                            hours--;
                            
                            if (hours < 0) {
                                hours = 23;
                                days--;
                                
                                if (days < 0) {
                                    days = 6;
                                    hours = 23;
                                    minutes = 59;
                                    seconds = 59;
                                }
                            }
                        }
                    }
                    
                    state.eventTimer = { days, hours, minutes, seconds };
                    
                    const eventTimerEl = document.getElementById('event-timer');
                    if (eventTimerEl) {
                        eventTimerEl.textContent = `${days}d ${this.formatTime(hours)}h ${this.formatTime(minutes)}m ${this.formatTime(seconds)}s`;
                    }
                }, 1000);
            }

            static formatTime(time) {
                return time < 10 ? `0${time}` : time;
            }

            static getFormattedTime() {
                const { hours, minutes, seconds } = state.limitedTime;
                return `${this.formatTime(hours)}:${this.formatTime(minutes)}:${this.formatTime(seconds)}`;
            }
        }

        function handleAuthInput(field, value) {
            state.authForm[field] = value;
            
            if (field === 'password' && state.authMode === 'signup') {
                updatePasswordValidation(value);
            }
        }

        function updatePasswordValidation(password) {
            const hasLength = password.length >= 6;
            const hasNumber = /\d/.test(password);
            const hasSymbol = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            const reqLength = document.getElementById('req-length');
            const reqNumber = document.getElementById('req-number');
            const reqSymbol = document.getElementById('req-symbol');
            
            if (reqLength) {
                reqLength.classList.toggle('valid', hasLength);
                reqLength.querySelector('i').className = hasLength ? 'fas fa-check' : 'fas fa-times';
            }
            if (reqNumber) {
                reqNumber.classList.toggle('valid', hasNumber);
                reqNumber.querySelector('i').className = hasNumber ? 'fas fa-check' : 'fas fa-times';
            }
            if (reqSymbol) {
                reqSymbol.classList.toggle('valid', hasSymbol);
                reqSymbol.querySelector('i').className = hasSymbol ? 'fas fa-check' : 'fas fa-times';
            }
        }

        function handleSignUp(e) {
            e.preventDefault();
            const email = state.authForm.email;
            const password = state.authForm.password;
            const name = state.authForm.name;
            
            setState({ loading: true });
            
            AuthSystem.signUp(email, password, name)
                .then(userData => {
                    setState({
                        user: { email, name },
                        isAuthenticated: true,
                        userData,
                        currentView: 'main',
                        loading: false,
                        authForm: { email: '', password: '', name: '' }
                    });
                    updateTaskUnlockStatus();
                    showNotification(`Welcome to WDS! You received 180 coins (100 signup + 80 bonus)!`, 'success');
                })
                .catch(error => {
                    setState({ loading: false });
                    showNotification(error.message, 'error');
                });
        }

        function handleSignIn(e) {
            e.preventDefault();
            const email = state.authForm.email;
            const password = state.authForm.password;
            
            setState({ loading: true });
            
            AuthSystem.signIn(email, password)
                .then(userData => {
                    setState({
                        user: { email, name: userData.name },
                        isAuthenticated: true,
                        userData,
                        currentView: 'main',
                        loading: false,
                        authForm: { email: '', password: '', name: '' }
                    });
                    
                    updateTaskUnlockStatus();
                    
                    let message = `Welcome back, ${userData.name}!`;
                    if (userData.loginBonusGiven && userData.loginBonusGiven > 0) {
                        message += ` You received ${userData.loginBonusGiven} coins login bonus!`;
                    }
                    showNotification(message, 'success');
                })
                .catch(error => {
                    setState({ loading: false });
                    showNotification(error.message, 'error');
                });
        }

        function handleGuestAccess() {
            setState({
                user: { email: 'guest@wedropstuff.com', name: 'Guest' },
                isAuthenticated: true,
                userData: {
                    name: 'Guest',
                    email: 'guest@wedropstuff.com',
                    balance: 50,
                    xp: 0,
                    level: 1,
                    completedTasks: 0,
                    dailyGiftClaimed: false,
                    loginBonusClaimed: false,
                    profileCircleColor: '#71717a',
                    joinDate: new Date().toISOString()
                },
                currentView: 'main'
            });
            updateTaskUnlockStatus();
            showNotification('Welcome as Guest! Sign up to save progress and claim rewards.', 'info');
        }

        function handleSearch(e) {
            const query = e.target.value;
            state.searchQuery = query;
            
            clearTimeout(searchDebounceTimer);
            searchDebounceTimer = setTimeout(() => {
                updateSearchDropdown();
            }, 300);
        }

        function updateSearchDropdown() {
            const dropdown = document.getElementById('search-dropdown');
            if (!dropdown) return;
            
            if (state.searchQuery.trim().length === 0) {
                dropdown.classList.remove('active');
                return;
            }
            
            const q = state.searchQuery.toLowerCase();
            const matches = [
                ...state.tasks.filter(t => t.title.toLowerCase().includes(q)).map(t => ({...t, type: 'task'})),
                ...state.smallTasks.filter(t => t.title.toLowerCase().includes(q)).map(t => ({...t, type: 'smallTask'})),
                ...state.rewards.filter(r => r.name.toLowerCase().includes(q)).map(r => ({...r, type: 'reward'}))
            ].slice(0, 5);
            
            if (matches.length === 0) {
                dropdown.classList.remove('active');
                return;
            }
            
            dropdown.innerHTML = matches.map(item => {
                const highlightedTitle = highlightMatch(item.type === 'reward' ? item.name : item.title, q);
                let image = '';
                
                if (item.type === 'reward') {
                    image = item.icon;
                } else if (item.type === 'task') {
                    image = item.image;
                } else {
                    image = getCategoryTaskIcon(item.category);
                }
                
                return `
                    <div class="search-result-item" onclick="app.handleSearchResultClick('${item.id}', '${item.type}')">
                        <img src="${image}" class="search-result-img" alt="" onerror="this.src='${getCategoryTaskIcon('gift')}'">
                        <div class="search-result-info">
                            <div class="search-result-title">${highlightedTitle}</div>
                            <div class="search-result-desc">${item.type === 'task' ? 'Big Task' : item.type === 'smallTask' ? 'Quick Task' : 'Reward'}  ${item.reward || item.cost || item.coins} coins</div>
                        </div>
                    </div>
                `;
            }).join('');
            
            dropdown.classList.add('active');
        }

        function highlightMatch(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function handleSearchResultClick(id, type) {
            const dropdown = document.getElementById('search-dropdown');
            if (dropdown) dropdown.classList.remove('active');
            
            if (type === 'task') {
                const task = state.tasks.find(t => t.id == id);
                if (task) handleTaskClick(task);
            } else if (type === 'smallTask') {
                const task = state.smallTasks.find(t => t.id == id);
                if (task) handleSmallTaskClick(task);
            } else {
                setState({ currentView: 'rewards' });
                setTimeout(() => {
                    const rewardEl = document.querySelector(`[data-reward-id="${id}"]`);
                    if (rewardEl) {
                        rewardEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        rewardEl.classList.add('highlight-match');
                        setTimeout(() => rewardEl.classList.remove('highlight-match'), 2000);
                    }
                }, 100);
            }
        }

        function handleCommandK(e) {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                const searchInput = document.querySelector('.search-input');
                if (searchInput) {
                    searchInput.focus();
                }
            }
        }

        function handleTaskClick(task) {
            if (task.navigateTo === 'video') {
                if (state.videoTaskCompleted) {
                    showNotification('You have already completed the video task today!', 'info');
                    return;
                }
                
                window.open('https://youtube.com/shorts/MRPd67aBV_w?si=4zvWu6472kX8IIpC', '_blank');
                
                setTimeout(() => {
                    state.videoTaskCompleted = true;
                    localStorage.setItem('wdsVideoTaskCompleted', 'true');
                    const newBalance = state.userData.balance + 25;
                    state.userData.balance = newBalance;
                    
                    addTransaction('task', 25, 'Video Task', newBalance);
                    
                    const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                    if (users[state.user.email]) {
                        users[state.user.email].balance = newBalance;
                        localStorage.setItem('wdsUsers', JSON.stringify(users));
                    }
                    
                    LevelSystemManager.addXP(10);
                    showNotification('Video watched! You earned 25 coins!', 'success');
                    setState({ userData: state.userData });
                }, 5000);
                
                showNotification('Opening video... Watch to earn 25 coins!', 'info');
            } else if (task.navigateTo === 'search') {
                setState({ currentView: 'explore', activeDockItem: 'search' });
            } else if (task.navigateTo === 'gift') {
                setState({ currentView: 'daily-gift', activeDockItem: 'gift' });
            }
        }

        function handleSmallTaskClick(task) {
            if (task.completed) {
                showNotification('This task has already been completed!', 'info');
                return;
            }
            OfferSystem.completeSmallTask(task);
        }

        function handleGetCoins(task) {
            handleTaskClick(task);
        }

        function handleOfferClick(offer) {
            setState({
                currentView: 'explore',
                activeDockItem: 'search',
                selectedOfferCategory: offer.category,
                exploreCategory: offer.category
            });
        }

        function handleCategoryTaskClick(task) {
            OfferSystem.completeSmallTask(task);
        }

        function handleStartTaskButton() {
            const randomLink = TASK_LINKS[Math.floor(Math.random() * TASK_LINKS.length)];
            window.open(randomLink, '_blank');
            startTaskWarningPhase(state.selectedOffer);
        }

        function startTaskWarningPhase(task) {
            setState({ 
                activeModal: 'small-task-complete', 
                taskLoaderStage: 'warning',
                taskCountdown: 120,
                warningPhase: 0
            });
            
            let timeLeft = 120;
            
            if (taskTimerInterval) clearInterval(taskTimerInterval);
            
            taskTimerInterval = setInterval(() => {
                timeLeft--;
                
                if (timeLeft === 60) {
                    setState({ warningPhase: 1 }, true);
                }
                
                setState({ taskCountdown: timeLeft }, true);
                
                if (timeLeft <= 0) {
                    clearInterval(taskTimerInterval);
                    completeTaskReward(task);
                }
            }, 1000);
        }

        function completeTaskReward(task) {
            setState({ taskLoaderStage: 'complete' });
            
            setTimeout(() => {
                const newBalance = state.userData.balance + task.coins;
                state.userData.balance = newBalance;
                
                addTransaction('task', task.coins, task.title, newBalance);
                
                LevelSystemManager.addXP(Math.floor(task.coins / 3));
                TaskSystem.updateBigTaskProgress(task.category, task.coins);
                
                const updatedTasks = state.smallTasks.map(t => {
                    if (t.id === task.id) {
                        return { ...t, completed: true };
                    }
                    return t;
                });
                
                const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                if (users[state.user.email]) {
                    users[state.user.email].balance = newBalance;
                    localStorage.setItem('wdsUsers', JSON.stringify(users));
                }
                
                showNotification(`You earned ${task.coins} coins!`, 'success');
                setState({ 
                    activeModal: null,
                    selectedOffer: null,
                    taskLoaderStage: 'idle',
                    smallTasks: updatedTasks,
                    warningPhase: 0
                });
            }, 1500);
        }

        function handleDockItemClick(itemId) {
            setState({ activeDockItem: itemId });
            
            switch(itemId) {
                case 'home':
                    setState({ currentView: 'main' });
                    break;
                case 'search':
                    setState({ currentView: 'explore' });
                    break;
                case 'gift':
                    setState({ currentView: 'daily-gift' });
                    break;
                case 'wallet':
                    if (state.isAuthenticated && state.user.email === 'guest@wedropstuff.com') {
                        showNotification('Please sign up to access rewards marketplace.', 'info');
                        setState({ currentView: 'auth', authMode: 'signup' });
                    } else if (state.isAuthenticated) {
                        setState({ currentView: 'rewards' });
                    } else {
                        setState({ currentView: 'auth' });
                    }
                    break;
                case 'user':
                    if (state.isAuthenticated) {
                        setState({ currentView: 'profile' });
                    } else {
                        setState({ currentView: 'auth' });
                    }
                    break;
            }
        }

        function handleRewardCategorySelect(categoryId) {
            setState({ selectedRewardCategory: categoryId });
        }

        function handleExploreCategorySelect(categoryId) {
            setState({ exploreCategory: categoryId });
        }

        function handleProfileUpdate(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            
            const updates = {
                name: formData.get('name') || state.userData.name
            };
            
            try {
                const updatedData = AuthSystem.updateProfile(updates);
                setState({ userData: { ...state.userData, ...updatedData } });
                showNotification('Profile updated successfully!', 'success');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        function handlePasswordChange(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            
            const currentPassword = formData.get('currentPassword');
            const newPassword = formData.get('newPassword');
            const confirmPassword = formData.get('confirmPassword');
            
            if (newPassword !== confirmPassword) {
                showNotification('New passwords do not match', 'error');
                return;
            }
            
            try {
                AuthSystem.changePassword(currentPassword, newPassword);
                showNotification('Password changed successfully!', 'success');
                form.reset();
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        async function requestCameraPermission() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                stream.getTracks().forEach(track => track.stop());
                return true;
            } catch (err) {
                console.log('Camera permission denied or not available');
                return false;
            }
        }

        function handleAvatarFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
                    if (users[state.user.email]) {
                        users[state.user.email].avatar = event.target.result;
                        users[state.user.email].avatarType = 'image';
                        localStorage.setItem('wdsUsers', JSON.stringify(users));
                    }
                    setState({ 
                        userData: { 
                            ...state.userData, 
                            avatar: event.target.result,
                            avatarType: 'image'
                        },
                        avatarPickerOpen: false
                    });
                    showNotification('Profile picture updated!', 'success');
                };
                reader.readAsDataURL(file);
            }
        }

        function handleEmojiSelect(emoji) {
            const users = JSON.parse(localStorage.getItem('wdsUsers') || '{}');
            if (users[state.user.email]) {
                users[state.user.email].avatar = emoji;
                users[state.user.email].avatarType = 'emoji';
                localStorage.setItem('wdsUsers', JSON.stringify(users));
            }
            setState({ 
                userData: { 
                    ...state.userData, 
                    avatar: emoji,
                    avatarType: 'emoji'
                },
                avatarPickerOpen: false
            });
            showNotification('Avatar updated!', 'success');
        }

        function handleDailyGiftSelect(giftIndex) {
            if (state.userData.dailyGiftClaimed) {
                showNotification('You have already claimed your daily gift today!', 'info');
                return;
            }
            
            DailyGiftSystem.claimGift(giftIndex);
        }

        function handleStartDailyGift() {
            if (state.userData.dailyGiftClaimed) {
                showNotification('Come back tomorrow for your next daily gift!', 'info');
                return;
            }
            
            const newGifts = DailyGiftSystem.generateGiftValues();
            setState({ dailyGifts: newGifts });
            showNotification('Select a gift box to reveal your prize!', 'info');
        }

        function handleGiftSlide(index) {
            setState({ giftSlideIndex: index });
        }

        function handleClaimReward(reward) {
            RewardsSystem.initiateClaim(reward);
        }

        function handleConfirmRewardClaim() {
            if (state.confirmingReward) {
                RewardsSystem.confirmClaim(state.confirmingReward);
            }
        }

        function handleGoToEarn() {
            setState({ 
                activeModal: null,
                confirmingReward: null,
                confirmationStage: 'idle',
                currentView: 'explore',
                activeDockItem: 'search'
            });
        }

        function handleShare(platform) {
            RewardsSystem.shareSite(platform);
        }

        function handleWithdrawSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            
            const amount = parseFloat(formData.get('amount'));
            const address = formData.get('address');
            
            if (!amount || amount < 20) {
                showNotification('Minimum withdrawal is $20', 'error');
                return;
            }
            
            CardSystem.withdrawFunds(state.withdrawMethod, amount, address);
            form.reset();
        }

        function handleCardActivation() {
            CardSystem.activateCard();
        }

        function toggleCardVisibility() {
            setState({ cardHidden: !state.cardHidden });
        }

        function handleWithdrawMethodChange(method) {
            setState({ withdrawMethod: method });
        }

        function closeModal() {
            if (taskTimerInterval) clearInterval(taskTimerInterval);
            if (hiddenTimerInterval) clearInterval(hiddenTimerInterval);
            if (confirmationInterval) clearInterval(confirmationInterval);
            setState({ 
                activeModal: null, 
                selectedTask: null,
                selectedOffer: null,
                taskLoaderStage: 'idle',
                currentQuizQuestion: 0,
                quizAnswers: [],
                taskMessageIndex: 0,
                selectedOfferCategory: null,
                categoryTasks: [],
                warningPhase: 0,
                taskCountdown: 0,
                confirmationStage: 'idle',
                confirmingReward: null
            });
        }

        function toggleAuthMode() {
            setState({ 
                authMode: state.authMode === 'signin' ? 'signup' : 'signin',
                authForm: { email: '', password: '', name: '' }
            });
        }

        function toggleAvatarPicker() {
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                requestCameraPermission();
            }
            setState({ avatarPickerOpen: !state.avatarPickerOpen });
        }

        function dismissLevelUp() {
            setState({ showLevelUp: false, newLevel: null });
        }

        function handleScroll() {
            const scrollPosition = window.scrollY;
            const shouldShrink = scrollPosition > 50;
            
            if (state.headerShrunk !== shouldShrink) {
                setState({ headerShrunk: shouldShrink });
            }
        }

        function handleContactSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            
            const email = formData.get('contactEmail');
            const message = formData.get('contactMessage');
            
            const contacts = JSON.parse(localStorage.getItem('wdsContacts') || '[]');
            contacts.push({
                email,
                message,
                date: new Date().toISOString(),
                status: 'pending'
            });
            localStorage.setItem('wdsContacts', JSON.stringify(contacts));
            
            showNotification('Message sent! We will contact you within 24-48 hours.', 'success');
            form.reset();
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
            
            notification.querySelector('.notification-close').onclick = () => {
                notification.remove();
            };
        }

        function showBigTaskDetails(taskId) {
            const task = state.bigTasks.find(t => t.id === taskId);
            if (!task) return;
            
            if (!task.unlocked) {
                showNotification(`Unlocks at Level ${task.unlockLevel}`, 'info');
                return;
            }
            
            setState({
                activeModal: 'big-task-details',
                selectedOffer: task
            });
        }

        function openLightbox(src) {
            if (!src) return;
            setState({ currentLightbox: src });
        }

        function closeLightbox() {
            setState({ currentLightbox: null });
        }

        function handleChartPeriodChange(period) {
            setState({ chartPeriod: period });
        }

        function render() {
            const { 
                currentView, 
                authMode, 
                isAuthenticated, 
                userData,
                activeModal,
                selectedTask,
                selectedOffer,
                loading,
                searchQuery,
                selectedCategory,
                tasks,
                smallTasks,
                offers,
                dailyGifts,
                rewards,
                rewardCategories,
                selectedRewardCategory,
                exploreCategory,
                headerShrunk,
                activeDockItem,
                dockItems,
                taskLoaderStage,
                taskCountdown,
                authForm,
                giftSlideIndex,
                avatarPickerOpen,
                emojis,
                showLevelUp,
                newLevel,
                bigTasks,
                warningPhase,
                confirmationStage,
                confirmingReward,
                currentLightbox,
                eventTimer,
                chartPeriod,
                cardHidden,
                virtualCardActivated,
                withdrawMethod
            } = state;

            const root = document.getElementById('root');
            
            let filteredTasks = tasks;
            if (searchQuery.trim()) {
                const q = searchQuery.toLowerCase();
                filteredTasks = filteredTasks.filter(task => 
                    task.title.toLowerCase().includes(q) ||
                    task.description.toLowerCase().includes(q)
                );
            }
            if (selectedCategory) {
                filteredTasks = filteredTasks.filter(task => task.category === selectedCategory);
            }
            
            const filteredRewards = RewardsSystem.getFilteredRewards();
            const filteredSmallTasks = RewardsSystem.getFilteredSmallTasks();
            
            const needsBackButton = ['rewards', 'profile', 'daily-gift', 'explore'].includes(currentView);
            
            const levelInfo = LevelSystem.getLevelInfo(userData.level || 1);
            const levelProgress = LevelSystemManager.getProgressToNext();
            const userTitle = LevelSystemManager.getCurrentTitle();
            
            const usdValue = convertCoinsToUSD(userData.balance);
            
            const header = `
                <header class="header ${headerShrunk ? 'shrink' : ''}">
                    <div class="header-left">
                        ${needsBackButton ? `
                            <button class="back-button" onclick="app.setState({ currentView: 'main' })">
                                <i class="fas fa-arrow-left"></i>
                                <span>Back</span>
                            </button>
                        ` : ''}
                        <div class="logo-container">
                            <div class="logo-icon">
                                <img src="${LOGO_IMAGE}" alt="WDS Logo">
                            </div>
                            <div class="header-logo">WDS</div>
                        </div>
                    </div>
                    <div class="header-actions">
                        ${isAuthenticated ? `
                            <div class="coin-display">
                                <i class="fas fa-coins"></i>
                                <span>${userData.balance} (${formatUSD(usdValue)})</span>
                            </div>
                            <div class="user-avatar" onclick="app.handleDockItemClick('user')" style="position: relative; border: 2px solid ${userData.profileCircleColor || '#71717a'};">
                                ${userData.avatarType === 'image' ? `<img src="${userData.avatar}" alt="">` : 
                                  userData.avatarType === 'emoji' ? userData.avatar : 
                                  userData.name.charAt(0).toUpperCase()}
                                <div class="level-badge" style="background: ${userData.profileCircleColor || '#71717a'};">${userData.level || 1}</div>
                            </div>
                        ` : `
                            <button class="ghost-button" onclick="app.setState({ currentView: 'auth' })" style="padding: 0.5rem 1rem; font-size: 0.75rem;">
                                Sign In
                            </button>
                        `}
                    </div>
                </header>
            `;
            
            const authScreen = `
                <div class="main-content">
                    <div class="auth-screen">
                        <div class="auth-header-banner">
                            <i class="fas fa-gift"></i>
                            <span>Get 180 Coins</span>
                        </div>
                        <h1 class="auth-title">WDS</h1>
                        <p class="auth-subtitle">Earn free rewards by completing simple tasks. Start your journey today.</p>
                        
                        ${authMode === 'signin' ? `
                            <form class="auth-form" onsubmit="app.handleSignIn(event)">
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input 
                                        type="email" 
                                        name="email" 
                                        class="form-input" 
                                        placeholder="Enter your email"
                                        required
                                        autocomplete="email"
                                        value="${authForm.email}"
                                        oninput="app.handleAuthInput('email', this.value)"
                                        ${loading ? 'disabled' : ''}
                                    />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Password</label>
                                    <input 
                                        type="password" 
                                        name="password" 
                                        class="form-input" 
                                        placeholder="Enter your password"
                                        required
                                        autocomplete="current-password"
                                        value="${authForm.password}"
                                        oninput="app.handleAuthInput('password', this.value)"
                                        ${loading ? 'disabled' : ''}
                                    />
                                </div>
                                <button 
                                    type="submit" 
                                    class="shimmer-button"
                                    ${loading ? 'disabled' : ''}
                                >
                                    ${loading ? 'Signing In...' : 'Sign In & Get 80 Coins'}
                                </button>
                                <button 
                                    type="button" 
                                    class="ghost-button"
                                    onclick="app.handleGuestAccess()"
                                    ${loading ? 'disabled' : ''}
                                >
                                    Continue as Guest
                                </button>
                                <div class="auth-toggle">
                                    <span class="auth-toggle-text">Don't have an account?</span>
                                    <button type="button" class="auth-toggle-button" onclick="app.toggleAuthMode()">
                                        Sign Up
                                    </button>
                                </div>
                            </form>
                        ` : `
                            <form class="auth-form" onsubmit="app.handleSignUp(event)">
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input 
                                        type="text" 
                                        name="name" 
                                        class="form-input" 
                                        placeholder="Enter your name"
                                        autocomplete="name"
                                        value="${authForm.name}"
                                        oninput="app.handleAuthInput('name', this.value)"
                                        ${loading ? 'disabled' : ''}
                                    />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input 
                                        type="email" 
                                        name="email" 
                                        class="form-input" 
                                        placeholder="Enter your email"
                                        required
                                        autocomplete="email"
                                        value="${authForm.email}"
                                        oninput="app.handleAuthInput('email', this.value)"
                                        ${loading ? 'disabled' : ''}
                                    />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Password</label>
                                    <input 
                                        type="password" 
                                        name="password" 
                                        class="form-input" 
                                        placeholder="Create a password"
                                        required
                                        minlength="6"
                                        autocomplete="new-password"
                                        value="${authForm.password}"
                                        oninput="app.handleAuthInput('password', this.value)"
                                        ${loading ? 'disabled' : ''}
                                    />
                                    <div class="password-requirements">
                                        <div class="password-req" id="req-length">
                                            <i class="fas fa-times"></i>
                                            <span>Minimum 6 characters</span>
                                        </div>
                                        <div class="password-req" id="req-number">
                                            <i class="fas fa-times"></i>
                                            <span>Contains a number</span>
                                        </div>
                                        <div class="password-req" id="req-symbol">
                                            <i class="fas fa-times"></i>
                                            <span>Contains a symbol</span>
                                        </div>
                                    </div>
                                </div>
                                <button 
                                    type="submit" 
                                    class="shimmer-button"
                                    ${loading ? 'disabled' : ''}
                                >
                                    ${loading ? 'Creating Account...' : 'Create Account'}
                                </button>
                                <div class="auth-toggle">
                                    <span class="auth-toggle-text">Already have an account?</span>
                                    <button type="button" class="auth-toggle-button" onclick="app.toggleAuthMode()">
                                        Sign In
                                    </button>
                                </div>
                            </form>
                        `}
                    </div>
                </div>
            `;
            
            const mainDashboard = `
                <div class="main-content">
                    <div class="banner motivation-banner">
                        <div class="banner-content">
                            <div class="banner-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="banner-text">
                                <div class="banner-title">Limited Time Event!</div>
                                <div class="banner-description" style="color: #fca5a5;">
                                    Complete tasks daily to unlock massive rewards! Start earning now! 
                                </div>
                                <div style="font-size: 0.75rem; font-weight: 700; margin-top: 0.25rem; color: #ef4444;">
                                    Ends in: <span id="event-timer">${eventTimer.days}d ${eventTimer.hours < 10 ? '0'+eventTimer.hours : eventTimer.hours}h ${eventTimer.minutes < 10 ? '0'+eventTimer.minutes : eventTimer.minutes}m ${eventTimer.seconds < 10 ? '0'+eventTimer.seconds : eventTimer.seconds}s</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="banner">
                        <div class="banner-content">
                            <div class="banner-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="banner-text">
                                <div class="banner-title">Daily Reset Timer</div>
                                <div class="banner-description" id="timer-display">${TimerSystem.getFormattedTime()}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section" style="margin-bottom: 1.5rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.875rem; font-weight: 600;">Level ${userData.level || 1} - ${userTitle}</span>
                            <span style="font-size: 0.75rem; color: var(--zinc-500);">${Math.floor(levelProgress.percent)}%</span>
                        </div>
                        <div class="progress-bar" style="height: 8px;">
                            <div class="progress-fill" style="width: ${levelProgress.percent}%; background: linear-gradient(90deg, ${userData.profileCircleColor || '#71717a'}, ${levelInfo.color});"></div>
                        </div>
                        <div style="font-size: 0.75rem; color: var(--zinc-500); margin-top: 0.5rem;">
                            ${levelProgress.current} / ${levelProgress.total} XP to next level
                        </div>
                    </div>
                    
                    <section class="daily-gifts-section">
                        <h3 class="gifts-title">Daily Gift</h3>
                        <p class="gifts-subtitle">${userData.dailyGiftClaimed ? 'Come back tomorrow!' : 'Claim your free daily gift!'}</p>
                        
                        <div class="daily-gifts-slider">
                            <div class="daily-gifts-container" style="transform: translateX(-${giftSlideIndex * 100}%)">
                                <div class="daily-gifts-slide">
                                    <div class="gifts-grid">
                                        ${dailyGifts.map((gift, index) => `
                                            <div 
                                                class="gift-box ${gift.revealed ? 'selected' : ''}"
                                                onclick="app.handleDailyGiftSelect(${index})"
                                            >
                                                <div class="gift-icon">
                                                    <i class="fas fa-${gift.revealed ? (gift.type === 'empty' ? 'times' : 'coins') : 'gift'}"></i>
                                                </div>
                                                <div class="gift-value">
                                                    ${gift.revealed ? (gift.type === 'empty' ? 'Empty' : `+${gift.value}`) : '?'}
                                                </div>
                                                <div class="gift-label">
                                                    ${gift.revealed ? (gift.type === 'empty' ? 'Try again tomorrow' : 'Coins') : 'Gift Box'}
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <button 
                                        class="shimmer-button"
                                        onclick="app.handleStartDailyGift()"
                                        ${userData.dailyGiftClaimed ? 'disabled' : ''}
                                        style="max-width: 300px; margin: 0 auto;"
                                    >
                                        ${userData.dailyGiftClaimed ? 'Already Claimed Today' : 'Start Daily Gift'}
                                    </button>
                                </div>
                                <div class="daily-gifts-slide">
                                    <div class="gift-media-wrapper">
                                        <video autoplay loop muted playsinline>
                                            <source src="${SLIDER_VIDEO}" type="video/mp4">
                                        </video>
                                    </div>
                                </div>
                                <div class="daily-gifts-slide">
                                    <div class="gift-media-wrapper" style="padding: 0;">
                                        <img src="${SLIDER_IMAGE}" style="cursor: pointer;" onclick="app.openLightbox('${SLIDER_IMAGE}')" alt="Featured">
                                    </div>
                                </div>
                                <div class="daily-gifts-slide">
                                    <div class="gift-media-wrapper" style="padding: 0;">
                                        <img src="${SLIDER_IMAGE2}" style="cursor: pointer;" onclick="app.openLightbox('${SLIDER_IMAGE2}')" alt="Featured 2">
                                    </div>
                                </div>
                                <div class="daily-gifts-slide">
                                    <div class="gift-media-wrapper" style="padding: 0;">
                                        <img src="${SLIDER_IMAGE3}" style="cursor: pointer;" onclick="app.openLightbox('${SLIDER_IMAGE3}')" alt="Featured 3">
                                    </div>
                                </div>
                            </div>
                            <div class="gift-slider-dots">
                                ${[0,1,2,3,4].map(i => `
                                    <div class="gift-dot ${giftSlideIndex === i ? 'active' : ''}" onclick="app.handleGiftSlide(${i})"></div>
                                `).join('')}
                            </div>
                        </div>
                    </section>
                    
                    <div class="action-search-bar">
                        <i class="fas fa-search search-icon"></i>
                        <input 
                            type="text" 
                            class="search-input" 
                            value="${searchQuery}"
                            oninput="app.handleSearch(event)"
                            placeholder="Search offers, tasks, rewards..."
                            autocomplete="off"
                        />
                        <div class="search-dropdown" id="search-dropdown"></div>
                    </div>
                    
                    <section>
                        <h3 class="section-title">Available Offers</h3>
                        <div class="offers-grid">
                            ${offers.map(offer => `
                                <div 
                                    class="offer-card ${offer.hot ? 'hot-offer' : ''} ${selectedCategory === offer.id ? 'elevated' : ''}" 
                                    onclick='app.handleOfferClick(${JSON.stringify(offer).replace(/'/g, "&apos;")})'
                                >
                                    <div class="offer-icon">
                                        <img src="${offer.icon}" alt="${offer.label}">
                                    </div>
                                    <span class="offer-label">${offer.label}</span>
                                    <span class="offer-subtext">${offer.subtext}</span>
                                    <span style="font-size: 0.75rem; color: var(--warning-color); margin-top: 0.5rem;">+${offer.coins} coins</span>
                                </div>
                            `).join('')}
                        </div>
                    </section>
                    
                    <section>
                        <div class="tasks-header">
                            <h3 class="section-title">Quick Navigation</h3>
                            <button class="view-all" onclick="app.setState({ currentView: 'explore' })">View All</button>
                        </div>
                        
                        <div class="task-list">
                            ${filteredTasks.map(task => `
                                <div 
                                    class="task-card ${task.status}"
                                    onclick='app.handleTaskClick(${JSON.stringify(task).replace(/'/g, "&apos;")})'
                                >
                                    <div class="task-info">
                                        <span class="task-badge">${task.type}</span>
                                        <h4 class="task-title">${task.title}</h4>
                                        <p class="task-description">${task.description}</p>
                                        <div class="task-action">
                                            GET COINS <i class="fas fa-chevron-right" style="font-size: 10px;"></i>
                                        </div>
                                    </div>
                                    <div class="task-image" style="background: transparent; border: none;">
                                        <img src="${task.image}" alt="${task.title}" style="cursor: pointer;" onclick="event.stopPropagation(); app.openLightbox('${task.image}')">
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </section>
                    
                    <section>
                        <div class="tasks-header">
                            <h3 class="section-title">Big Tasks (Level Up)</h3>
                            <button class="view-all" onclick="app.setState({ currentView: 'explore' })">View All</button>
                        </div>
                        <div class="task-list">
                            ${bigTasks.map(task => `
                                <div 
                                    class="task-card ${task.completed ? 'completed' : ''} ${!task.unlocked ? 'locked' : ''}"
                                    onclick="app.showBigTaskDetails('${task.id}')"
                                    style="${task.completed ? 'opacity: 0.6;' : ''}"
                                >
                                    <div class="task-info">
                                        <span class="task-badge" style="background: ${task.unlocked ? 'rgba(139, 92, 246, 0.15)' : 'rgba(100, 100, 100, 0.15)'}; color: ${task.unlocked ? 'var(--primary-color)' : 'var(--zinc-500)'}; border: 1px solid ${task.unlocked ? 'rgba(139, 92, 246, 0.3)' : 'rgba(100, 100, 100, 0.3)'};">
                                            ${task.unlocked ? 'BIG TASK' : `LOCK (LV ${task.unlockLevel})`}
                                        </span>
                                        <h4 class="task-title">${task.title} ${task.completed ? '(Completed)' : ''}</h4>
                                        <p class="task-description">${task.description}</p>
                                        ${task.unlocked ? `
                                            <div style="margin-top: 0.5rem; color: ${task.reward.color}; font-weight: 700; font-size: 0.75rem;">
                                                Reward: ${task.reward.value} Title
                                            </div>
                                        ` : `
                                            <div style="margin-top: 0.5rem; color: var(--zinc-600); font-weight: 700; font-size: 0.75rem;">
                                                Complete to unlock: ${task.reward.value} Title
                                            </div>
                                        `}
                                        <div class="task-action">
                                            ${task.completed ? 'COMPLETED' : task.unlocked ? 'VIEW DETAILS' : `UNLOCKS AT LVL ${task.unlockLevel}`} 
                                            <i class="fas fa-chevron-right" style="font-size: 10px;"></i>
                                        </div>
                                    </div>
                                    <div class="task-image" style="width: 120px; height: 120px; background: linear-gradient(135deg, ${task.unlocked ? task.reward.color : '#3f3f46'}, ${task.unlocked ? task.reward.color + '80' : '#27272a'}); display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-${task.unlocked ? 'trophy' : 'lock'}" style="font-size: 2rem; color: white;"></i>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </section>
                </div>
                
                <div class="minimalist-dock">
                    <div class="dock-container">
                        ${dockItems.map(item => `
                            <div 
                                class="dock-item ${activeDockItem === item.id ? 'active' : ''}"
                                onclick="app.handleDockItemClick('${item.id}')"
                            >
                                <i class="fas fa-${item.icon}"></i>
                                <div class="dock-tooltip">${item.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const explorePage = `
                <div class="main-content">
                    <div class="explore-page">
                        <h2 class="explore-title">Explore Tasks</h2>
                        
                        <div class="explore-categories">
                            <div class="explore-category-tab ${exploreCategory === 'all' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('all')">All</div>
                            <div class="explore-category-tab ${exploreCategory === 'hot' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('hot')">Hot</div>
                            <div class="explore-category-tab ${exploreCategory === 'ai' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('ai')">AI</div>
                            <div class="explore-category-tab ${exploreCategory === 'games' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('games')">Games</div>
                            <div class="explore-category-tab ${exploreCategory === 'crypto' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('crypto')">Crypto</div>
                            <div class="explore-category-tab ${exploreCategory === 'social' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('social')">Social</div>
                            <div class="explore-category-tab ${exploreCategory === 'content' ? 'active' : ''}" onclick="app.handleExploreCategorySelect('content')">Content</div>
                        </div>
                        
                        <h3 class="section-title" style="margin-bottom: 1rem;">Quick Tasks ${exploreCategory === 'hot' ? '(100-240 coins)' : '(5-40 coins)'}</h3>
                        <div class="small-tasks-grid">
                            ${filteredSmallTasks.map(task => `
                                <div 
                                    class="small-task-card ${task.completed ? 'completed' : ''}"
                                    onclick='app.handleSmallTaskClick(${JSON.stringify(task).replace(/'/g, "&apos;")})'
                                    style="${task.completed ? 'opacity: 0.5;' : ''}"
                                >
                                    <div class="small-task-icon">
                                        <img src="${getCategoryTaskIcon(task.category)}" alt="${task.category}">
                                    </div>
                                    <div class="small-task-info">
                                        <div class="small-task-title">${task.title}</div>
                                        <div class="small-task-category">${task.category}</div>
                                    </div>
                                    <div class="small-task-reward">
                                        <i class="fas fa-coins"></i> ${task.coins}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <h3 class="section-title" style="margin: 2rem 0 1rem;">Big Tasks (Level Rewards)</h3>
                        <div class="task-list-vertical">
                            ${bigTasks.map(task => `
                                <div 
                                    class="task-card ${task.completed ? 'completed' : ''} ${!task.unlocked ? 'locked' : ''}"
                                    onclick="app.showBigTaskDetails('${task.id}')"
                                    style="${task.completed ? 'opacity: 0.6;' : ''}"
                                >
                                    <div class="task-image" style="width: 120px; height: 120px; background: linear-gradient(135deg, ${task.unlocked ? task.reward.color : '#3f3f46'}, ${task.unlocked ? task.reward.color + '80' : '#27272a'}); display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-${task.unlocked ? (task.completed ? 'check' : 'trophy') : 'lock'}" style="font-size: 3rem; color: white;"></i>
                                    </div>
                                    <div class="task-info">
                                        <span class="task-badge" style="background: ${task.unlocked ? 'rgba(139, 92, 246, 0.15)' : 'rgba(100, 100, 100, 0.15)'}; color: ${task.unlocked ? 'var(--primary-color)' : 'var(--zinc-500)'}; border: 1px solid ${task.unlocked ? 'rgba(139, 92, 246, 0.3)' : 'rgba(100, 100, 100, 0.3)'};">
                                            ${task.unlocked ? (task.completed ? 'COMPLETED' : 'BIG TASK') : 'LOCKED'}
                                        </span>
                                        <h4 class="task-title" style="font-size: 1.25rem;">${task.title}</h4>
                                        <p class="task-description" style="font-size: 0.875rem;">${task.description}</p>
                                        ${!task.unlocked ? `<div style="font-size: 0.75rem; color: var(--danger-color); font-weight: 700;">Unlocks at Level ${task.unlockLevel}</div>` : ''}
                                        ${task.unlocked ? `
                                            <div style="margin-top: 0.5rem; color: ${task.reward.color}; font-weight: 700;">
                                                Reward: ${task.reward.value} Title
                                            </div>
                                            <div class="progress-container" style="margin-top: 1rem;">
                                                <div class="progress-label">
                                                    <span>Progress</span>
                                                    <span>${Math.floor((task.currentProgress / task.targetCoins) * 100)}%</span>
                                                </div>
                                                <div class="progress-bar">
                                                    <div class="progress-fill" style="width: ${(task.currentProgress / task.targetCoins) * 100}%"></div>
                                                </div>
                                                <div style="font-size: 0.75rem; color: var(--zinc-500); margin-top: 0.25rem;">
                                                    ${task.currentProgress} / ${task.targetCoins} coins
                                                </div>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="minimalist-dock">
                    <div class="dock-container">
                        ${dockItems.map(item => `
                            <div 
                                class="dock-item ${activeDockItem === item.id ? 'active' : ''}"
                                onclick="app.handleDockItemClick('${item.id}')"
                            >
                                <i class="fas fa-${item.icon}"></i>
                                <div class="dock-tooltip">${item.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const transactions = getTransactionHistory().slice(0, 10);
            
            const rewardsPage = `
                <div class="main-content" style="position: relative;">
                    <div class="rewards-page">
                        <div class="pull-to-refresh">
                            <div class="pull-to-refresh-spinner"></div>
                        </div>
                        
                        <div class="rewards-balance-card">
                            <div class="balance-amount">
                                <i class="fas fa-coins"></i>
                                ${userData.balance}
                            </div>
                            <div class="balance-usd">${formatUSD(usdValue)} USD</div>
                            <div class="balance-label">Available Coins</div>
                            <button class="ghost-button" onclick="app.setState({ currentView: 'main' })" style="max-width: 200px; margin: 0 auto;">
                                Earn More Coins
                            </button>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-box-value">${userData.completedTasks}</div>
                                <div class="stat-box-label">Tasks Done</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-box-value">${getTransactionHistory().filter(t => t.type === 'purchase').length}</div>
                                <div class="stat-box-label">Redeemed</div>
                            </div>
                        </div>

                        <!-- Virtual Card Section -->
                        <div class="virtual-card-section">
                            <h3 class="section-title" style="text-align: center; margin-bottom: 1.5rem;">Virtual Card</h3>
                            
                            ${!virtualCardActivated ? `
                                <div class="card-inactive">
                                    <div class="card-inactive-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <h4 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Activate Your Card</h4>
                                    <p style="color: var(--zinc-500); font-size: 0.875rem; margin-bottom: 1.5rem;">Get a virtual card to withdraw funds</p>
                                    <div style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem; text-align: center;">
                                        <div style="font-size: 0.875rem; color: var(--zinc-400); margin-bottom: 0.25rem;">Activation Cost</div>
                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);">1,000 coins</div>
                                    </div>
                                    <button class="shimmer-button" onclick="app.handleCardActivation()" style="max-width: 250px;">
                                        <i class="fas fa-bolt" style="margin-right: 0.5rem;"></i>
                                        Activate Now
                                    </button>
                                </div>
                            ` : `
                                <div class="virtual-card">
                                    <button class="card-toggle-btn" onclick="app.toggleCardVisibility()">
                                        <i class="fas fa-${cardHidden ? 'eye' : 'eye-slash'}"></i>
                                    </button>
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem;">
                                        <div class="card-chip"></div>
                                        <div class="card-logo">WDS</div>
                                    </div>
                                    <div class="card-number ${cardHidden ? 'card-hidden' : ''}" onclick="app.toggleCardVisibility()">
                                        ${cardHidden ? '**** **** **** ****' : userData.cardNumber}
                                    </div>
                                    <div class="card-details">
                                        <div>
                                            <div style="font-size: 0.625rem; color: var(--zinc-500); text-transform: uppercase; margin-bottom: 0.25rem;">Card Holder</div>
                                            <div class="card-holder">${userData.name}</div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="font-size: 0.625rem; color: var(--zinc-500); text-transform: uppercase; margin-bottom: 0.25rem;">Expires</div>
                                            <div class="card-expiry">${cardHidden ? '**/**' : userData.cardExpiry}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-info-row">
                                    <div class="card-info-item">
                                        <div class="card-info-label">CVV</div>
                                        <div class="card-info-value">${cardHidden ? '***' : userData.cardCvv}</div>
                                    </div>
                                    <div class="card-info-item">
                                        <div class="card-info-label">Type</div>
                                        <div class="card-info-value">Virtual Debit</div>
                                    </div>
                                    <div class="card-info-item">
                                        <div class="card-info-label">Status</div>
                                        <div class="card-info-value" style="color: #10b981;">Active</div>
                                    </div>
                                </div>
                            `}
                        </div>

                        <!-- Withdrawal Section -->
                        ${virtualCardActivated ? `
                            <div class="withdraw-section">
                                <h4 class="profile-section-title" style="margin-bottom: 1rem;">Withdraw Funds</h4>
                                <div class="withdraw-minimum">Minimum withdrawal: $20.00 USD</div>
                                
                                <div class="withdraw-methods">
                                    <div class="withdraw-method ${withdrawMethod === 'crypto' ? 'active' : ''}" onclick="app.handleWithdrawMethodChange('crypto')">
                                        <i class="fas fa-bitcoin"></i> Crypto
                                    </div>
                                    <div class="withdraw-method ${withdrawMethod === 'bank' ? 'active' : ''}" onclick="app.handleWithdrawMethodChange('bank')">
                                        <i class="fas fa-university"></i> Bank Transfer
                                    </div>
                                    <div class="withdraw-method ${withdrawMethod === 'paypal' ? 'active' : ''}" onclick="app.handleWithdrawMethodChange('paypal')">
                                        <i class="fab fa-paypal"></i> PayPal
                                    </div>
                                </div>

                                <form onsubmit="app.handleWithdrawSubmit(event)">
                                    <input 
                                        type="number" 
                                        name="amount" 
                                        class="withdraw-input" 
                                        placeholder="Amount in USD (min $20)"
                                        min="20"
                                        step="0.01"
                                        required
                                    />
                                    <input 
                                        type="text" 
                                        name="address" 
                                        class="withdraw-input" 
                                        placeholder="${withdrawMethod === 'crypto' ? 'Wallet Address' : withdrawMethod === 'bank' ? 'IBAN / Account Number' : 'PayPal Email'}"
                                        required
                                    />
                                    <button type="submit" class="shimmer-button" style="margin-top: 0.5rem;">
                                        <i class="fas fa-paper-plane" style="margin-right: 0.5rem;"></i>
                                        Withdraw
                                    </button>
                                </form>
                            </div>
                        ` : ''}
                        
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Balance History</div>
                                <div class="chart-tabs">
                                    <div class="chart-tab ${chartPeriod === '7d' ? 'active' : ''}" onclick="app.handleChartPeriodChange('7d')">7D</div>
                                    <div class="chart-tab ${chartPeriod === '30d' ? 'active' : ''}" onclick="app.handleChartPeriodChange('30d')">30D</div>
                                    <div class="chart-tab ${chartPeriod === '1y' ? 'active' : ''}" onclick="app.handleChartPeriodChange('1y')">1Y</div>
                                </div>
                            </div>
                            <canvas id="balanceChart"></canvas>
                        </div>
                        
                        <h3 class="section-title">Recent Transactions</h3>
                        <div class="transaction-list">
                            ${transactions.length > 0 ? transactions.map(tx => `
                                <div class="transaction-item">
                                    <div class="transaction-info">
                                        <div class="transaction-icon ${tx.type === 'purchase' || tx.type === 'withdrawal' ? 'negative' : 'positive'}">
                                            <i class="fas fa-${tx.type === 'purchase' ? 'shopping-cart' : tx.type === 'withdrawal' ? 'money-bill-wave' : tx.type === 'gift' ? 'gift' : 'check'}"></i>
                                        </div>
                                        <div class="transaction-details">
                                            <h4>${tx.description}</h4>
                                            <p>${new Date(tx.date).toLocaleDateString()}</p>
                                        </div>
                                    </div>
                                    <div class="transaction-amount ${tx.amount > 0 ? 'positive' : 'negative'}">
                                        ${tx.amount > 0 ? '+' : ''}${tx.amount} coins
                                    </div>
                                </div>
                            `).join('') : '<p style="text-align: center; color: var(--zinc-500);">No transactions yet</p>'}
                        </div>
                        
                        <div class="rewards-categories">
                            ${rewardCategories.map(category => `
                                <div 
                                    class="category-tab ${selectedRewardCategory === category.id ? 'active' : ''}"
                                    onclick="app.handleRewardCategorySelect('${category.id}')"
                                >
                                    <i class="fas fa-${category.icon}" style="margin-right: 0.5rem;"></i>
                                    ${category.label}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="rewards-grid-page">
                            ${filteredRewards.map(reward => `
                                <div 
                                    class="reward-card-page"
                                    data-reward-id="${reward.id}"
                                    onclick='app.handleClaimReward(${JSON.stringify(reward).replace(/'/g, "&apos;")})'
                                >
                                    ${reward.discount ? `<div class="reward-discount-badge">-${reward.discount}%</div>` : ''}
                                    <div class="reward-icon-page" onclick="event.stopPropagation(); app.openLightbox('${reward.icon}')" style="cursor: pointer;">
                                        <img src="${reward.icon}" alt="${reward.name}">
                                    </div>
                                    <div class="reward-name-page">${reward.name}</div>
                                    <div class="reward-cost-page">
                                        ${reward.cost} Coins
                                        ${reward.originalCost ? `<span class="reward-original-price">${reward.originalCost}</span>` : ''}
                                    </div>
                                    <div class="reward-description-page">${reward.description}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="share-section">
                            <h3 class="share-title">Share & Earn</h3>
                            <p class="share-subtitle">Share WDS with friends! Link will be copied to clipboard.</p>
                            <div class="share-buttons">
                                <button class="share-btn" onclick="app.handleShare('Facebook')">
                                    <i class="fab fa-facebook"></i> Facebook
                                </button>
                                <button class="share-btn" onclick="app.handleShare('WhatsApp')">
                                    <i class="fab fa-whatsapp"></i> WhatsApp
                                </button>
                                <button class="share-btn" onclick="app.handleShare('Telegram')">
                                    <i class="fab fa-telegram"></i> Telegram
                                </button>
                                <button class="share-btn" onclick="app.handleShare('Reddit')">
                                    <i class="fab fa-reddit"></i> Reddit
                                </button>
                                <button class="share-btn" onclick="app.handleShare('Discord')">
                                    <i class="fab fa-discord"></i> Discord
                                </button>
                                <button class="share-btn" onclick="app.handleShare('TikTok')">
                                    <i class="fab fa-tiktok"></i> TikTok
                                </button>
                            </div>
                        </div>
                        
                        <div class="rewards-guide" style="margin-top: 2rem;">
                            <h4 style="font-size: 1rem; font-weight: 700; margin-bottom: 1rem;">How to Claim Rewards</h4>
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                    <div style="background: rgba(139, 92, 246, 0.2); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; flex-shrink: 0;">1</div>
                                    <div>
                                        <div style="font-weight: 600; font-size: 0.875rem; margin-bottom: 0.25rem;">Earn Coins</div>
                                        <div style="font-size: 0.75rem; color: var(--zinc-500);">Complete tasks and claim daily gifts to earn coins</div>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                    <div style="background: rgba(139, 92, 246, 0.2); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; flex-shrink: 0;">2</div>
                                    <div>
                                        <div style="font-weight: 600; font-size: 0.875rem; margin-bottom: 0.25rem;">Choose Reward</div>
                                        <div style="font-size: 0.75rem; color: var(--zinc-500);">Select your desired reward from the marketplace</div>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                    <div style="background: rgba(139, 92, 246, 0.2); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; flex-shrink: 0;">3</div>
                                    <div>
                                        <div style="font-weight: 600; font-size: 0.875rem; margin-bottom: 0.25rem;">Claim & Receive</div>
                                        <div style="font-size: 0.75rem; color: var(--zinc-500);">Redeem your coins and receive the reward via email</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="minimalist-dock" style="z-index: 950;">
                    <div class="dock-container">
                        ${dockItems.map(item => `
                            <div 
                                class="dock-item ${activeDockItem === item.id ? 'active' : ''}"
                                onclick="app.handleDockItemClick('${item.id}')"
                            >
                                <i class="fas fa-${item.icon}"></i>
                                <div class="dock-tooltip">${item.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const profilePage = `
                <div class="main-content">
                    <div class="profile-page">
                        <div class="profile-header-large">
                            <div class="profile-avatar-xl" onclick="app.toggleAvatarPicker()" style="border: 4px solid ${userData.profileCircleColor || '#71717a'};">
                                ${userData.avatarType === 'image' ? `<img src="${userData.avatar}" alt="">` : 
                                  userData.avatarType === 'emoji' ? userData.avatar : 
                                  userData.name.charAt(0).toUpperCase()}
                                <div class="profile-avatar-edit">
                                    <i class="fas fa-camera"></i> Change
                                </div>
                            </div>
                            
                            ${avatarPickerOpen ? `
                                <div style="width: 100%; max-width: 300px;">
                                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; justify-content: center;">
                                        <button class="camera-button" onclick="document.getElementById('avatar-file').click()">
                                            <i class="fas fa-camera"></i> Camera
                                        </button>
                                        <button class="camera-button" onclick="document.getElementById('gallery-file').click()">
                                            <i class="fas fa-images"></i> Gallery
                                        </button>
                                        <input type="file" id="avatar-file" accept="image/*" capture="environment" class="camera-input" onchange="app.handleAvatarFileSelect(event)">
                                        <input type="file" id="gallery-file" accept="image/*" class="camera-input" onchange="app.handleAvatarFileSelect(event)">
                                    </div>
                                    <div class="avatar-picker" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem; max-height: 240px; overflow-y: auto; padding: 0.5rem;">
                                        ${emojis.map(emoji => `
                                            <div class="avatar-emoji" onclick="app.handleEmojiSelect('${emoji}')">${emoji}</div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="profile-info-large">
                                <div class="profile-name-large">${userData.name}</div>
                                <div class="profile-title">${userTitle}</div>
                                <div class="profile-email-large">${userData.email}</div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h4 class="profile-section-title">Level Progress</h4>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-size: 1rem; font-weight: 700;">Level ${userData.level || 1}</span>
                                <span style="font-size: 0.875rem; color: var(--zinc-500);">${Math.floor(levelProgress.percent)}%</span>
                            </div>
                            <div class="progress-bar" style="height: 10px;">
                                <div class="progress-fill" style="width: ${levelProgress.percent}%; background: linear-gradient(90deg, ${userData.profileCircleColor || '#71717a'}, ${levelInfo.color});"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.75rem; color: var(--zinc-500);">
                                <span>${levelProgress.current} XP</span>
                                <span>${levelProgress.total} XP needed</span>
                            </div>
                        </div>
                        
                        <div class="profile-stats-large">
                            <div class="stat-card-large">
                                <div class="stat-value-large">${userData.balance}</div>
                                <div class="stat-label-large">Coins</div>
                            </div>
                            <div class="stat-card-large">
                                <div class="stat-value-large">${userData.completedTasks}</div>
                                <div class="stat-label-large">Tasks</div>
                            </div>
                            <div class="stat-card-large">
                                <div class="stat-value-large">${userData.level || 1}</div>
                                <div class="stat-label-large">Level</div>
                            </div>
                        </div>
                        
                        ${userData.unlockedTitles && userData.unlockedTitles.length > 0 ? `
                            <div class="profile-section">
                                <h4 class="profile-section-title">Unlocked Titles</h4>
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                    ${userData.unlockedTitles.map(title => `
                                        <span style="padding: 0.5rem 1rem; background: ${title.color}20; border: 1px solid ${title.color}; border-radius: 100px; font-size: 0.875rem; color: ${title.color};">
                                            ${title.value}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                        
                        <div class="profile-section">
                            <h4 class="profile-section-title">Update Profile</h4>
                            <form class="auth-form" onsubmit="app.handleProfileUpdate(event)" style="margin: 0;">
                                <div class="form-group">
                                    <label class="form-label">Display Name</label>
                                    <input 
                                        type="text" 
                                        name="name" 
                                        class="form-input" 
                                        placeholder="Enter your name"
                                        value="${userData.name}"
                                        autocomplete="name"
                                    />
                                </div>
                                <button type="submit" class="shimmer-button" style="margin-top: 0.5rem;">
                                    Update Profile
                                </button>
                            </form>
                        </div>
                        
                        <div class="profile-section">
                            <h4 class="profile-section-title">Change Password</h4>
                            <form class="auth-form" onsubmit="app.handlePasswordChange(event)" style="margin: 0;">
                                <div class="form-group">
                                    <label class="form-label">Current Password</label>
                                    <input 
                                        type="password" 
                                        name="currentPassword" 
                                        class="form-input" 
                                        placeholder="Enter current password"
                                        required
                                        autocomplete="current-password"
                                    />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">New Password</label>
                                    <input 
                                        type="password" 
                                        name="newPassword" 
                                        class="form-input" 
                                        placeholder="Enter new password"
                                        required
                                        minlength="6"
                                        autocomplete="new-password"
                                    />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Confirm Password</label>
                                    <input 
                                        type="password" 
                                        name="confirmPassword" 
                                        class="form-input" 
                                        placeholder="Confirm new password"
                                        required
                                        minlength="6"
                                        autocomplete="new-password"
                                    />
                                </div>
                                <button type="submit" class="shimmer-button" style="margin-top: 0.5rem;">
                                    Change Password
                                </button>
                            </form>
                        </div>
                        
                        <div class="profile-section">
                            <h4 class="profile-section-title">Contact Support</h4>
                            <form onsubmit="app.handleContactSubmit(event)">
                                <div class="form-group" style="margin-bottom: 0.75rem;">
                                    <input 
                                        type="email" 
                                        name="contactEmail" 
                                        class="form-input" 
                                        placeholder="Your email"
                                        required
                                    />
                                </div>
                                <div class="form-group" style="margin-bottom: 0.75rem;">
                                    <textarea 
                                        name="contactMessage" 
                                        class="form-input" 
                                        placeholder="Your message"
                                        rows="3"
                                        required
                                        style="resize: none; border-radius: 12px;"
                                    ></textarea>
                                </div>
                                <button type="submit" class="ghost-button" style="padding: 0.75rem;">
                                    Send Message - We'll contact you within 24-48 hours
                                </button>
                            </form>
                        </div>
                        
                        <div style="margin-top: 2rem;">
                            <button class="ghost-button" onclick="AuthSystem.signOut()" style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); color: #f87171;">
                                <i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;"></i>
                                Sign Out
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="minimalist-dock">
                    <div class="dock-container">
                        ${dockItems.map(item => `
                            <div 
                                class="dock-item ${activeDockItem === item.id ? 'active' : ''}"
                                onclick="app.handleDockItemClick('${item.id}')"
                            >
                                <i class="fas fa-${item.icon}"></i>
                                <div class="dock-tooltip">${item.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const dailyGiftPage = `
                <div class="main-content">
                    <div class="daily-gift-page">
                        <div class="gift-header">
                            <div class="gift-icon-large">
                                <i class="fas fa-gift"></i>
                            </div>
                            <h2 class="gift-title-large">Daily Free Gift</h2>
                            <p class="gift-subtitle-large">
                                ${userData.dailyGiftClaimed ? 
                                    'You have already claimed your gift today. Come back tomorrow!' : 
                                    'Select one of the boxes below to reveal your prize!'}
                            </p>
                        </div>
                        
                        <div class="gift-grid-large">
                            ${dailyGifts.map((gift, index) => `
                                <div 
                                    class="gift-box-large ${gift.revealed ? 'selected' : ''}"
                                    onclick="app.handleDailyGiftSelect(${index})"
                                >
                                    <div class="gift-box-icon">
                                        <i class="fas fa-${gift.revealed ? (gift.type === 'empty' ? 'times' : 'coins') : 'gift'}"></i>
                                    </div>
                                    <div class="gift-box-value">
                                        ${gift.revealed ? (gift.type === 'empty' ? 'Empty' : `+${gift.value}`) : '?'}
                                    </div>
                                    <div class="gift-box-label">
                                        ${gift.revealed ? (gift.type === 'empty' ? 'No luck' : 'Coins') : 'Click to open'}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <button 
                            class="shimmer-button"
                            onclick="app.handleStartDailyGift()"
                            ${userData.dailyGiftClaimed ? 'disabled' : ''}
                            style="max-width: 300px; margin: 0 auto;"
                        >
                            ${userData.dailyGiftClaimed ? 'Already Claimed' : 'Start Daily Gift'}
                        </button>
                        
                        <div class="gift-info-card">
                            <h5 class="gift-info-title">Prize Distribution</h5>
                            <div class="gift-probability-row">
                                <span>40 coins</span>
                                <span>10% chance</span>
                            </div>
                            <div class="gift-probability-row">
                                <span>30-40 coins</span>
                                <span>20% chance</span>
                            </div>
                            <div class="gift-probability-row">
                                <span>20-30 coins</span>
                                <span>50% chance</span>
                            </div>
                            <div class="gift-probability-row">
                                <span>10-20 coins</span>
                                <span>80% chance</span>
                            </div>
                            <div class="gift-probability-row">
                                <span>5-10 coins</span>
                                <span>90% chance</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="minimalist-dock">
                    <div class="dock-container">
                        ${dockItems.map(item => `
                            <div 
                                class="dock-item ${activeDockItem === item.id ? 'active' : ''}"
                                onclick="app.handleDockItemClick('${item.id}')"
                            >
                                <i class="fas fa-${item.icon}"></i>
                                <div class="dock-tooltip">${item.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const guestRestrictedView = `
                <div class="main-content">
                    <div class="guest-restricted">
                        <div class="guest-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <h2 class="guest-title">Rewards Marketplace</h2>
                        <p class="guest-description">
                            Sign up to access exclusive rewards including Roblox credits, Fortnite V-Bucks, 
                            cryptocurrency, gift cards, and more!
                        </p>
                        <button class="shimmer-button" onclick="app.setState({ currentView: 'auth', authMode: 'signup' })" style="max-width: 250px;">
                            Sign Up & Get 180 Coins
                        </button>
                        <button class="ghost-button" onclick="app.setState({ currentView: 'auth', authMode: 'signin' })" style="max-width: 250px; margin-top: 0.75rem;">
                            Already have an account? Sign In
                        </button>
                    </div>
                </div>
            `;
            
            let levelUpOverlay = '';
            if (showLevelUp && newLevel) {
                const newLevelInfo = LevelSystem.getLevelInfo(newLevel);
                levelUpOverlay = `
                    <div class="level-up-overlay" onclick="app.dismissLevelUp()">
                        <div class="level-up-content">
                            <div class="level-up-icon" style="background: ${newLevelInfo.color};">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <h2 class="level-up-title">LEVEL UP!</h2>
                            <p class="level-up-subtitle">You reached Level ${newLevel}</p>
                            <p class="level-up-reward" style="color: ${newLevelInfo.color}; font-size: 1.5rem; font-weight: 700;">
                                ${newLevelInfo.title}
                            </p>
                            <p class="level-up-reward">+${newLevelInfo.coins} coins bonus!</p>
                            <button class="level-up-button" onclick="app.dismissLevelUp()">Awesome!</button>
                        </div>
                    </div>
                `;
            }
            
            let lightbox = '';
            if (currentLightbox) {
                lightbox = `
                    <div class="lightbox" onclick="app.closeLightbox()">
                        <button class="lightbox-close" onclick="app.closeLightbox()">&times;</button>
                        <img src="${currentLightbox}" alt="Full size" onclick="event.stopPropagation()">
                    </div>
                `;
            }
            
            let modal = '';
            
            if (activeModal === 'reward-confirmation' && confirmingReward) {
                modal = renderRewardConfirmationModal();
            } else if (activeModal === 'big-task-details' && selectedOffer) {
                modal = renderBigTaskModal();
            } else if (activeModal === 'small-task-complete' && selectedOffer) {
                modal = renderSmallTaskModal();
            }
            
            let content = '';
            if (currentView === 'auth') {
                content = authScreen;
            } else if (currentView === 'rewards') {
                if (state.isAuthenticated && state.user.email === 'guest@wedropstuff.com') {
                    content = guestRestrictedView;
                } else {
                    content = rewardsPage;
                }
            } else if (currentView === 'profile') {
                content = profilePage;
            } else if (currentView === 'daily-gift') {
                content = dailyGiftPage;
            } else if (currentView === 'explore') {
                content = explorePage;
            } else {
                content = mainDashboard;
            }
            
            root.innerHTML = `
                ${header}
                ${content}
                ${modal}
                ${levelUpOverlay}
                ${lightbox}
            `;
            
            if (currentView === 'auth' && authMode === 'signup') {
                updatePasswordValidation(authForm.password);
            }
            
            if (currentView === 'rewards' && !state.isGuest) {
                setTimeout(() => {
                    initChart();
                    initPullToRefresh();
                }, 100);
            }
            
            setTimeout(() => {
                initGiftSlider();
            }, 100);
            
            if (state.searchQuery && document.querySelector('.search-input')) {
                const searchInput = document.querySelector('.search-input');
                searchInput.focus();
                const val = searchInput.value;
                searchInput.value = '';
                searchInput.value = val;
            }
        }

        function renderRewardConfirmationModal() {
            const reward = state.confirmingReward;
            const userBalance = state.userData.balance;
            const stage = state.confirmationStage;
            const canAfford = userBalance >= reward.cost;
            
            let content = '';
            
            if (stage === 'idle') {
                content = `
                    <div class="modal-image" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2)); display: flex; align-items: center; justify-content: center; overflow: hidden;">
                        <img src="${reward.icon}" style="width: 100%; height: 100%; object-fit: cover;" alt="${reward.name}">
                    </div>
                    <div style="text-align: center;">
                        <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">${reward.name}</h4>
                        <p class="modal-description">${reward.description}</p>
                        <div style="margin: 1rem 0; padding: 1rem; background: rgba(255, 255, 255, 0.05); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="font-size: 0.875rem; color: var(--zinc-400); margin-bottom: 0.25rem;">Your Balance</div>
                            <div style="font-size: 1.25rem; font-weight: 700; color: ${userBalance >= reward.cost ? '#10b981' : '#ef4444'};">
                                ${userBalance} coins ${userBalance >= reward.cost ? '' : ''}
                            </div>
                        </div>
                        <div style="font-size: 1.125rem; font-weight: 700; color: var(--warning-color); margin-bottom: 1rem;">
                            Cost: ${reward.cost} Coins
                            ${reward.originalCost ? `<span style="text-decoration: line-through; color: var(--zinc-500); margin-left: 0.5rem; font-size: 0.875rem;">${reward.originalCost}</span>` : ''}
                        </div>
                    </div>
                    <div class="modal-actions">
                        ${canAfford ? `
                            <button class="shimmer-button" onclick="app.handleConfirmRewardClaim()">
                                Confirm Purchase
                            </button>
                        ` : `
                            <button class="shimmer-button" onclick="app.handleGoToEarn()" style="background: var(--danger-color);">
                                Insufficient Funds - Earn More
                            </button>
                        `}
                        <button class="ghost-button" onclick="app.closeModal()">
                            Cancel
                        </button>
                    </div>
                `;
            } else if (stage === 'countdown') {
                content = `
                    <div class="task-loader">
                        <div class="countdown-number">${state.taskCountdown}</div>
                        <div class="task-loader-text">Processing your reward...</div>
                        <div style="font-size: 0.875rem; color: var(--zinc-500);">Please wait</div>
                    </div>
                `;
            } else if (stage === 'processing') {
                content = `
                    <div class="task-loader">
                        <div class="initial-loader-spinner"></div>
                        <div class="initial-loader-text">Processing transaction...</div>
                    </div>
                `;
            } else if (stage === 'complete') {
                content = `
                    <div class="task-loader">
                        <div class="task-checkmark" style="width: 80px; height: 80px; font-size: 2.5rem;">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="task-completed-message" style="font-size: 1.5rem;">Success!</div>
                        <div style="color: var(--zinc-400); font-size: 0.875rem;">${reward.name} will be sent to your email</div>
                    </div>
                `;
            } else if (stage === 'insufficient') {
                content = `
                    <div class="insufficient-balance-msg">
                        <i class="fas fa-exclamation-circle"></i>
                        <h4>Insufficient Balance</h4>
                        <p>You need ${reward.cost - state.userData.balance} more coins to claim this reward.</p>
                        <button class="shimmer-button" onclick="app.handleGoToEarn()" style="margin-bottom: 0.75rem;">
                            <i class="fas fa-search" style="margin-right: 0.5rem;"></i>
                            Go to Tasks
                        </button>
                        <button class="ghost-button" onclick="app.closeModal()">
                            Close
                        </button>
                    </div>
                `;
            }
            
            return `
                <div class="modal-overlay" onclick="event.stopPropagation()">
                    <div class="modal">
                        <div class="modal-header">
                            <h3 class="modal-title">Confirm Redemption</h3>
                            <button class="modal-close" onclick="app.closeModal()">&times;</button>
                        </div>
                        <div class="modal-content">
                            ${content}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderBigTaskModal() {
            const task = state.selectedOffer;
            const progressPercent = task.unlocked ? Math.floor((task.currentProgress / task.targetCoins) * 100) : 0;
            
            return `
                <div class="modal-overlay" onclick="event.stopPropagation()">
                    <div class="modal">
                        <div class="modal-header">
                            <h3 class="modal-title">Big Task</h3>
                            <button class="modal-close" onclick="app.closeModal()">&times;</button>
                        </div>
                        <div class="modal-content">
                            <div class="modal-image" style="background: linear-gradient(135deg, ${task.unlocked ? task.reward.color : '#3f3f46'}, ${task.unlocked ? task.reward.color + '80' : '#27272a'}); display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-${task.unlocked ? 'trophy' : 'lock'}" style="font-size: 4rem; color: white;"></i>
                            </div>
                            <div>
                                <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">${task.title}</h4>
                                <p class="modal-description">${task.description}</p>
                                ${task.unlocked ? `
                                    <div style="margin-top: 0.5rem; padding: 0.75rem; background: ${task.reward.color}20; border: 1px solid ${task.reward.color}; border-radius: 8px;">
                                        <span style="color: ${task.reward.color}; font-weight: 700;">Reward: ${task.reward.value} Title</span>
                                    </div>
                                ` : `
                                    <div style="margin-top: 0.5rem; padding: 0.75rem; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px;">
                                        <span style="color: #f87171; font-weight: 700;">Unlocks at Level ${task.unlockLevel}</span>
                                    </div>
                                `}
                            </div>
                            
                            ${task.unlocked ? `
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>Progress</span>
                                        <span>${progressPercent}%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${progressPercent}%"></div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--zinc-500); margin-top: 0.25rem;">
                                        <span>${task.currentProgress} coins</span>
                                        <span>${task.targetCoins} coins needed</span>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="modal-actions">
                                <button class="ghost-button" onclick="app.closeModal()">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSmallTaskModal() {
            const task = state.selectedOffer;
            const { taskLoaderStage, taskCountdown, warningPhase } = state;
            
            let content = '';
            
            if (taskLoaderStage === 'preparing') {
                const dotCount = ((3 - (taskCountdown % 3)) % 3) + 1;
                const dots = '.'.repeat(dotCount);
                
                content = `
                    <div class="task-loader">
                        <div style="font-size: 4rem; margin-bottom: 1rem; animation: pulse 2s infinite;">
                            
                        </div>
                        <div class="fade-in-out" style="font-size: 1.25rem; font-weight: 600; text-align: center; max-width: 300px; line-height: 1.5; margin-bottom: 1rem;">
                            Preparing your task...<br>
                            <span style="font-size: 0.875rem; color: var(--zinc-400);">Please wait</span>
                        </div>
                        <div style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.05); border-radius: 100px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <span style="font-size: 1rem; font-weight: 700; color: var(--pure-white);">Loading${dots}</span>
                        </div>
                        <div style="margin-top: 2rem; font-size: 0.75rem; color: var(--zinc-600); text-align: center; max-width: 280px; line-height: 1.5;">
                            <i class="fas fa-info-circle" style="margin-right: 0.5rem; color: var(--primary-color);"></i>
                            Please complete the tasks that will appear in the website so you can earn without problems and to avoid ban
                        </div>
                    </div>
                `;
            } else if (taskLoaderStage === 'ready-to-start') {
                content = `
                    <div class="task-loader">
                        <div style="font-size: 4rem; margin-bottom: 1rem; color: #10b981;">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">Ready to Start!</div>
                        <div style="font-size: 0.875rem; color: var(--zinc-400); margin-bottom: 2rem; text-align: center;">
                            Click the button below to open the task website
                        </div>
                        <button class="start-task-btn" onclick="app.handleStartTaskButton()">
                            <span>Start Task</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <div style="margin-top: 2rem; font-size: 0.75rem; color: var(--danger-color); text-align: center; max-width: 280px; line-height: 1.5; animation: fadeInOut 2s infinite;">
                            <i class="fas fa-exclamation-triangle" style="margin-right: 0.5rem;"></i>
                            Please complete your tasks to verify. Accounts that ignore tasks may be restricted. Complete tasks to enable withdrawals.
                        </div>
                    </div>
                `;
            } else if (taskLoaderStage === 'warning') {
                const isWarningPhase = warningPhase === 0;
                const dotCount = ((120 - taskCountdown) % 3) + 1;
                const dots = '.'.repeat(dotCount);
                
                content = `
                    <div class="task-loader">
                        <div style="font-size: 4rem; margin-bottom: 1rem; animation: pulse 2s infinite;">
                            ${isWarningPhase ? '' : ''}
                        </div>
                        <div class="fade-in-out" style="font-size: 1.25rem; font-weight: 600; text-align: center; max-width: 300px; line-height: 1.5; margin-bottom: 1rem;">
                            ${isWarningPhase 
                                ? 'Finish your task first!<br><span style="font-size: 0.875rem; color: var(--zinc-400);">Complete the requirements on the website</span>' 
                                : 'Don\'t waste time!<br>Complete your tasks then comeback!<br><span style="font-size: 0.875rem; color: var(--zinc-400);">Stay focused and finish quickly</span>'}
                        </div>
                        <div style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.05); border-radius: 100px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <span style="font-size: 1rem; font-weight: 700; color: var(--pure-white);">Verifying${dots}</span>
                        </div>
                        <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--zinc-600);">
                            Please stay on this screen
                        </div>
                        <div style="margin-top: 2rem; padding: 1rem; background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 12px; max-width: 300px;">
                            <div style="font-size: 0.75rem; color: var(--warning-color); text-align: center; line-height: 1.5; animation: fadeInOut 2s infinite;">
                                <i class="fas fa-robot" style="margin-right: 0.5rem;"></i>
                                Accounts that ignore tasks may be restricted. Complete tasks to enable withdrawals.
                            </div>
                        </div>
                    </div>
                `;
            } else if (taskLoaderStage === 'complete') {
                content = `
                    <div class="task-loader">
                        <div class="task-checkmark" style="width: 80px; height: 80px; font-size: 2.5rem;">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="task-completed-message" style="font-size: 1.5rem; margin-top: 1rem;">+${task.coins} Coins Added!</div>
                        <div style="margin-top: 0.5rem; color: var(--zinc-400); font-size: 0.875rem;">Reward secured successfully</div>
                    </div>
                `;
            }
            
            return `
                <div class="modal-overlay" onclick="event.stopPropagation()">
                    <div class="modal">
                        <div class="modal-header">
                            <h3 class="modal-title">Quick Task</h3>
                            <button class="modal-close" onclick="app.closeModal()">&times;</button>
                        </div>
                        <div class="modal-content">
                            ${content}
                        </div>
                    </div>
                </div>
            `;
        }

        function init() {
            loadSavedState();
            document.addEventListener('keydown', handleCommandK);
            window.addEventListener('scroll', handleScroll);
            TimerSystem.start();
            TimerSystem.startEventTimer();
            initSwipeHandlers();
            render();
            
            window.app = {
                setState,
                handleAuthInput,
                handleSignUp,
                handleSignIn,
                handleGuestAccess,
                handleSearch,
                handleSearchResultClick,
                handleTaskClick,
                handleSmallTaskClick,
                handleGetCoins,
                handleOfferClick,
                handleCategoryTaskClick,
                handleDockItemClick,
                handleRewardCategorySelect,
                handleExploreCategorySelect,
                handleProfileUpdate,
                handlePasswordChange,
                handleAvatarFileSelect,
                handleEmojiSelect,
                handleDailyGiftSelect,
                handleStartDailyGift,
                handleGiftSlide,
                handleClaimReward,
                handleConfirmRewardClaim,
                handleGoToEarn,
                handleShare,
                closeModal,
                toggleAuthMode,
                toggleAvatarPicker,
                dismissLevelUp,
                showBigTaskDetails,
                handleStartTaskButton,
                openLightbox,
                closeLightbox,
                getCategoryTaskIcon,
                handleChartPeriodChange,
                handleCardActivation,
                toggleCardVisibility,
                handleWithdrawSubmit,
                handleWithdrawMethodChange
            };
            
            window.AuthSystem = AuthSystem;
            window.TaskSystem = TaskSystem;
            window.DailyGiftSystem = DailyGiftSystem;
            window.RewardsSystem = RewardsSystem;
            window.OfferSystem = OfferSystem;
            window.LevelSystemManager = LevelSystemManager;
            window.CardSystem = CardSystem;
            
            if (!localStorage.getItem('wdsFirstVisit')) {
                setTimeout(() => {
                    showNotification('Welcome to WDS! Claim your daily gift.', 'info');
                    localStorage.setItem('wdsFirstVisit', 'true');
                }, 1000);
            }
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>